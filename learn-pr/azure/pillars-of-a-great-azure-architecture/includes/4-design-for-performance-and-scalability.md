조직의 혁신적인 암 치료를 다루는 뉴스 기사가 방금 게시되었다고 가정합시다. 이 기사는 아주 중요한 획기적인 사건이며, 틀림 없이 웹 사이트에 대규모의 트래픽 유입을 가져오게 됩니다. 웹 사이트가 이 트래픽 증가를 처리할 수 있나요, 아니면 부하 때문에 사이트가 느려지거나 응답하지 않게 되나요?

여기에서 크기 조정 및 최적화 원칙을 사용하여 훌륭한 응용 프로그램 성능을 보장하는 기본 원칙 중 몇 가지를 살펴보겠습니다.

## <a name="what-is-scaling-and-performance-optimization"></a>크기 조정 및 성능 최적화란?

크기 조정 및 성능 최적화는 응용 프로그램이 수신하는 요구와 응용 프로그램에 사용할 수 있는 리소스를 일치시키는 방법에 대한 것입니다. 성능 최적화에는 리소스 크기 조정, 잠재적인 병목 상태 구분 및 최적화, 최고 성능에 대한 응용 프로그램 코드 최적화가 포함됩니다.

### <a name="scaling"></a>크기 조정

두 가지 방향으로 리소스 계산을 크기 조정할 수 있습니다.

* *강화*는 단일 인스턴스에 더 많은 리소스를 추가하는 동작입니다.
* *확장*은 인스턴스를 추가하는 것입니다.

![성능 용량을 늘리기 위한 가상 머신의 강화 및 확장을 보여주는 일러스트레이션입니다.](../media/scale-up-scale-out.png)

강화는 단일 인스턴스에 CPU 또는 메모리 같은 더 많은 리소스를 추가하는 것과 관련이 있습니다. 이 인스턴스는 가상 머신 또는 PaaS 서비스일 수 있습니다. 인스턴스에 더 많은 용량을 추가하는 동작은 응용 프로그램에 사용할 수 있는 리소스를 증가시키지만, 추가는 제한적입니다. 가상 머신은 실행하는 호스트의 용량으로 제한되며, 자체 호스트에는 물리적 제한이 있습니다. 결과적으로 인스턴스를 강화할 경우 이러한 제한을 실행하여 인스턴스에 리소스를 더 추가하는 기능을 제한할 수 있습니다.

확장은 서비스에 추가적인 인스턴스를 추가하는 것과 관련이 있습니다. 이러한 인스턴스는 가상 머신 또는 PaaS 서비스일 수 있습니다. 그러나 단일 인스턴스를 더 강력하게 만들어 더 많은 용량을 추가하는 대신 전체 총 인스턴스 수를 늘려 용량을 추가합니다. 확장의 이점은 아키텍처에 더 많은 머신을 추가할 경우 영구적으로 확장할 수 있다는 점입니다. 확장에는 특정 유형의 부하 분산이 필요합니다. 이 부하 분산은 사용 가능한 서버에 요청을 분산하는 부하 분산 장치 또는 요청을 보내는 활성 서버를 구분하기 위한 서비스 검색 메커니즘의 형태로 제공될 수 있습니다.

두 경우 모두 리소스를 줄여주어 비용 최적화를 구현할 수 있습니다.

### <a name="performance-optimization"></a>성능 최적화

성능을 최적화하는 경우 성능이 허용 가능한지 확인하기 위해 네트워크 및 저장소를 살펴봅니다. 둘 다 응용 프로그램의 응답 시간에 영향을 줄 수 있습니다. 아키텍처에 대한 올바른 네트워킹 및 저장 기술을 선택하면 소비자에게 최상의 환경을 제공하도록 보장하는 데 도움이 됩니다.

성능 최적화에는 또한 응용 프로그램 자체가 작동하는 방법을 이해하는 것도 포함됩니다. 오류, 잘못 수행된 코드 및 종속 시스템의 병목 현상은 응용 프로그램 성능 관리 도구를 통해 모두 파악할 수 있습니다. 대개 이러한 문제는 최종 사용자, 개발자 및 관리자에게 숨기거나 난독 처리될 수 있지만 응용 프로그램의 전반적인 성능에 부정적인 영향을 미칠 수 있습니다.

## <a name="scalability-and-performance-patterns-and-practices"></a>확장성과 성능 패턴 및 사례

응용 프로그램의 성능과 확장성을 향상시키기 위해 활용할 수 있는 일부 패턴 및 연습을 살펴보겠습니다.

### <a name="data-partitioning"></a>데이터 분할

대부분의 대규모 솔루션은 데이터를 개별적으로 관리하고 액세스할 수 있는 별도의 파티션으로 나눕니다. 분할 전략은 부정적인 영향을 최소화하고 이점을 극대화하도록 신중하게 선택해야 합니다. 분할을 통해 확장성을 향상시키고 경합을 줄여 성능을 최적화할 수 있습니다.

### <a name="caching"></a>캐싱

아키텍처에서 캐싱을 사용하면 성능을 향상시킬 수 있습니다. 캐싱은 빠른 검색을 위해 자주 사용되는 데이터 또는 자산(웹 페이지, 이미지)을 저장하는 메커니즘입니다. 캐싱은 응용 프로그램의 다른 계층에 사용될 수 있습니다. 응용 프로그램 서버 및 데이터베이스 간에 캐싱을 사용하여 데이터 검색 시간을 줄일 수 있습니다. 또한 최종 사용자 및 웹 서버 사이에 캐싱을 사용하여 고정 콘텐츠를 사용자에게 가깝게 배치하고 최종 사용자에게 웹 페이지를 반환하는 데 걸리는 시간을 줄일 수 있습니다. 이 캐싱은 또한 데이터베이스 또는 웹 서버에서 요청을 오프로딩하는 부차적인 영향을 미쳐 다른 요청에 대한 성능을 향상시킵니다.

### <a name="autoscaling"></a>자동 크기 조정

자동 크기 조정은 성능 요구 사항에 맞게 리소스를 동적으로 할당하는 프로세스입니다. 작업 용량이 증가하면 응용 프로그램에는 원하는 성능 수준을 유지하고 SLA(서비스 수준 계약)를 만족하기 위해 추가 리소스가 필요할 수 있습니다. 수요가 감소하고 추가 리소스가 더 이상 필요 없어지면 비용을 최소화하기 위해 할당을 취소할 수 있습니다.

자동 크기 조정은 관리 부담을 완화하면서 클라우드에 호스트된 환경의 탄력성을 활용합니다. 이렇게 하면 운영자가 시스템 성능을 지속적으로 모니터링하고 리소스 추가 또는 제거를 결정할 필요가 줄어듭니다.

### <a name="decouple-resource-intensive-tasks-as-background-jobs"></a>리소스 집약적인 작업을 백그라운드 작업으로 분리

다양한 형식의 응용 프로그램을 사용하려면 UI(사용자 인터페이스)와 독립적으로 실행되는 백그라운드 작업이 필요합니다. 이러한 작업의 예로 배치 작업, 집약적인 처리 작업, 워크플로 등의 장기 실행 프로세스가 있습니다. 백그라운드 작업은 사용자 조작 없이 실행할 수 있으며, 응용 프로그램은 작업을 시작한 다음 사용자의 조작 요청을 계속 처리할 수 있습니다. 따라서 응용 프로그램 UI에 대한 부담을 최소화하므로 가용성을 개선하고 대화형 응답 시간을 줄일 수 있습니다.

### <a name="use-a-messaging-layer-between-services"></a>서비스 간 메시징 계층 사용

서비스 간에 메시징 계층을 추가하면 성능 및 확장성에 이점이 될 수 있습니다. 메시징 계층을 추가하면 서비스 간 요청에 대한 버퍼를 만들므로 응용 프로그램이 유지될 수 없는 경우에도 요청은 오류 없이 계속 유입될 수 있습니다. 응용 프로그램이 요청을 통해 작동하므로 수신된 순서에 따라 요청에 응답할 수 있습니다.

### <a name="implement-scale-units"></a>배율 단위 구현

단위로 크기를 조정합니다. 각 리소스에서 종속 시스템에 크기 조정 작업이 일으킬 수 있는 영향을 확인합니다. 이렇게 하면 쉽게 확장 작업을 적용하고, 응용 프로그램에 부정적인 영향이 줄어들 수 있습니다. 예를 들어 x개의 웹 및 작업자 역할을 추가하려면 역할에서 생성되는 추가 워크로드를 처리하기 위해 y개의 추가 쿼리 및 z개의 저장소 계정이 필요할 수 있습니다. 배율 단위는 x개의 웹 및 작업자 역할, y개의 큐 및 z개의 저장소 계정으로 구성됩니다. 하나 이상의 배율 단위를 추가하여 쉽게 확장할 수 있도록 응용 프로그램을 디자인합니다.

### <a name="performance-monitoring"></a>성능 모니터링

클라우드에서 실행되는 분산 응용 프로그램 및 서비스는 특성상, 많은 이동 부분으로 구성되는 복잡한 소프트웨어입니다. 프로덕션 환경에서는 사용자가 시스템을 활용하는 방식과 리소스 사용률을 추적하고, 시스템의 상태 및 성능을 전반적으로 모니터링할 수 있어야 합니다. 이 정보를 진단 보조 기능으로 사용하여 문제를 검색하고 수정할 수 있으며 잠재적 문제를 발견하여 이 문제가 발생하지 않도록 할 수도 있습니다.

응용 프로그램의 모든 계층을 살펴보고, 응용 프로그램의 성능 병목 상태를 파악하고 수정합니다. 이러한 병목 상태로 인해 응용 프로그램에서 또는 데이터베이스에 인덱스를 추가하는 과정에서 메모리가 잘못 처리될 수 있습니다. 하나의 병목 상태를 완화한 다음, 인식되지 않는 다른 병목 상태를 발견하게 되면 반복적인 프로세스일 수 있습니다.

성능 모니터링에 대한 철저한 접근법을 사용하여 아키텍처에서 활용할 수 있는 패턴 및 사례 형식을 결정할 수 있습니다.