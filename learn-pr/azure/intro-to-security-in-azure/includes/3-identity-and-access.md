네트워크 경계와 해당 방화벽 및 물리적 액세스 제어는 회사 데이터를 보호하는 데 기본적으로 사용되었습니다. 그러나 네트워크 경계는 BYOD(Bring Your Own Device), 모바일 앱 및 클라우드 응용 프로그램이 폭발적으로 증가함에 따라 점차적으로 허점이 드러나게 되었습니다. 

ID는 새로운 기본 보안 경계가 되었습니다. 따라서 적절한 인증 및 권한 할당은 데이터 제어를 유지 관리하는 데 중요합니다.

여러분이 일하고 있는 Contoso Shipping은 이러한 문제를 즉시 해결하기 위해 집중하고 있습니다. 배송 차량이 비즈니스 최적화에 필요한 원격 분석 데이터 스트림을 지속적으로 보내도록 관리하는 것 외에도, 인증된 사용자가 &mdash;에 로그인할 때 팀의 새로운 하이브리드 클라우드 솔루션은 비밀 데이터에 대한 액세스 권한을 가진 모바일 앱을 고려해야 합니다.

## <a name="single-sign-on"></a>Single Sign-On

사용자가 관리할 ID가 많을수록 자격 증명 관련 보안 사건이 발생할 위험이 높습니다. 더 많은 ID는 더 많은 암호를 기억하고 변경해야 한다는 뜻입니다. 암호 정책은 응용 프로그램에 따라 다를 수 있으며, 복잡성 요구 사항이 늘어나면 사용자가 암호를 기억하기가 더 어려워집니다.

이제 모든 ID 관리의 실행 계획을 생각해 봅시다. 계정 잠금 및 암호 재설정 요청을 처리하는 기술 지원팀의 부담이 가중됩니다. 사용자가 조직을 떠날 때 해당 사용자의 모든 ID를 추적하여 비활성화는 것이 어려울 수 있습니다. ID를 간과하면 제거되었어야 하는 ID를 통해 액세스할 수 있는 문제가 발생할 수 있습니다.

SSO(Single Sign-On)를 사용하면 사용자가 ID 하나와 암호 하나만 기억하면 됩니다. 응용 프로그램에 대한 액세스 권한이 사용자와 연결된 ID에 부여되므로 보안 모델이 간소화됩니다. 액세스 수정이 단일 ID에 연결되어 있으므로 사용자 역할이 변경되거나 사용자가 조직을 떠날 때 계정을 변경하거나 비활성화하는 과정이 대폭 축소됩니다. 계정에 Single Sign-On을 사용하면 사용자가 ID를 간편하게 관리할 수 있으며, 환경의 보안 기능이 향상됩니다.

:::row:::
  :::column:::
    ![Azure Active Directory를 나타내는 지문](../media/3-sso-with-azure-ad.png)
  :::column-end:::
    :::column span="3"::: **Azure Active Directory를 사용한 SSO**

Azure AD(Active Directory)는 클라우드 기반 ID 서비스입니다. 기본적으로 제공되는 지원이며, 기존 온-프레미스 Active Directory와 동기화할 수도 있고 독립 실행형으로 사용할 수도 있습니다. 즉, 온-프레미스든, 클라우드든(Office 365 포함), 모바일이든 관계없이, 모든 응용 프로그램이 동일한 자격 증명을 공유할 수 있습니다. 관리자와 개발자는 중앙 집중식 규칙과 Azure AD에서 구성한 정책을 사용하여 데이터 및 응용 프로그램에 대한 액세스를 제어할 수 있습니다.

또한 SSO에 Azure AD를 활용하면 여러 데이터 원본을 지능형 보안 그래프로 결합할 수 있습니다. 이 보안 그래프를 통해 온-프레미스 AD에서 동기화된 계정을 포함하여 Azure AD의 모든 계정에 위협 분석 및 실시간 ID 보호 기능을 제공할 수 있습니다. 중앙 집중식 ID 공급자를 사용하면 ID 인프라의 보안 제어, 보고, 경고 및 관리를 중앙 집중화할 수 있습니다.

Contoso Shipping는 기존 Active Directory 인스턴스를 Azure AD와 통합하여 조직 전체에서 액세스를 일관적으로 제어합니다. 이렇게 하면 다시 인증하지 않고 이메일 및 Office 365 문서에 간단하게 로그인할 수 있습니다.
  :::column-end:::
:::row-end:::

## <a name="multi-factor-authentication"></a>Multi-factor Authentication

MFA(다단계 인증)는 전체 인증에 2개 이상의 요소를 요구하여 ID를 추가로 보호합니다. 이러한 요소는 세 가지 범주로 분류됩니다.

- *사용자가 알고 있는 것*
- *사용자가 소유하고 있는 것*
- *사용자의 신원 정보*

**사용자가 알고 있는 것**은 암호이거나 보안 질문에 대한 대답입니다. **사용자가 소유하고 있는 것**은 알림을 받는 모바일 앱 또는 토큰 생성 장치일 수 있습니다. **사용자의 신원 정보**는 여러 모바일 장치에서 사용되는 지문 또는 얼굴 검사처럼 일반적으로 생체 인식 속성의 일종입니다.

MFA를 사용하면 자격 증명 노출의 영향이 제한되므로 ID 보안이 향상됩니다. 사용자의 암호를 알고 있는 공격자가 완벽하게 인증하려면 사용자의 전화기를 소유하고 있거나 사용자의 얼굴이 필요합니다. 단일 요소의 확인을 거친 인증만으로는 부족하며 공격자는 이러한 자격 증명을 사용하여 인증할 수 없습니다. 이렇게 하면 보안이 대폭 향상되며, MFA 사용의 중요성은 아무리 강조해도 지나치지 않습니다.

Azure AD는 MFA 기능이 기본 제공되며, 다른 타사 MFA 공급자와 통합됩니다. 글로벌 관리자는 매우 중요한 계정이므로 Azure AD에서 글로벌 관리자 역할이 할당된 모든 사용자에게 무료로 제공됩니다. 그 외의 계정은 이 기능이 포함된 라이선스를 구입하고 계정에 라이선스를 할당하여 MFA를 사용할 수 있습니다.

Contoso Shipping의 경우 드라이버에서 사용하는 모바일 앱을 포함하고 있는 도메인에 연결되지 않은 컴퓨터에서 로그인할 때마다 MFA를 사용하도록 결정합니다.

## <a name="providing-identities-to-services"></a>서비스에 ID 제공

일반적으로 서비스에 ID가 있는 것이 좋습니다. 때때로 모범 사례에 반해, 자격 증명 정보가 구성 파일에 포함됩니다. 이러한 구성 파일과 관련된 보안이 전혀 없기 때문에 시스템 또는 리포지토리에 대한 액세스 권한을 가진 사람이라면 누구든지 자격 증명에 액세스할 수 있게 되어 위험에 노출됩니다.

Azure AD는 Azure 서비스의 서비스 사용자 및 관리 ID라는 두 가지 방법을 통해 이 문제를 해결합니다.

:::row:::
  :::column:::
    ![다양한 역할을 나타내는 이미지](../media/3-service-principals.png)
  :::column-end:::
    :::column span="3"::: **서비스 주체**

서비스 주체를 이해하려면 먼저 ID 관리에 사용되는 **ID**라는 단어와 **주체**라는 단어를 이해하는 것이 좋습니다.

**ID**는 인증 가능한 것을 의미합니다. 당연히 여기에는 사용자 이름 및 암호를 사용하는 사용자가 포함되지만, 비밀 키 또는 인증서를 사용하여 인증되는 응용 프로그램 또는 다른 서버도 포함될 수 있습니다. 추가 정의로, **계정**은 ID와 연결되는 데이터를 말합니다.

**주체**는 특정 역할 또는 클레임을 사용하여 작동하는 ID입니다. 일반적으로 ID와 주체를 동일한 것으로 생각해도 별 무리가 없지만, Linux의 Bash 프롬프트에서 `sudo`를 사용하거나 Windows에서 "관리자 권한으로 실행"을 사용하는 경우를 생각해 봅시다. 두 경우 모두 이전과 같은 ID로 계속 로그인되지만, 실행하는 역할은 바뀌었습니다. 그룹은 권한을 할당받을 수 있으므로 주체로 간주되기도 합니다.

이러한 이유로 **서비스 주체**라는 이름이 붙었습니다. 서비스 주체는 서비스 또는 응용 프로그램에서 사용하는 ID를 말합니다. 다른 ID와 마찬가지로 할당된 역할일 수 있습니다.
  :::column-end:::
:::row-end:::

:::row:::
  :::column:::
    ![관리 ID를 나타내는 이미지](../media/3-managed-service-identities.png)
  :::column-end:::
    :::column span="3"::: **Azure 서비스의 ID 관리**

서비스 주체 만들기는 지루한 과정일 수 있으며 수많은 터치 지점이 있어서 유지 관리가 어려울 수 있습니다. Azure 서비스의 관리 ID는 훨씬 간단하며 대부분의 작업을 자동으로 처리합니다. 

관리 ID는 지원하는 모든 Azure 서비스에 대해 즉시 만들 수 있으며 계속해서 목록에 추가 중입니다. 서비스에 대한 관리 ID를 만들면 Azure AD 테넌트에 계정이 만들어집니다. Azure 인프라는 서비스를 인증하고 계정을 관리하는 작업을 자동으로 처리합니다. 그러면 인증된 서비스가 다른 Azure 리소스에 액세스하도록 안전하게 허용하는 것을 포함하여 해당 계정을 다른 Azure AD 계정처럼 사용할 수 있습니다.
  :::column-end:::
:::row-end:::

## <a name="role-based-access-control"></a>역할 기반 액세스 제어

역할은 “읽기 전용” 또는 “기여자”처럼 Azure 서비스 인스턴스에 액세스하도록 사용자에게 부여될 수 있는 권한 집합입니다. 

ID는 직접 또는 그룹 멤버 자격을 통해 역할에 매핑됩니다. 보안 주체, 액세스 권한 및 리소스를 분리하면 액세스를 쉽게 관리하고 자세히 제어할 수 있습니다. 관리자는 필요한 최소한의 권한이 부여되는지 확인할 수 있습니다.

역할은 개별 서비스 인스턴스 수준에서 부여할 수 있지만, Azure Resource Manager 계층 구조를 따라 아래로 이동할 수 있습니다. 전체 구독과 같이 상위 범위에서 할당된 역할은 서비스 인스턴스와 같은 하위 범위에 상속됩니다. 

<!--TODO: replace with final media which was submitted for Design-for-security-in-azure -->
![관리 그룹](../media/3-role-assignment-scope.png)

:::row:::
  :::column:::
    ![ID 확인을 나타내는 이미지](../media/3-privileged-identity-management.png)
  :::column-end:::
    :::column span="3"::: **Privileged Identity Management**

RBAC(역할 기반 액세스 제어)를 사용한 Azure 리소스 액세스 관리 외에도, 인프라 보호에 대한 포괄적인 접근 방식에서는 조직의 변화와 발전에 따라 역할 멤버를 지속적으로 감사하는 방안을 고려해야 합니다. Azure AD PIM(Privileged Identity Management)은 역할 할당, 셀프 서비스 및 Just-In-Time 역할 활성화를 감독하고 Azure AD 및 Azure 리소스 액세스를 검토할 수 있는 추가 유료 제품입니다.

<!--TODO: replace with final media which was submitted for Design-for-security-in-azure -->
![Privileged Identity Management](../media/PIM_Dashboard.png)

  :::column-end:::
:::row-end:::

## <a name="summary"></a>요약

ID를 사용하면 실제 제어 범위 밖에서도 보안 경계를 유지할 수 있습니다. Single Sign-On 및 적절한 역할 기반 액세스 구성을 사용하면 데이터와 인프라를 보고 조작할 수 있는 사용자를 항상 확인할 수 있습니다.