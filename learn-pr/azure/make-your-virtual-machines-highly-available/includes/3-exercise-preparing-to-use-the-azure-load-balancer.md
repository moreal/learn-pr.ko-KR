이 연습에서는 Azure Portal을 사용하여 부하 분산 장치, 가상 네트워크 및 여러 개의 가상 머신을 만듭니다.

온라인 뱅킹 서비스를 시작하려는 신설 기업인 Woodgrove Bank에서 근무한다고 가정합니다. 이 부문은 경쟁이 치열하므로 99.99% 이상의 서비스 가용성을 보장해야 합니다. 세 개의 가상 머신으로 구성된 풀이 있는 Azure Load Balancer를 통해 이 목표를 달성할 수 있을 것이라고 결정했습니다.

## <a name="create-a-public-load-balancer"></a>공용 부하 분산 장치 만들기

1. 브라우저에서 [Azure Portal](https://portal.azure.com/?azure-portal=true)로 이동하고, 계정에 로그인합니다.

1. 세로 막대에서 **리소스 만들기**를 클릭하고, **새로 만들기** 블레이드에서 **네트워킹**을 클릭한 다음, **부하 분산 장치**를 클릭합니다.

1. [부하 분산 장치 만들기] 블레이드에서 다음 정보를 입력하거나 선택합니다.
    - 이름: **woodgrove LB**
    - 유형: **공용**
    - SKU: **기본**
    - 공용 IP 주소: **새로 만들기**를 선택하고, 텍스트 상자에서 **woodgrove-LB-ip**를 입력하고, [할당]은 **동적**으로 그대로 둡니다.
    - 리소스 그룹: **새로 만들기**를 선택하고, 상자에서 **woodgrove-RG**를 입력합니다.
    - 위치: 사용자에게 가까운 지역을 선택합니다.

1. **만들기**를 클릭합니다.

1. 부하 분산 장치가 배포될 때까지 기다린 후에 연습을 계속 진행하세요.

## <a name="create-a-virtual-network"></a>가상 네트워크 만들기

1. 왼쪽 메뉴에서 **리소스 만들기**를 클릭하고, **새로 만들기** 블레이드에서 **네트워킹**을 클릭한 다음, **가상 네트워크**를 클릭합니다.

1. **가상 네트워크 만들기** 블레이드에서 다음 정보를 입력하거나 선택합니다.
    - 이름: **woodgrove VNET**
    - 주소 공간: **172.20.0.0/16**
    - 리소스 그룹: **기존 항목 사용**, **woodgrove-RG**를 차례로 선택합니다.
    - 서브넷: **backendSubnet**
    - 주소 공간: **172.20.0.0/24**
    - DDoS 보호: **기본**
    - 서비스 엔드포인트: **사용 안 함**

1. **만들기**를 클릭합니다.

1. 가상 네트워크가 배포될 때까지 기다렸다가 연습을 계속 진행합니다.

## <a name="create-a-vm-template"></a>VM 템플릿 만들기

먼저 기본 VM 정보를 정의합니다.

1. Azure Portal의 왼쪽 메뉴에서 **가상 머신**, **가상 머신 만들기**를 차례로 클릭합니다.

1. [계산] 블레이드의 **권장** 섹션에서 **Windows Server**를 클릭합니다.

1. **Windows Server** 블레이드에서 **Windows Server 2016 Datacenter**를 클릭합니다.

1. **Windows Server 2016 Datacenter** 블레이드에서 **만들기**를 클릭합니다.

1. **기본 사항** 블레이드의 **이름** 상자에서 **woodgrove-SVR01**을 입력합니다.

1. **사용자 이름** 및 **암호** 상자에서 이 서버의 관리자 계정에 대한 보안 이름과 암호를 입력합니다.

1. **구독** 상자에서 Azure 구독을 선택합니다.

1. **리소스 그룹** 아래에서 **기존 항목 사용**을 선택한 다음, 목록에서 **woodgrove-RG**를 선택합니다.

1. **위치** 드롭다운 목록에서 사용자에게 가까운 지역을 선택합니다.

1. **확인**을 클릭합니다.

다음과 같이 VM 크기를 선택하고 설정을 구성합니다.

1. **크기 선택** 블레이드에서 **표준** SKU(예: **D2s_v3**)를 선택한 다음, **선택**을 클릭합니다.

1. **설정** 블레이드에서 **가용성 집합**을 클릭합니다.

1. **가용성 집합 변경** 블레이드에서 **새로 만들기**를 클릭합니다.

1. **새로 만들기** 블레이드의 **이름** 상자에서 **woodgrove-AS**를 입력한 다음, **확인**을 클릭합니다.

1. **설정** 블레이드의 **네트워크 보안 그룹** 아래에서 **고급**을 클릭한 다음, 새 항목인 **woodgrove-SVR01-nsg**를 클릭합니다.

1. **네트워크 보안 그룹 만들기** 블레이드의 **이름** 상자에서 이름을 **woodgrove-NSG**로 변경한 다음, **확인**을 클릭합니다.

1. **설정** 블레이드에서 **확인**을 클릭합니다.

여러 VM을 쉽게 배포할 수 있도록 설정을 템플릿에 저장합니다.

1. **만들기** 블레이드에서 **템플릿 및 매개 변수 다운로드**를 클릭합니다.

1. **템플릿** 블레이드에서 **라이브러리에 추가**를 클릭합니다.

1. **템플릿 저장** 블레이드의 **이름** 및 **설명** 상자에서 **woodgrove-server-template**을 입력한 다음, **저장**을 클릭합니다.

> [!NOTE]
> 이 템플릿을 찾으려면 왼쪽 메뉴에서 **모든 서비스**를 클릭하고, 필터 상자에서 **템플릿**을 입력한 다음, **템플릿(미리 보기)** 을 클릭합니다.

## <a name="use-the-template-to-provision-the-first-vm"></a>템플릿을 사용하여 첫 번째 VM 프로비전

1. **템플릿** 블레이드에서 **배포**를 클릭합니다.

1. **사용자 지정 배포** 블레이드의 **리소스 그룹** 아래에서 **기존 항목 사용**을 선택하고, 목록에서 **woodgrove-RG**를 선택합니다.

1. **사용자 지정 배포** 블레이드의 **관리자 암호** 상자에서 이전에 사용한 것과 동일한 암호를 입력합니다.

1. **사용자 지정 배포** 블레이드에서 **사용 약관에 동의합니다.** 확인란을 선택한 다음, **구매**를 클릭합니다(비용은 VM 가격 책정 계층에 따라 달라지는 일반 Azure 계산 요금임).

1. VM이 배포될 때까지 기다린 후에 연습을 계속 진행하세요. 그러면 템플릿을 사용하여 추가 VM을 프로비전하기 전에 해당 템플릿이 올바르게 구성되었는지와 모든 관련 리소스가 만들어졌는지를 확인할 수 있습니다.

## <a name="use-the-template-to-provision-two-additional-vms"></a>템플릿을 사용하여 두 개의 추가 VM 프로비전

1. Azure Portal의 **템플릿** 블레이드에서 **배포**를 클릭합니다.

1. **사용자 지정 배포** 블레이드의 **리소스 그룹** 아래에서 **기존 항목 사용**을 선택하고, 목록에서 **woodgrove-RG**를 선택합니다.

1. **사용자 지정 배포** 블레이드의 **Virtual Machine 이름** 상자에서 이름을 **woodgrove-SVR02**로 변경합니다.

1. **사용자 지정 배포** 블레이드의 **네트워크 인터페이스 이름** 상자에서 이름을 **woodgrovesvr02222**로 변경합니다.

1. **사용자 지정 배포** 블레이드의 **관리자 암호** 상자에서 이전에 사용한 것과 동일한 암호를 입력합니다.

1. **사용자 지정 배포** 블레이드의 **공용 IP 주소 이름** 상자에서 이름을 **woodgrove-SVR02-ip**로 변경합니다.

1. **사용자 지정 배포** 블레이드에서 **사용 약관에 동의합니다.** 확인란을 선택한 다음, **구매**를 클릭합니다(비용은 VM 가격 책정 계층에 따라 달라지는 일반 Azure 계산 요금임).

1. 다음 정보를 사용하여 1-7단계를 반복합니다.
    - Virtual Machine 이름: **woodgrove SVR03**
    - 네트워크 인터페이스 이름: **woodgrovesvr03333**
    - 공용 IP 주소 이름: **woodgrove-SVRr03-ip**

1. VM이 배포될 때까지 기다린 후에 연습을 계속 진행하세요.

이제 공용 부하 분산 장치를 구성하고 이 부하 분산 장치에서 세 개의 VM을 사용할 준비가 되었습니다.