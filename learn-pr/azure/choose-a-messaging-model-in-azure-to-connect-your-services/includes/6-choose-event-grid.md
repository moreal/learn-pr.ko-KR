대부분의 응용 프로그램은 이벤트를 사용하여 문제가 발생하거나 일부 개체가 변경되었음을 배포 구성 요소에 알립니다. Event Grid를 사용하여 Azure를 통해 이러한 이벤트를 쉽게 배포할 수 있습니다.

Azure에서 실행되는 웹 API가 있는 음악 공유 응용 프로그램이 있다고 가정합니다. 사용자가 새 사운드 파일을 업로드하면 전 세계 사용자 장치에 설치된 모든 모바일 앱에 알려야 합니다.

Azure Event Grid에 대한 구독을 사용하여 이 작업을 안정적으로 신속하게 수행할 수 있습니다.

## <a name="what-is-event-grid"></a>Event Grid란?

Azure Event Grid는 Azure Blob Storage 계정 또는 Media Services와 같은 원본에서 Azure Functions 또는 웹후크와 같은 구독자로 이벤트를 배포하는 서비스입니다.

이벤트 원본은 이벤트를 생성할 수 있는 모든 구성 요소입니다. 예를 들어 사용자가 새 미디어 파일을 Blob Storage 계정에 추가할 수 있습니다. 그러면 Event Grid가 배포할 수 있는 이벤트가 생성됩니다.

이벤트 구독자는 Event Grid에서 이벤트를 수신할 수 있는 모든 구성 요소입니다. 예를 들어 Azure 함수는 Blob Storage 계정의 새 미디어 파일에 응답하는 코드를 실행할 수 있습니다.

Event Grid를 사용하면 원본을 여러 구독자에게 쉽게 연결할 수 있습니다.

![Event Grid 원본 및 구독자](../images/6-event-grid.png)

## <a name="event-sources"></a>이벤트 원본

이벤트를 생성할 수 있는 Azure 리소스 형식은 다음과 같습니다.

- **Azure 구독 및 리소스 그룹.** 구독 및 리소스 그룹은 Azure에서 관리 작업에 관련된 이벤트를 생성합니다. 예를 들어 사용자가 VM(가상 머신)을 만들 때 이 원본은 이벤트를 생성합니다.
- **Storage 계정.** Storage 계정은 사용자가 Blob, 파일, 표 항목 또는 큐 메시지를 추가할 때 이벤트를 생성할 수 있습니다. Blob 계정과 범용 계정을 둘 다 이벤트 원본으로 사용할 수 있습니다.
- **Media Services.** Media Services는 비디오 및 오디오 미디어를 호스트하고 미디어 파일에 대한 고급 관리 기능을 제공합니다. Media Services는 비디오 파일에서 인코딩 작업이 시작되거나 완료될 때 이벤트를 생성할 수 있습니다.
- **IoT Hub.** Azure IoT(사물 인터넷) Hub는 IoT 장치와 통신하고 IoT 장치에서 원격 분석을 수집합니다. 해당 통신이 도착할 때마다 이벤트를 생성할 수 있습니다.
- **사용자 지정 이벤트.** 사용자 지정 이벤트는 REST API 또는 Java, GO, .NET, Node, Python 및 Ruby용 Azure SDK를 사용하여 생성할 수 있습니다. 예를 들어 저장소 큐에서 메시지를 선택할 때 Azure Web App 작업자 역할로 사용자 지정 이벤트를 만들 수 있습니다.

Azure 내의 다양한 이벤트 원본과 이렇게 광범위하게 통합하면 Event Grid가 거의 모든 Azure 리소스에 관련된 이벤트를 배포할 수 있습니다.

## <a name="topics"></a>토픽

Azure Event Grid에서 토픽은 관련 이벤트의 컬렉션입니다. 원본에서 이벤트를 게시할 때 해당 이벤트에 단일 토픽만 필요한지 또는 여러 토픽으로 나누어야 하는지 결정합니다. 이벤트를 수신하고 처리하는 구성 요소는 수신할 이벤트를 결정하기 위해 토픽을 구독합니다.

## <a name="subscriptions"></a>구독

이벤트 처리기는 구독을 사용하여 수신할 토픽의 이벤트를 Event Grid에 알립니다. 또한 구독은 엔드포인트를 수정합니다. Event Grid가 이 위치에 이벤트 알림을 보냅니다. 구독은 해당 형식 또는 해당 제목별로 이벤트를 필터링할 수 있으므로 이벤트 처리기가 관련 이벤트만 수신하는지 확인할 수 있습니다.

## <a name="event-handlers"></a>이벤트 처리기

Azure의 다음 개체 형식은 Event Grid에서 이벤트를 수신하고 처리할 수 있습니다.

- **Azure Functions.** Azure 함수는 호스트 가상 서버나 컨테이너 없이 Azure에서 실행되는 사용자 지정 코드로 구성됩니다. 이벤트에 대한 사용자 지정 응답을 코딩하려는 경우 Azure 함수를 이벤트 처리기로 사용합니다.
- **WebHooks.** WebHook는 푸시 아키텍처를 구현하는 웹 API입니다.
- **Logic Apps.** Azure Logic App은 비즈니스 프로세스를 워크플로로 호스트합니다.
- **Microsoft Flow.** Flow 역시 워크플로를 호스트하지만 비기술 직원이 더욱 쉽게 사용할 수 있습니다.

## <a name="how-to-choose"></a>선택 방법

다음 기능이 필요한 경우 Event Grid를 사용합니다.

- **단순성.** 원본을 Event Grid의 구독자에게 쉽게 연결할 수 있습니다.
- **고급 필터링.** 구독은 토픽에서 수신하는 이벤트를 엄격하게 제어합니다.
- **팬아웃.** 동일한 이벤트 및 토픽에 무제한의 엔드포인트를 가입시킬 수 있습니다.
- **안정성** Event Grid는 최대 24시간 동안 각 구독에 대한 이벤트 전달을 다시 시도합니다.
- **이벤트별 요금** 전송하는 이벤트 수에 대한 요금만 지급합니다.

## <a name="summary"></a>요약

Event Grid는 단순하지만 유연한 이벤트 배포 시스템입니다. 이를 사용하여 구독자에게 이벤트를 게시하면 구독자가 해당 이벤트를 안정적이고 신속하게 수신할 수 있습니다.