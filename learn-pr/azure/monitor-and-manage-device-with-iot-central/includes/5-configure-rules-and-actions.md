지금까지 커피 머신을 Azure IoT Central 응용 프로그램에 연결하여 데이터를 교환하여 커피 머신을 관리하고 모니터링할 수 있게 되었습니다. 이 단원에서는 커피 머신의 수온이 정상 범위를 벗어나는 경우 작업을 트리거하는 규칙을 만듭니다. 

## <a name="create-rules-in-iot-central-with-email-as-the-action"></a>이메일을 보내는 작업을 추가하여 IoT Central에서 규칙 만들기

Azure IoT Central에는 알림을 전송하기 위한 기본적인 메일 기능이 있습니다. 이 시나리오에서는 최적 온도 범위를 벗어나는 커피 머신이 보증을 통해 보호되지 않는 경우 IoT Central에서 고객의 유지 관리 부서로 이메일이 전송됩니다.

1. 이 단위에서는 연습에 대한 **규칙** 페이지로 이동하고 오른쪽에서 **템플릿 편집**을 선택하여 편집 모드로 전환합니다. 
1. **+ 새 규칙 만들기**, **원격 분석**을 차례로 선택합니다. 

1. `Coffee Maker Water Too Cold (Expired)`의 이름을 입력합니다.

1. **조건**의 오른쪽에 더하기(**+**) 기호를 선택하여 다음과 같은 조건을 규칙에 추가한 다음, **저장**을 클릭합니다.      
    - 수온이 커피 메이커 최소 온도보다 낮음
    - 장치 보증 만료 = 1

    ![규칙 사용](../media/5-flow-a.png)

1. **원격 분석 규칙 구성** 패널에서 아래로 스크롤하여 **작업** 옆에 있는 **+** 를 선택한 다음, **이메일**을 선택합니다.

1. IoT Central 응용 프로그램에 로그인하는 데 사용한 이메일 주소를 입력하고 다음 메모를 추가합니다. `Coffee maker's water is too cold. Maintenance is required.  Warranty has expired.`

1. **저장**을 선택합니다. **규칙** 페이지에 규칙이 나열됩니다.

이제 물이 뜨거운 경우 이 단계를 반복하겠습니다. 

1. **+ 새 규칙 만들기**, **원격 분석**을 차례로 선택합니다.

1. 새 규칙을 추가하고 이름을 `Coffee Maker Water Too Hot (Expired)`으로 지정합니다.

1. **조건**의 오른쪽에 더하기(**+**) 기호를 선택하여 다음과 같은 조건을 규칙에 추가한 다음, **저장**을 클릭합니다.      
    - 수온이 커피 메이커 최대 온도보다 높음
    - 장치 보증 만료 = 1

1. **원격 분석 규칙 구성** 패널에서 아래로 스크롤하여 **작업** 옆에 있는 **+** 를 선택한 다음, **이메일**을 선택합니다.

1. IoT Central 응용 프로그램에 로그인하는 데 사용한 이메일 주소를 입력하고 다음 메모를 추가합니다. `Coffee maker's water is too cold. Maintenance is required.  Warranty has expired.`

1. **저장**을 선택합니다. **규칙** 페이지에 규칙이 나열됩니다.

규칙을 트리거하려면 **속성**에서 지정한 범위를 벗어나는 최적 온도를 **설정**에서 지정합니다. 유효성 검사를 완료하면 받은 편지함에 이메일이 너무 많이 수신되지 않도록 규칙을 해제합니다.