앞에서 **Azure Load Balancer**를 통해 고가용성을 달성하고 가동 중지 시간을 최소화하는 방법을 살펴보았습니다.

전자 상거래 사이트의 가용성은 높지만 대기 시간 문제를 해결하거나 지리적 지역에서 복원력을 만드는 것은 아닙니다.

유럽이나 아시아 지역의 사용자가 미국에 있는 사이트를 더 빨리 로드하려면 어떻게 해야 할까요?

## <a name="what-is-network-latency"></a>네트워크 대기 시간이란?

_대기 시간_은 데이터가 네트워크를 통해 이동하는 데 걸리는 시간을 나타냅니다. 대기 시간은 일반적으로 밀리초 단위로 측정됩니다.

대기 시간은 대역폭과 비교됩니다. 대역폭은 연결에 적합할 수 있는 데이터의 양을 나타냅니다. 대기 시간은 해당 데이터가 대상에 도달하는 데 걸리는 시간을 나타냅니다.

사용하는 연결 형식 및 응용 프로그램 디자인 방법과 같은 요인은 대기 시간에 영향을 줄 수 있습니다. 그러나 아마도 가장 큰 요인은 거리입니다.

미국 동부 지역에 있는 Azure의 전자 상거래 사이트를 생각해 보세요. 일반적으로 데이터를 애틀란타(약 400마일 거리)로 전송하는 데 걸리는 시간은 데이터를 런던(약 4,000마일 거리)으로 전송하는 데 걸리는 시간보다 짧습니다.

전자 상거래 사이트에서는 표준 HTML, CSS, JavaScript 및 이미지를 제공합니다. 많은 파일에 대한 네트워크 대기 시간은 늘어날 수 있습니다. 지리적으로 멀리 떨어져 있는 사용자가 대기 시간을 줄이려면 어떻게 해야 할까요?

## <a name="scale-out-to-different-regions"></a>다른 지역으로 확장

Azure는 전 세계의 여러 지역에 데이터 센터를 제공하고 있습니다.

데이터 센터를 구축하는 데 드는 비용을 생각해 보세요. 장비 비용만이 유일한 요인은 아닙니다. 전원, 냉각 장치 및 직원을 제공하여 각 위치에서 시스템이 실행되도록 유지해야 합니다. 전체 데이터 센터를 복제하는 것은 엄청나게 많은 비용이 들 수 있습니다. 그러나 Azure에는 이미 장비와 직원이 갖추어져 있으므로 Azure를 사용하여 이렇게 복제하면 훨씬 많은 비용을 절감할 수 있습니다.

대기 시간을 줄이는 한 가지 방법은 둘 이상의 지역에서 서비스의 정확한 복사본을 제공하는 것입니다. 다이어그램은 다음과 같습니다.

![미국 동부, 북유럽, 동아시아 지역에서 실행되는 전자 상거래 사이트](../media-draft/global-deployment.png)

다이어그램에서는 Azure 3개 지역(미국 동부, 북유럽 및 동아시아)에서 실행되는 전자 상거래 사이트를 보여 줍니다. 각각에 대한 DNS 이름을 확인합니다. 지리적으로 가장 가까운 서비스에 사용자를 연결하려면 어떻게 해야 할까요?

## <a name="use-traffic-manager-to-route-users-to-the-closest-endpoint"></a>Traffic Manager를 사용하여 사용자를 가장 가까운 엔드포인트로 라우팅

한 가지 대답은 **Traffic Manager**입니다. Traffic Manager는 사용자에게 가장 가까운 DNS 서버를 사용하여 사용자 트래픽을 전역적으로 분산된 엔드포인트로 보냅니다. 다이어그램은 다음과 같습니다.

![Traffic Manager를 사용하여 이탈리아 사용자를 가장 가까운 엔드포인트로 이동](../media-draft/traffic-manager.png)

Traffic Manager는 클라이언트와 서버 간에 전달되는 트래픽을 확인하지 않습니다. 대신 클라이언트 웹 브라우저를 기본 설정 엔드포인트로 보냅니다. Traffic Manager는 대기 시간이 가장 짧은 엔드포인트와 같이 몇 가지 다른 방법으로 트래픽을 라우팅할 수 있습니다.

여기에 표시되지 않았지만 이 설정에는 캘리포니아에서 실행되는 온-프레미스 배포가 포함되었을 수도 있습니다. Traffic Manager를 사용자 고유의 온-프레미스 네트워크에 연결하여 기존 데이터 센터 투자를 유지할 수 있도록 합니다. 또는 응용 프로그램을 완전히 클라우드로 이동할 수 있습니다. 선택은 사용자의 몫입니다.

## <a name="compare-azure-load-balancer-to-traffic-manager"></a>Azure Load Balancer와 Traffic Manager 비교

Azure Load Balancer는 동일한 지역 내의 트래픽을 분산시켜 서비스의 가용성과 복원력을 향상시킵니다. Traffic Manager는 DNS 수준에서 작동하며 클라이언트를 기본 설정 엔드포인트로 보냅니다. 이 엔드포인트는 사용자에게 가장 가까운 지역일 수 있습니다.

Azure Load Balancer와 Traffic Manager는 모두 서비스의 복원력을 약간 다른 방식으로 향상시킵니다. Azure Load Balancer는 응답하지 않는 VM을 검색하면 트래픽을 풀의 다른 VM으로 보냅니다. Traffic Manager는 엔드포인트의 상태를 모니터링합니다. 반면, Traffic Manager는 응답하지 않는 엔드포인트를 검색하면 트래픽을 응답하는 가장 가까운 다음 엔드포인트로 보냅니다.

## <a name="summary"></a>요약

지리적인 거리는 대기 시간에 영향을 주는 가장 큰 요인 중 하나입니다. Traffic Manager를 사용하면 여러 지리적 지역에서 서비스의 정확한 복사본을 호스팅할 수 있습니다. 미국, 유럽 및 아시아 지역의 사용자는 모두 이런 방식으로 전자 상거래 사이트를 이용하는 좋은 경험을 할 수 있습니다.
