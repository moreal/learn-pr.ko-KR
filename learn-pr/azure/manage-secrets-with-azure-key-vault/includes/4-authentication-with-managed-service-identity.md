<span data-ttu-id="af86a-101">Azure Key Vault는 **Azure Active Directory**를 사용하여 자격 증명 모음에 액세스하려는 사용자 및 응용 프로그램을 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-101">Azure Key Vault uses **Azure Active Directory** to authenticate users and applications that try to access a vault.</span></span> <span data-ttu-id="af86a-102">자격 증명 모음에 대한 액세스 권한을 웹 응용 프로그램에 부여하려면 먼저 Azure Active Directory에 앱을 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-102">To grant our web application access to the vault, we first need to register our app with Azure Active Directory.</span></span> <span data-ttu-id="af86a-103">등록하면 앱에 대한 ID가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-103">Registering creates an identity for the app.</span></span> <span data-ttu-id="af86a-104">ID가 생성되고 나면 자격 증명 모음 권한을 이 ID에 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-104">Once we have an identity, we can assign vault permissions to it.</span></span>

<span data-ttu-id="af86a-105">앱 및 사용자는 Azure Active Directory 인증 토큰을 사용하여 Key Vault에 인증됩니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-105">Apps and users authenticate to Key Vault using an Azure Active Directory authentication token.</span></span> <span data-ttu-id="af86a-106">토큰을 가진 임의의 사용자가 응용 프로그램 ID를 사용해 자격 증명 모음의 모든 비밀에 액세스할 수 있기 때문에, Azure Active Directory에서 토큰을 가져오려면 비밀 또는 인증서가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-106">Getting a token from Azure Active Directory requires a secret or certificate, because anyone with a token could use the application identity to access all of the secrets in the vault.</span></span>

<span data-ttu-id="af86a-107">응용 프로그램 비밀은 자격 증명 모음에 안전하게 보관되지만, 이 비밀에 액세스하려면 자격 증명 모음 외부에 비밀 또는 인증서를 유지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-107">Our application secrets are secure in the vault, but we still need to keep a secret or certificate outside of the vault in order to access them!</span></span> <span data-ttu-id="af86a-108">이 문제를 ‘부트스트랩 문제’라고 하며, Azure에는 이에 대한 해결책이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-108">This problem is called the *bootstrapping problem*, and Azure has a solution for it.</span></span>

## <a name="managed-service-identity"></a><span data-ttu-id="af86a-109">관리되는 서비스 ID</span><span class="sxs-lookup"><span data-stu-id="af86a-109">Managed Service Identity</span></span>

<span data-ttu-id="af86a-110">MSI(관리 서비스 ID)는 비밀을 하나도 관리하지 않고도 앱이 Key Vault 및 다른 Azure 서비스에 액세스하는 데 사용할 수 있는 Azure App Service의 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-110">*Managed Service Identity* (MSI) is a feature of Azure App Service that your app can use to access Key Vault and other Azure services without having to manage even a single secret.</span></span> <span data-ttu-id="af86a-111">MSI를 사용하는 것은 비밀을 직접 관리하는 것보다 더 단순하고 안전합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-111">Using MSI is simpler and more secure than managing a secret yourself.</span></span>

<span data-ttu-id="af86a-112">MSI를 사용하면 Azure는 앱에서 사용할 특정 용도로 별도의 토큰 부여 REST 서비스를 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-112">When you enable MSI, Azure activates a separate token-granting REST service specifically for use by your app.</span></span> <span data-ttu-id="af86a-113">앱이 MSI 토큰 서비스에 토큰을 요청하면, 이 서비스는 Azure Active Directory에 연결해 MSI ID의 토큰을 가져오고 이를 Key Vault에 사용할 수 있도록 다시 앱에 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-113">When your app requests a token from the MSI token service, the service contacts Azure Active Directory to get a token for the MSI identity and hands it back to your app for use with Key Vault.</span></span> <span data-ttu-id="af86a-114">이 워크플로의 가장 중요한 부분은 앱이 MSI 토큰 서비스에 인증되는 방식입니다. 즉, 구성에서 관리해야 하는 비밀이나 인증서를 요구하는 대신, 앱에서는 Azure가 시작될 때 환경 변수에 안전하게 주입한 비밀을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-114">The most important part of this workflow is the way that your app authenticates to the MSI token service &mdash; instead of requiring a secret or certificate you need to manage in your configuration, your app uses a secret that Azure securely injects into its environment variables when it starts up.</span></span> <span data-ttu-id="af86a-115">이 비밀 값을 관리하거나 어딘가에 저장할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-115">You don't need to manage or store this secret value anywhere.</span></span> <span data-ttu-id="af86a-116">앱 외부의 어떤 것도 이 비밀 또는 MSI 토큰 서비스 엔드포인트에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-116">Nothing outside of your app can access this secret or the MSI token service endpoint.</span></span>

<span data-ttu-id="af86a-117">또한 MSI는 Azure Active Directory에 앱을 등록합니다. MSI를 사용하지 않도록 설정하거나 앱을 삭제하는 경우, MSI는 이 등록을 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-117">MSI also registers your app in Azure Active Directory for you, and will delete the registration if you disable MSI or delete the app.</span></span>

<span data-ttu-id="af86a-118">MSI는 Azure 구독에 포함된 체험 버전을 비롯하여 모든 버전의 Azure Active Directory에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-118">MSI is available in all editions of Azure Active Directory, including the Free edition included with an Azure subscription.</span></span> <span data-ttu-id="af86a-119">App Service에서 MSI를 사용하는 경우 추가 비용이 없고 구성이 필요 없으며 언제든지 앱에서 사용하거나 사용 중지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-119">Using it in App Service has no extra cost and requires no configuration, and it can be enabled or disabled on an app at any time.</span></span>

> [!NOTE]
> <span data-ttu-id="af86a-120">MSI는 현재 Linux 또는 컨테이너 웹앱에 대해 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-120">MSI is not currently supported for Linux or Container web apps.</span></span>

<span data-ttu-id="af86a-121">MSI를 사용하려면 구성 없이 단일 Azure CLI 명령만 있으면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-121">Enabling MSI requires only a single Azure CLI command with no configuration.</span></span> <span data-ttu-id="af86a-122">5단원에서 App Service 앱을 설정하고 Azure에 배포할 때 수행하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-122">We'll do it in unit 5 when we set up an App Service app and deploy to Azure.</span></span> <span data-ttu-id="af86a-123">하지만 그전에 MSI에 대한 지식을 적용하여 앱의 코드를 쓰겠습니다.</span><span class="sxs-lookup"><span data-stu-id="af86a-123">Before that, though, we're going to apply our knowledge of MSI to write the code for our app.</span></span>