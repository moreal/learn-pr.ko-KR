<span data-ttu-id="f8be6-101">Azure Key Vault는 **Azure Active Directory**를 사용하여 자격 증명 모음에 액세스하려는 사용자 및 응용 프로그램을 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-101">Azure Key Vault uses **Azure Active Directory** to authenticate users and applications that try to access a vault.</span></span> <span data-ttu-id="f8be6-102">자격 증명 모음에 대한 액세스 권한을 웹 응용 프로그램에 부여하려면 먼저 Azure Active Directory에 앱을 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-102">To grant our web application access to the vault, we first need to register our app with Azure Active Directory.</span></span> <span data-ttu-id="f8be6-103">등록하면 앱에 대한 ID가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-103">Registering creates an identity for the app.</span></span> <span data-ttu-id="f8be6-104">앱에 ID가 생성되고 나면 자격 증명 모음 권한을 이 ID에 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-104">Once the app has an identity, we can assign vault permissions to it.</span></span>

<span data-ttu-id="f8be6-105">앱 및 사용자는 Azure Active Directory 인증 토큰을 사용하여 Key Vault에 인증됩니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-105">Apps and users authenticate to Key Vault using an Azure Active Directory authentication token.</span></span> <span data-ttu-id="f8be6-106">토큰을 가진 임의의 사용자가 응용 프로그램 ID를 사용해 자격 증명 모음의 모든 비밀에 액세스할 수 있기 때문에, Azure Active Directory에서 토큰을 가져오려면 비밀 또는 인증서가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-106">Getting a token from Azure Active Directory requires a secret or certificate, because anyone with a token could use the application identity to access all of the secrets in the vault.</span></span>

<span data-ttu-id="f8be6-107">응용 프로그램 비밀은 자격 증명 모음에 안전하게 보관되지만, 이 비밀에 액세스하려면 자격 증명 모음 외부에 비밀 또는 인증서를 유지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-107">Our application secrets are secure in the vault, but we still need to keep a secret or certificate outside of the vault in order to access them!</span></span> <span data-ttu-id="f8be6-108">이 문제를 *부트스트랩 문제*라고 하며, Azure에는 이에 대한 해결책이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-108">This problem is called the *bootstrapping problem*, and Azure has a solution for it.</span></span>

## <a name="managed-identities-for-azure-resources"></a><span data-ttu-id="f8be6-109">Azure 리소스에 대한 관리 ID</span><span class="sxs-lookup"><span data-stu-id="f8be6-109">Managed identities for Azure resources</span></span>

<span data-ttu-id="f8be6-110">Azure 리소스에 대한 관리 ID는 자격 증명 모음 외부에서 비밀을 하나도 관리하지 않고도 앱이 Key Vault 및 다른 Azure 서비스에 액세스하는 데 사용할 수 있는 Azure App Service의 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-110">Managed identities for Azure resources is an Azure feature that your app can use to access Key Vault and other Azure services without having to manage even a single secret outside of the vault.</span></span> <span data-ttu-id="f8be6-111">관리 ID를 사용하는 것은 웹앱에서 Key Vault를 활용할 수 있는 간단하고 안전한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-111">Using a managed identity is a simple and secure way to take advantage of Key Vault from your web app.</span></span>

<span data-ttu-id="f8be6-112">웹앱에서 관리 ID를 사용하면 Azure는 앱에서 사용할 용도로 별도의 토큰 부여 REST 서비스를 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-112">When you enable managed identity on your web app, Azure activates a separate token-granting REST service specifically for use by your app.</span></span> <span data-ttu-id="f8be6-113">앱은 Azure Active Directory에서 직접 토큰을 요청하는 대신 이 서비스에서 토큰을 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-113">Your app will request tokens from this service instead of directly from Azure Active Directory.</span></span> <span data-ttu-id="f8be6-114">앱이 이 서비스에 액세스하려면 비밀을 사용해야 하지만, 해당 비밀은 앱 시작 시 App Service에 의해 앱의 환경 변수에 삽입됩니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-114">Your app needs to use a secret to access this service, but that secret is injected into your app's environment variables by App Service when it starts up.</span></span> <span data-ttu-id="f8be6-115">이 비밀 값을 관리하거나 어딘가에 저장할 필요가 없고 앱 외부의 어떤 것도 이 비밀 또는 관리 ID 토큰 서비스 엔드포인트에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-115">You don't need to manage or store this secret value anywhere, and nothing outside of your app can access this secret or the managed identity token service endpoint.</span></span>

<span data-ttu-id="f8be6-116">또한 Azure 리소스에 대한 관리 ID는 앱을 자동으로 Azure Active Directory에 등록하고, 사용자가 웹앱을 삭제하거나 관리 ID를 해제하면 등록을 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-116">Managed identities for Azure resources also registers your app in Azure Active Directory for you, and will delete the registration if you delete the web app or disable its managed identity.</span></span>

<span data-ttu-id="f8be6-117">관리 ID는 Azure 구독에 포함된 체험 버전을 비롯하여 모든 버전의 Azure Active Directory에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-117">Managed identities are available in all editions of Azure Active Directory, including the Free edition included with an Azure subscription.</span></span> <span data-ttu-id="f8be6-118">App Service에서 관리 ID를 사용하는 경우 추가 비용이 없고 구성이 필요 없으며 언제든지 앱에서 사용하거나 사용 중지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-118">Using it in App Service has no extra cost and requires no configuration, and it can be enabled or disabled on an app at any time.</span></span>

> [!NOTE]
> <span data-ttu-id="f8be6-119">Azure 리소스에 대한 관리 ID는 현재 Linux 또는 컨테이너 웹앱에서 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-119">Managed identities for Azure resources is not currently supported for Linux or Container web apps.</span></span>

<span data-ttu-id="f8be6-120">웹앱에 관리 ID를 사용하려면 구성 없이 단일 Azure CLI 명령만 있으면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-120">Enabling a managed identity for a web app requires only a single Azure CLI command with no configuration.</span></span> <span data-ttu-id="f8be6-121">이 작업은 뒷부분에서 App Service 앱을 설정하고 Azure에 배포할 때 수행하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-121">We'll do it later on when we set up an App Service app and deploy to Azure.</span></span> <span data-ttu-id="f8be6-122">그전에, 관리 ID에 대한 지식을 적용하여 앱의 코드를 작성하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f8be6-122">Before that, though, we're going to apply our knowledge of managed identities to write the code for our app.</span></span>