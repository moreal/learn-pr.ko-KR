데이터 분석 회사의 네트워크 관리자는 Azure의 가상 머신에 연결하여 가상 머신이 제대로 구성되어 있는지 확인해야 합니다. 이러한 작업은 원격 데스크톱 프로토콜 클라이언트로 VM의 Windows 데스크톱 UI에 연결하여 수행합니다.

## <a name="what-is-the-remote-desktop-protocol"></a>원격 데스크톱 프로토콜이란 무엇인가요?

RDP(원격 데스크톱 프로토콜)는 Windows 기반 컴퓨터의 UI에 대한 원격 연결을 제공합니다. RDP를 사용하면 물리적 또는 가상 Windows 컴퓨터에 원격으로 로그인하여 마치 콘솔에서 작업하는 것처럼 해당 컴퓨터를 제어할 수 있습니다.

> [!Note]
> Windows Server 2016 및 Windows 10의 Windows Hyper-V는 RDP를 사용하여 하이퍼바이저에서 실행 중인 가상 머신에 연결합니다.

RDP 연결을 사용하면 일부 전원 및 하드웨어 관련 기능을 제외하고는 물리적 컴퓨터의 콘솔에서 수행할 수 있는 작업을 대부분 수행할 수 있습니다.

RDP 연결에는 RDP 클라이언트가 필요합니다. Microsoft는 다음 운영 체제에 대해 RDP 클라이언트를 제공합니다.

* Windows
* iOS
* MacOS
* Android

Ubuntu 배포에서 Windows PC에 연결할 수 있도록 해주는 Remmina 같은 오픈 소스 Linux 클라이언트도 있습니다.

Windows 10에는 RDP 클라이언트가 포함되어 있습니다.

![Windows RDP 클라이언트](../images/2-rdp-client.PNG)

## <a name="what-functionality-does-an-rdp-connection-support"></a>RDP 연결에서 지원하는 기능은 무엇인가요?

RDP 연결을 사용하면 UI를 조작할 수 있습니다. 그러나 원격 컴퓨터의 다른 서비스에 연결할 수도 있습니다. 이러한 서비스에는 다음이 포함됩니다.

* 프린터 연결 - 원격 컴퓨터가 사용자의 로컬 인쇄 장치로 인쇄할 수 있습니다.
* 오디오 재생 - 오디오를 로컬 컴퓨터 또는 원격 장치에서 재생할 수 있습니다.
* 오디오 녹음 - 로컬 컴퓨터에서 오디오를 녹음하고 해당 소리를 원격 장치로 보낼 수 있습니다.
* 포트 - 로컬 컴퓨터의 포트로 리디렉션할 수 있습니다.
* 드라이브 - 매핑된 네트워크 드라이브를 비롯한 드라이브가 원격 컴퓨터에 연결된 상태로 표시됩니다.
* 비디오 캡처 장치 - 통합 웹캠 등이 있습니다.
* 기타 지원되는 플러그 앤 플레이 장치.

해당 플랫폼에서 사용할 수 있는 물리적 자산에 대한 제한이 있으므로 이러한 기능 중 일부는 Azure에서 지원되지 않습니다. 예를 들어 소프트웨어 프린터만 Azure에서 호스트된 VM의 RDP 연결에서 연결 클라이언트의 인쇄 장치로 리디렉션될 수 있습니다.

## <a name="configure-network-settings-for-rdp-access-to-virtual-machines"></a>가상 머신에 대한 RDP 액세스를 위한 네트워크 설정 구성

Azure VM에 대한 연결을 설정하는 방법은 다음 세 가지입니다.

1. VM의 공용 IP 주소로 직접 설정합니다.
2. VPN(가상 사설망) 연결을 통해 설정합니다.
3. ExpressRoute 연결을 통해 설정합니다.

공용 IP 주소는 영구적으로 할당될 수도 있고 동적일 수도 있습니다. 포트 3389(RDP)에서 VM의 공용 주소에 액세스할 수 있는지도 확인해야 합니다. 이 프로비전에서는 조직의 방화벽 보안을 관리하는 팀과 협의하여 포트 3389에서 해당 VM의 공용 IP 주소에 대한 규칙을 설정해야 할 수도 있습니다.

동적 공용 IP 주소는 VM이 다시 시작될 때마다 다시 할당됩니다. 정적 주소는 영구적이지만 비용이 더 많이 듭니다.

VPN을 통해 연결하려면 로컬 네트워크에 Microsoft Azure에 대한 활성 VPN 연결이 있어야 합니다.

ExpressRoute 연결 방식은 VM에 대한 연결을 관리합니다. 이 방식은 또한 대기 시간은 가장 짧고 대역폭 연결은 가장 높습니다.

> [!Note]
> Azure에 연결하는 데 사용하는 옵션과 관계없이 일반적으로 기본 포트 3389에서 RDP를 통해 가상 머신에 액세스할 수 있는지 확인해야 합니다. 자체 클라이언트 IP 주소에서만 VM에 액세스할 수 있도록 VM을 구성할 수 있습니다. 공용 IP 주소에서 포트 3389를 통해 VM에 연결하는 방법은 테스트 환경에서만 사용하는 것이 좋습니다. 프로덕션 환경에서는 두 번째 또는 세 번째 옵션을 사용하세요.

## <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a>Azure에서 RDP를 사용하여 VM에 연결하는 방법은 무엇인가요?

Azure에서 RDP를 사용하여 VM에 연결하는 작업은 간단한 프로세스입니다. Azure Portal에서 VM 속성으로 이동하여 맨 위에 있는 **연결**을 클릭합니다. 이렇게 하면 사전 구성된 .RDP 파일을 다운로드하며 Windows는 해당 파일을 RDP 클라이언트에서 엽니다. RDP 파일에서 VM의 공용 IP 주소를 통해 연결하도록 선택할 수 있습니다. VPN 또는 ExpressRoute를 통해 연결하는 경우에는 내부 IP 주소를 선택할 수 있습니다. 연결할 포트 번호도 선택할 수 있습니다.

VM의 정적 공용 IP 주소를 사용하는 경우 .RDP 파일을 데스크톱에 저장할 수 있습니다. 동적 IP 주소를 사용하는 경우에는 VM이 실행 중인 동안에만 .RDP 파일이 유효합니다. VM을 중지했다가 다시 시작하는 경우 다른 .RDP 파일을 다운로드해야 합니다.

> [!Note]
> VM의 공용 IP 주소를 Windows RDP 클라이언트에 입력하고 **연결**을 클릭할 수도 있습니다.

연결하는 경우 일반적으로 두 개의 경고를 받게 됩니다. 다음과 같습니다.

* 게시자 경고 - 공개적으로 서명되지 않은 .RDP 파일 때문에 발생합니다.
* 인증서 경고 - 신뢰할 수 없는 머신 인증서 때문에 발생합니다.

테스트 환경에서는 이러한 경고를 무시할 수 있습니다. 프로덕션 환경에서는 RDPSIGN.EXE를 사용하여 .RDP 파일에 서명하고 클라이언트의 **신뢰할 수 있는 루트 인증 기관** 저장소에 머신 인증서를 배치할 수 있습니다.

## <a name="summary"></a>요약

이제 RDP를 사용하여 Windows VM에 연결할 수 있습니다. 다음 연습에서는 RDP를 사용하여 VM에 연결한 후에 해당 컴퓨터에 서버 역할을 설치합니다.
