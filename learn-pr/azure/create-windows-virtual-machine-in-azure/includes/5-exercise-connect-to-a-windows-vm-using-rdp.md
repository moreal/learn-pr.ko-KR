Windows VM을 배포하여 실행하고 있지만 작업을 수행하도록 구성되어 있지 않습니다.

해당 시나리오는 비디오 처리 시스템입니다. 해당 플랫폼은 FTP를 통해 파일을 받습니다. 교통 카메라는 서버의 폴더에 매핑되는 알려진 URL에 비디오 클립을 업로드합니다. 각 Windows VM에서 사용자 지정 소프트웨어는 서비스로 실행되며, 폴더를 감시하고, 각 업로드된 클립을 처리합니다. 그런 다음, 정규화된 비디오를 다른 Azure 서비스에서 실행되는 알고리즘에 전달합니다.

이 시나리오를 지원하도록 구성해야 하는 몇 가지 단계가 있습니다.

- FTP를 설치하고 통신에 필요한 포트를 엽니다.
- 도시의 카메라 시스템에 고유한 전용 비디오 코덱을 설치합니다.
- 업로드된 비디오를 처리하는 코드 변환 서비스를 설치합니다.

이 중 대부분은 실제로 여기에서 다루지 않으며 소프트웨어를 설치하지 않는 일반적인 관리 작업입니다. 대신, 단계를 안내하고, 원격 데스크톱을 사용하여 사용자 지정 또는 타사 소프트웨어를 설치_할 수_ 있는 방법을 보여줍니다. 연결 정보를 가져와서 시작해보겠습니다.

## <a name="connect-to-the-vm-with-remote-desktop-protocol"></a>RDP(원격 데스크톱 프로토콜)를 사용하여 VM에 연결

RDP 클라이언트로 Azure VM에 연결하려면 다음 항목이 필요합니다.

- VM의 공용 IP 주소(또는 VM이 사용자 네트워크에 연결하도록 구성된 경우에는 개인 IP 주소).
- 포트 번호.

이 정보를 RDP 클라이언트에 입력하거나 미리 구성된 **RDP** 파일을 다운로드할 수 있습니다.

### <a name="download-the-rdp-file"></a>RDP 파일 다운로드

1. [Azure Portal](https://portal.azure.com?azure-portal=true)에서 이전에 만든 가상 머신의 **개요** 패널이 열려 있는지 확인합니다. VM을 열어야 하는 경우 **모든 리소스** 아래에서 해당 VM을 찾을 수 있습니다. 개요 패널에는 VM에 대해 많은 정보가 있습니다.

    - VM이 실행 중인지 확인할 수 있습니다.
    - VM을 중지하거나 다시 시작합니다.
    - VM에 연결하기 위한 공용 IP 주소를 가져옵니다.
    - CPU, 디스크 및 네트워크의 작업을 확인합니다.

1. 창 위쪽에서 **연결** 단추를 클릭합니다.

1. **가상 머신에 연결** 블레이드에서 **IP 주소** 및 **포트 번호** 설정을 확인하고 **RDP 파일 다운로드**를 클릭한 다음, 사용자 컴퓨터에 저장합니다.

1. 연결하기 전에 몇 가지 설정을 조정해보겠습니다. Windows의 탐색기를 사용하여 파일을 찾아 마우스 오른쪽 단추로 클릭하고 **편집**을 선택합니다. MacOS에서 RDP 클라이언트를 사용하여 먼저 파일을 연 다음, 표시된 목록에서 항목을 마우스 오른쪽 단추로 클릭하고 **편집**을 선택해야 합니다.

1. Azure VM의 연결 환경을 제어하려면 다양한 설정을 조정할 수 있습니다. 검사하려는 설정은 다음과 같습니다.

    - **표시**: 기본적으로 전체 화면입니다. 이 화면을 낮은 해상도로 변경하거나 하나를 초과해서 있는 경우 모든 모니터를 사용할 수 있습니다.
    - **로컬 리소스**: VM과 로컬 드라이브를 공유하여 PC에서 VM으로 파일을 복사할 수 있습니다. **로컬 장치 및 리소스**에서 **자세히** 단추를 클릭하여 공유된 것을 선택합니다.
    - **환경**: 네트워크 품질에 따라 시각적 환경을 조정합니다.

1. VM에 표시되도록 로컬 C: 드라이브를 공유합니다.

1. 변경 내용을 저장하려면 **일반적인** 탭으로 다시 전환하고 **저장**을 클릭합니다. 언제든 다시 방문하여 나중에 이 파일을 편집해서 다른 설정을 시도해볼 수 있습니다.

### <a name="connect-to-the-windows-vm"></a>Windows VM에 연결

1. **연결** 단추를 클릭하여 VM에 대한 연결을 시작합니다.

1. **원격 데스크톱 연결** 대화 상자에서 보안 경고 및 원격 컴퓨터 IP 주소를 확인하고 **연결**을 클릭합니다.

1. **Windows 보안** 대화 상자에서, 6단계 및 7단계에서 사용한 사용자 이름과 암호를 입력합니다.
    
    > [!NOTE]
    > Windows 클라이언트를 사용하여 VM에 연결하는 경우 사용자 머신의 알려진 ID로 초기화됩니다. **더 많은 선택** 옵션을 클릭하고 "다른 계정 사용"을 선택하여 다른 사용자 이름/암호 조합을 입력할 수 있습니다.
    
1. 두 번째 **원격 데스크톱 연결** 대화 상자에서 인증서 오류를 확인하고 **예**를 클릭합니다.

### <a name="install-worker-roles"></a>작업자 역할 설치

처음으로 Windows 서버 VM에 연결할 경우 서버 관리자가 시작됩니다. 이렇게 하면 일반적인 웹 또는 데이터 작업에 대한 작업자 역할을 할당할 수 있습니다. 시작 메뉴를 통해 서버 관리자를 시작할 수도 있습니다.

이 위치에서 서버에 웹 서버 역할을 추가합니다. 이렇게 하면 IIS를 설치하게 되고, 구성의 일부로 HTTP 요청을 해제하고 FTP 서버를 사용하도록 설정합니다. 그렇지 않으면 IIS를 무시하고 타사 FTP 서버를 설치할 수 있습니다. 그런 다음, VM에 추가한 빅 데이터 드라이브의 폴더에 대한 액세스를 허용하도록 FTP 서버를 구성합니다.

실제로 여기에서는 해당 FTP 서버를 구성하지 않으므로 서버 관리자를 닫습니다.

## <a name="install-custom-software"></a>사용자 지정 소프트웨어 설치

소프트웨어를 설치하는 데 사용할 수 있는 방법이 두 가지 있습니다. 먼저, 이 VM을 인터넷에 연결합니다. 필요한 소프트웨어에 다운로드할 수 있는 설치 관리자가 있는 경우 RDP 세션에서 웹 브라우저를 열고 소프트웨어를 다운로드하여 설치할 수 있습니다. 다음으로, 소프트웨어가 사용자 지정 서비스처럼 사용자 지정인 경우 로컬 머신에서 소프트웨어를 VM에 복사하여 설치할 수 있습니다. 두 번째 방법을 살펴보겠습니다.

1. 파일 탐색기를 엽니다. 사이드바에서 **이 PC**를 클릭합니다. 여러 드라이브가 표시되어야 합니다.

    - OS를 나타내는 Windows(C:) 드라이브.
    - 임시 저장소(D:) 드라이브.
    - 로컬 C: 드라이브(아래 표시된 것과 다른 이름이 있습니다).

    ![Azure로 공유된 로컬 드라이브](../media-drafts/6-drive-list.png)

로컬 드라이브에 대한 액세스를 통해 사용자 지정 소프트웨어에 대한 파일을 VM에 복사하고 소프트웨어를 설치할 수 있습니다. 시뮬레이션된 시나리오이므로 실제로 해당 작업을 수행하지 않지만 작동 방법을 상상할 수는 있습니다.

드라이브 목록에서 주목해야 할 사항은 _누락된_ 드라이브입니다. 해당 **데이터** 드라이브가 없습니다. Azure에서 VHD를 추가했지만 초기화하지는 않았습니다.

## <a name="initialize-data-disks"></a>데이터 디스크 초기화

처음부터 새로 만드는 모든 추가 드라이브는 초기화하고 포맷해야 합니다. 이 과정을 수행하는 프로세스는 실제 드라이브와 동일합니다.

1. 시작 메뉴에서 **디스크 관리** 도구를 시작합니다.

1. 초기화되지 않은 디스크가 감지됐음을 알리는 경고 메시지가 표시됩니다.

    ![VM에서 데이터 디스크 초기화](../media-drafts/6-disk-management.png)

1. **확인**을 클릭하여 디스크를 초기화합니다. 그러면 드라이브를 포맷하고 드라이브 문자를 할당할 수 있는 볼륨 목록에 드라이브가 표시됩니다.

1. 파일 탐색기를 열면 이제 데이터 드라이브가 표시되어야 합니다.

1. 계속해서 RDP 클라이언트를 닫아 VM에서 로그아웃합니다. 서버는 계속 실행됩니다.

RDP를 사용하면 Azure VM을 로컬 컴퓨터처럼 사용할 수 있습니다. 데스크톱 UI 액세스를 사용하여 이 VM을 모든 Windows 컴퓨터처럼 관리하면서 소프트웨어를 설치하고, 역할을 구성하고, 기능 및 기타 일상적인 작업을 조정할 수 있습니다. 단, 이것은 수동 프로세스입니다. 소프트웨어를 항상 설치해야 하는 경우에는 스크립팅을 사용하여 프로세스를 자동화하는 것이 좋습니다.