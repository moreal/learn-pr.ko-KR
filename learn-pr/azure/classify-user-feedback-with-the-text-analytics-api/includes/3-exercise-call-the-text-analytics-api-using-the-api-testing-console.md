텍스트 분석 API의 실제 작동 모습을 볼 수 있도록, 온라인 참조 설명서에 있는 기본 제공 API 테스트 콘솔 도구를 사용하여 호출을 만들어 보겠습니다. 그 전에, 호출을 만들려면 액세스 키가 필요합니다. 

## <a name="create-an-access-key"></a>액세스 토큰 만들기

텍스트 분석 API를 호출할 때마다 구독 키가 필요합니다. 액세스 키라고도 하는 구독 키는 호출을 만들기 위한 액세스 권한을 갖고 있는지 확인하는 데 사용됩니다. 여기서는 Azure Portal을 사용하여 키를 얻도록 하겠습니다. 

1. Azure 계정을 사용하여 [https://portal.azure.com](https://portal.azure.com?azure-portal=true)에서 Azure Portal에 로그인합니다.

1.  **+ 리소스 만들기**를 클릭합니다.

1.  Azure Marketplace 아래에서 **AI + 기계 학습**을 선택하여 사용 가능한 API 목록을 표시합니다. 페이지 오른쪽 상단에서 **모두 보기**를 클릭하여 Cognitive Services API 전체 목록을 표시합니다. 

1. Cognitive Services 목록에서 **Text Analytics**를 찾아서 선택합니다. 
![목록에서 텍스트 분석 API가 선택된 것을 보여주는 AI 및 기계 학습 창 스크린샷](../media-draft/select-text-analytics.PNG)

1. 열리는 [만들기] 페이지에서 각 필드에 다음 값을 입력합니다.


|속성  | 값  | 설명  |
|---------|---------|---------|
|이름     |    MyTextAnalyticsAPIAccount     |  Cognitive Services 계정의 이름입니다. 구체적인 이름을 사용하는 것이 좋습니다. 유효한 문자는 `a-z`, `0-9` 및 `-`입니다.    |
|구독     |  본인의 구독       |   **텍스트 분석 API**를 사용하여 이 구독에 새 Cognitive Services API 계정이 만들어집니다.      |
|위치     |  미국 서부       |  가까운 [지역](https://azure.microsoft.com/regions/)을 선택합니다.       |
|가격 책정 계층     | **F0 체험**     |   Cognitive Services 계정의 비용은 실제 사용량 및 선택한 옵션에 따라 다릅니다. 여기에는 체험 계층을 선택하는 것이 좋습니다.      |
|리소스 그룹     |  새 리소스 그룹을 만들고 이름을 [!INCLUDE [resource-group-note](./rg-name.md)]로 지정합니다.       |  Cognitive Services 텍스트 분석 API 계정을 만들 새 리소스 그룹의 이름입니다.       |


[!INCLUDE [resource-group-note](./rg-notice.md)]

작업을 모두 마치면 **만들기** 페이지가 다음 스크린샷처럼 보입니다.

![앞에 나온 표의 권장 값으로 모든 필드가 채워진 Text Analytics 계정을 만드는 사용자 인터페이스의 스크린샷.](../media-draft/create-text-analytics-account.PNG)

6. 페이지 상단에서 **만들기**를 선택하여 계정 만들기 프로세스를 시작합니다.  배포가 진행 중이라는 알림을 기다립니다. 그 후 계정이 리소스 그룹에 성공적으로 배포되었다는 알림이 도착합니다.

![[리소스로 이동] 단추 및 [대시보드에 고정] 단추가 있는 배포 성공 알림.](../media-draft/deploy-resource-group-success.PNG)

Cognitive Services 계정이 생겼으니, API 호출을 시작할 수 있도록 액세스 키를 찾아봅시다. 

7. *배포 성공* 알림에서 **리소스로 이동** 단추를 클릭합니다. 그러면 계정 빠른 시작이 열립니다. 

1. 왼쪽 메뉴에서 또는 빠른 시작의 *키 가져오기* 섹션에서 **키** 메뉴 항목을 선택합니다.  그러면 **키 관리** 페이지가 열립니다.

1. [복사] 단추를 사용하여 키 중 하나를 복사합니다. 

![Cognitive Services 계정과 키 1 및 키 2 항목의 이름을 표시하는 키 사용자 인터페이스를 관리합니다.](../media-draft/manage-keys.PNG)

> [!IMPORTANT]
> 항상 액세스 키를 안전하게 보관하고 절대 공유하지 마세요. 

10. 이 모듈의 나머지 부분을 위해 이 키를 저장해 둡니다. 잠시 후 테스트 콘솔에서 API 호출을 만들 때 그리고 나머지 모듈에서 이 키가 사용됩니다.

키가 생겼으니, 테스트 콘솔로 이동하여 API를 테스트할 수 있습니다.

## <a name="call-the-api-from-the-testing-console"></a>테스트 콘솔에서 API 호출

1. 선호하는 브라우저에서 [텍스트 분석 API](https://westus.dev.cognitive.microsoft.com/docs/services/TextAnalytics.V2.0/operations/56f30ceeeda5650db055a3c7?azure-portal=true) 참조 설명서로 이동합니다.

방문 페이지의 왼쪽에는 메뉴가 표시되고 오른쪽에는 콘텐츠가 표시됩니다. 메뉴는 텍스트 분석 API에서 호출할 수 있는 POST 메서드를 나열합니다. 이러한 엔드포인트는 **언어 검색**, **엔터티**, **핵심 문구** 및 **감정**입니다.  이러한 작업 중 하나를 호출하려면 몇 가지를 수행해야 합니다.
- 호출하려는 메서드를 선택합니다.
- 이 강좌의 앞부분에서 선택한 영역 또는 위치와 일치하는 테스트 콘솔을 선택합니다. 
- 이 강좌의 앞부분에서 저장한 액세스 키를 각 호출에 추가합니다.

2. 왼쪽 메뉴에서 **감정**을 선택합니다. 그러면 오른쪽에 감정 설명서가 열립니다. 설명서에서 볼 수 있듯이, 다음 형식으로 REST 호출을 만들겠습니다.

`https://[location].api.cognitive.microsoft.com/text/analytics/v2.0/sentiment` 

**ocp-Apim-Subscription-Key** 헤더에서 구독 키 또는 액세스 키를 전달할 것입니다.

## <a name="make-some-api-calls"></a>API 호출 만들기

1. 이 페이지의 목록에서는 이 강좌의 앞부분에서 Cognitive Services 계정을 만들 때 선택한 위치와 일치하는 지역을 선택합니다.  예를 들어 계정을 만들 때 *미국 서부*를 선택한 경우 여기서도 다음과 같이 미국 서부를 선택합니다.
![감정 메뉴 항목을 선택하고, 이어서 미국 서부를 선택한 텍스트 분석 API 참조 사이트의 스크린샷.](../media-draft/select-testing-console-region.png)

1.  열리는 그 다음 페이지는 실시간 대화형 API 콘솔입니다.  앞에서 저장한 액세스 키를 **Ocp-Apim-Subscription-Key** 레이블이 지정된 페이지의 필드에 붙여넣습니다. 이 키는 자동으로 HTTP 요청 창에 헤더 값으로 기록됩니다.

1. 페이지 맨 아래로 스크롤하여 **보내기**를 클릭합니다. 이 화면을 자세히 살펴보면서 어떤 일이 발생하는지 분석해 보겠습니다.

사용자 인터페이스의 헤더 섹션에서는 요청 헤더에서 액세스 또는 구독 키를 설정합니다.

![헤더 섹션의 스크린샷.](../media-draft/2-marker.PNG)

다음으로 **문서** 배열을 보관하는 요청 본문 섹션이 있습니다. 배열의 각 문서에는 세 가지 속성이 있습니다. 이러한 속성은 *"language"*, *"id"*, *"text"* 입니다. *"id"* 는 이 예제에서는 숫자이지만, 문서 배열에서 고유하기만 하다면 어떤 것이라도 상관 없습니다. 또한 이 예에서는 세 가지 다른 언어로 작성된 문서를 전달합니다. 텍스트 분석 API의 감정 기능에서 15개가 넘는 언어가 지원됩니다. 자세한 내용은 [Text Analytics API에서 지원되는 언어](https://docs.microsoft.com//azure/cognitive-services/text-analytics/text-analytics-supported-languages)를 참조하세요. 단일 문서의 최대 크기는 5,000자이고, 요청 하나에 최대 1,000개의 문서를 포함할 수 있습니다. 

![요청 본문 섹션의 스크린샷](../media-draft/3-marker.PNG)

헤더 및 요청 URL을 포함한 전체 요청은 그 다음 섹션에서 표시됩니다. 이 예에서는 `westus`로 시작하는 URL로 요청이 라우팅되는 것을 볼 수 있습니다. URL은 선택한 지역에 따라 다릅니다.  

![섹션 4.](../media-draft/4-marker.PNG) 
![섹션 5.](../media-draft/5-marker.PNG) 

그 다음은 응답에 대한 정보입니다. 이 예에서는 요청이 성공했고 `200` 코드가 반환된 것을 볼 수 있습니다. 또한 왕복 38ms가 소요된 것을 볼 수 있습니다.

![섹션 5.](../media-draft/6-marker.PNG)  

마지막으로, 요청에 대한 응답을 봅시다. 응답에는 텍스트 분석 API가 문서에 대해 갖고 있는 인사이트가 포함됩니다. 문서의 배열은 원래 텍스트 없이 반환됩니다. 각 문서의 *"id"* 및 *"잠수"* 를 얻습니다. 이 API는 0~1 사이의 숫자 점수를 반환합니다. 1에 가까운 점수는 긍정적인 정서를 나타내고, 0에 가까운 점수는 부정적인 정서를 나타냅니다. 점수 0.5는 감정이 없는 중립적 진술을 나타냅니다. 이 예제에서는 매우 긍정적인 문서와 매우 부정적인 문서가 각각 하나씩 있습니다. 
![섹션 5.](../media-draft/7-marker.PNG)  

축하합니다. 코드 줄을 작성하지 않고 첫 번째 텍스트 분석 API 호출을 만들었습니다. 콘솔에서 나가지 말고 자유롭게 호출을 연습해 보세요. 다음은 몇 가지 제안 사항입니다.

- 섹션 2의 문서를 변경하고 API가 반환하는 항목을 살펴보세요. 
- 동일한 구독 키를 사용하고 **언어 감지**, **엔터티**, **핵심 문구** 등의 다른 방법을 사용해보세요.
- 구독을 사용하여 다른 지역에서 호출을 만들고 어떻게 되는지 관찰해보세요. 

API 테스트 콘솔은 이 API의 기능을 탐색할 수 있는 좋은 방법입니다. 기능을 알아보았으니, 이번에는 이 지식을 실제 시나리오에 적용해 보겠습니다.