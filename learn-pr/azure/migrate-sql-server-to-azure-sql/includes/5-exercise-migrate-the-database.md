데이터베이스를 평가하고 보고된 오류를 수정했으므로 이제 데이터베이스를 마이그레이션할 수 있습니다. 이 단원에서는 SQL 데이터베이스를 Azure SQL Database로 마이그레이션합니다.

## <a name="setup"></a>설정

첫 번째 단계는 샘플 데이터를 다운로드하는 것입니다. 데이터가 이미 로컬에 설치된 경우 이 설정을 건너뛸 수 있습니다.

1. 인터넷 브라우저를 시작하여 https://docs.microsoft.com/sql/samples/adventureworks-install-configure?view=sql-server-2017로 이동합니다.

1. **OLTP 다운로드**에서 **AdventureWorks2008R2.bak**를 클릭합니다.

1. Management Studio에서 **AdventureWorks 2008R2**를 기본 인스턴스로 복원합니다.

## <a name="create-an-azure-sql-database"></a>Azure SQL Database 만들기

1. Azure Portal 계정에 로그인 합니다.

1. 포털의 왼쪽 위 모서리에서 **리소스 만들기**를 클릭합니다.

1. **데이터베이스** > **SQL Database**를 클릭합니다.

1. SQL Database 양식의 다음 필드에 내용을 입력합니다.

    |필드|설명|
    |-----|---|
    |데이터베이스 이름|데이터베이스의 이름을 입력합니다. 마이그레이션하려는 기존 데이터베이스의 이름이나 원하는 새 이름을 입력하면 됩니다.|
    |리소스 그룹|리소스 그룹을 선택하거나 새 리소스 그룹 이름을 입력합니다.|
    |원본 선택|*새 데이터베이스*를 선택합니다.|

1. **서버**에서 기존 서버를 선택하거나 전역적으로 고유한 **서버 이름**, **서버 관리자 로그인**, **암호**(확인 필요) 및 **위치**를 입력합니다.

    > [!NOTE]
    > 서버 이름, 로그인 이름 및 암호를 사용하여 데이터베이스에 연결합니다.

1. **선택**을 클릭합니다.

1. **가격 책정 계층**에서는 성능이 더 우수한 데이터베이스를 선택할 수 있습니다. 하지만 이 자습서에서는 기본값을 선택합니다.

1. **만들기**를 클릭합니다. 데이터베이스가 프로비저닝될 때까지 기다렸다가 자습서를 계속 진행합니다.

    다음 스크린샷은 새 SQL 데이터베이스에 대해 가능한 구성을 보여 줍니다.

    ![샘플 구성이 적용된 Azure Portal의 새 SQL 데이터베이스 블레이드 스크린샷.](../media-draft/5-create-azure-sql-db.png)

## <a name="create-a-new-migration-project"></a>새 마이그레이션 프로젝트 만들기

1. **Data Migration Assistant**를 시작합니다.

1. **새로 만들기** 아이콘을 클릭하고 다음 옵션을 지정합니다.

    - **프로젝트 형식** - *마이그레이션* 옵션을 선택합니다.
    - **프로젝트 이름** - 프로젝트에 대해 기억하기 쉬운 이름을 입력합니다.
    - **원본 서버 유형** - *SQL Server*를 선택합니다.
    - **대상 서버 유형** - *Azure SQL Database*를 선택합니다.
    - **마이그레이션 범위** - *스키마 및 데이터*를 선택합니다.

1. **만들기**를 클릭합니다.

## <a name="specify-the-source-server-and-database"></a>원본 서버 및 데이터베이스 지정

1. **원본 서버에 연결**의 **서버 이름** 필드에 원본 SQL Server 인스턴스의 이름을 입력합니다.

1. 원본 SQL Server 인스턴스에서 지원하는 **인증 유형**을 선택합니다.
    > [!TIP]
    > 연결 속성 아래의 **연결 암호화** 확인란을 선택하여 연결을 암호화하는 것이 좋습니다.

1. **연결**을 선택합니다.

> [!NOTE]
> IP 주소에서 사용 권한이 없기 때문에 서버 인증이 실패한 경우 **Azure Management Studio**에서 SQL Server 인스턴스를 열고 **방화벽 및 Virtual Network**로 이동하여 규칙을 추가합니다. 원하는 이름을 지정합니다(예: **Azure 허용**). 이 인스턴스에 액세스할 수 있는 IP 주소의 범위를 설정합니다. 범위는 0.0.0.0 ~ 255.255.255.255가 될 수 있습니다. 이 새 규칙을 저장하면 Azure SQL Server 인스턴스에 액세스할 수 있습니다. 

1. Azure SQL Database로 마이그레이션할 단일 원본 데이터베이스를 선택하고 **다음**을 클릭합니다.

## <a name="specify-the-target-server-and-database"></a>대상 서버 및 데이터베이스 지정

1. **대상 서버에 연결**의 **서버 이름** 필드에 Azure SQL Database 인스턴스의 이름을 입력합니다. 데이터베이스 인스턴스에 **database.windows.net**을 추가합니다.

1. 대상 Azure SQL Database 인스턴스에서 지원하는 인증 형식을 선택합니다. 이 자습서에서는 **SQL Server 인증**을 선택합니다.
    > [!TIP]
    > 연결 속성 아래의 **연결 암호화** 확인란을 선택하여 연결을 암호화하는 것이 좋습니다.

1. Azure SQL Database를 만들 때 정의한 **사용자 이름** 및 **암호**를 입력합니다.

1. **연결**을 클릭합니다.

1. 원본 데이터베이스를 마이그레이션할 단일 대상 데이터베이스를 선택합니다.
    > [참고] Windows 사용자를 마이그레이션하려는 경우 **대상 외부 사용자 도메인 이름** 필드에 대상 외부 사용자 도메인 이름이 올바르게 지정되어 있는지 확인합니다.

1. **다음**을 클릭합니다.

## <a name="select-schema-objects"></a>스키마 개체 선택

1. Azure SQL Database로 마이그레이션할 원본 데이터베이스에서 스키마 개체를 선택합니다.

    > [!NOTE]
    > 그대로 변환할 수 없는 일부 개체의 경우 자동 수정 옵션이 제공됩니다. 왼쪽 창에서 이러한 개체를 클릭하면 오른쪽 창에 수정 제안 사항이 표시됩니다. 해당 수정 내용을 검토하고 개체별로 모든 변경 내용을 적용하거나 무시하도록 선택합니다. 개체 하나에 대해 모든 변경을 적용하거나 무시해도 다른 데이터베이스 개체의 변경 내용에는 영향을 주지 않습니다. 변환하거나 자동으로 수정할 수 없는 문은 대상 데이터베이스로 재현되어 주석 처리됩니다.

    ![AdventureWorks SQL Server 데이터에 영향을 주는 마이그레이션 문제 목록을 보여 주는 Data Migration Assistant 스크린샷("저장 프로시저: dbo.uspSearchCandidateResumes" 문제가 선택되고 문제 세부 정보가 표시됨).](../media-draft/5-suggested-fix.png)

1. **SQL 스크립트 생성**을 클릭합니다.

## <a name="deploy-schema"></a>스키마 배포

1. **스키마 배포**를 클릭합니다.

1. 스키마 배포 결과를 검토합니다.

## <a name="migrate-data"></a>데이터 마이그레이션

1. **데이터 마이그레이션**을 클릭하여 데이터 마이그레이션 프로세스를 시작합니다.

1. 마이그레이션할 데이터가 포함된 테이블을 선택합니다.

1. **데이터 마이그레이션 시작**을 클릭합니다.

마지막 화면에 전체 상태가 표시됩니다.

## <a name="summary"></a>요약

이 단원에서는 빈 Azure SQL Database를 만들고 로컬 SQL Server 데이터베이스를 이 새 데이터베이스로 마이그레이션했습니다.