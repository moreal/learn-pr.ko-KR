<span data-ttu-id="b1a2d-101">최근에 Lamna Healthcare는 고객 연결 웹 응용 프로그램이 중단되는 심각한 문제를 겪었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-101">Lamna Healthcare recently experienced a significant outage to a customer-facing web application.</span></span> <span data-ttu-id="b1a2d-102">프로덕션 웹 응용 프로그램을 포함하고 있는 리소스 그룹에 대한 전체 액세스 권한이 한 엔지니어에게 부여되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-102">An engineer was granted full access to a resource group containing the production web application.</span></span> <span data-ttu-id="b1a2d-103">이 엔지니어가 실수로 라이브 고객 데이터를 호스팅하는 데이터베이스를 포함하여 리소스 그룹과 모든 자식 리소스를 삭제했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-103">This person accidentally deleted the resource group and all child resources, including the database hosting live customer data.</span></span> 

<span data-ttu-id="b1a2d-104">다행히 응용 프로그램 소스 코드 및 리소스를 소스 제어에서 사용할 수 있었으며 일정에 따라 주기적 데이터베이스 백업이 자동으로 실행되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-104">Fortunately, the application source code and resources were available in source control and regular database backups were running automatically on a schedule.</span></span> <span data-ttu-id="b1a2d-105">덕분에 서비스를 비교적 쉽게 복원할 수 있었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-105">Therefore the service was reinstated relatively easily.</span></span> <span data-ttu-id="b1a2d-106">여기서는 인프라에 대한 액세스를 보호하는 Azure의 기능을 활용하여 운영 중단을 피할 수 있었던 비결을 설명하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-106">Here, we will explore how this outage could have been avoided by utilizing capabilities on Azure to protect the access to infrastructure.</span></span>

## <a name="criticality-of-infrastructure"></a><span data-ttu-id="b1a2d-107">인프라의 중요성</span><span class="sxs-lookup"><span data-stu-id="b1a2d-107">Criticality of infrastructure</span></span>

<span data-ttu-id="b1a2d-108">클라우드 인프라는 여러 비즈니스에서 그 중요성이 점차 부각되고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-108">Cloud infrastructure is becoming a critical piece of many businesses.</span></span> <span data-ttu-id="b1a2d-109">사람과 프로세스가 각자 맡은 작업을 완료하는 데 필요한 권한만 부여하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-109">It is critical to ensure people and processes have only the rights they need to get their job done.</span></span> <span data-ttu-id="b1a2d-110">잘못된 액세스 권한을 할당하면 데이터 손실, 데이터 유출이 발생하거나 서비스가 중단될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-110">Assigning incorrect access can result in data loss, data leakage, or cause services to become unavailable.</span></span> 

<span data-ttu-id="b1a2d-111">시스템 관리자는 수많은 사용자, 시스템 및 권한 집합에 대한 책임이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-111">System administrators can be responsible for a large number of users, systems, and permission sets.</span></span> <span data-ttu-id="b1a2d-112">따라서 적절한 액세스 권한을 신속하게 부여하기가 어려워서 ‘획일적 방식’으로 이어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-112">So correctly granting access can quickly become unmanageable and can lead to a 'one size fits all' approach.</span></span> <span data-ttu-id="b1a2d-113">이 방식은 관리의 복잡성을 줄일 수 있지만, 필요 이상으로 많은 권한을 의도치 않게 부여할 가능성이 훨씬 높습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-113">This approach can reduce the complexity of administration, but makes it far easier to inadvertently grant more permissive access than required.</span></span>

## <a name="role-based-access-control"></a><span data-ttu-id="b1a2d-114">역할 기반 액세스 제어</span><span class="sxs-lookup"><span data-stu-id="b1a2d-114">Role-based access control</span></span>

<span data-ttu-id="b1a2d-115">RBAC(역할 기반 액세스 제어)는 약간 다른 방법을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-115">Role-based access control (RBAC) offers a slightly different approach.</span></span> <span data-ttu-id="b1a2d-116">역할은 액세스 권한 컬렉션으로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-116">Roles are defined as collections of access permissions.</span></span> <span data-ttu-id="b1a2d-117">보안 주체는 역할에 직접 매핑되거나 그룹 멤버 자격을 통해 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-117">Security principals are mapped to roles directly or through group membership.</span></span> <span data-ttu-id="b1a2d-118">보안 주체, 액세스 권한 및 리소스를 분리하면 액세스 관리가 간소화되고 세밀한 제어가 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-118">Separating security principals, access permissions, and resources provides simplified access management and more fine-grained control.</span></span>

<span data-ttu-id="b1a2d-119">Azure에서는 사용자, 그룹, 역할이 모두 Azure AD(Azure Active Directory)에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-119">On Azure, users, groups, and roles are all stored in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="b1a2d-120">Azure Resource Manager API는 역할 기반 액세스 제어를 사용하여 Azure 내의 모든 리소스 액세스 관리를 보호합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-120">The Azure Resource Manager API uses role-based access control to secure all resource access management within Azure.</span></span>

![역할 기반 액세스 제어의 구현을 보여주는 일러스트레이션](../media/ACL_Based_Access.png)

<!-- ![Role-based access control](../media/Role_Based_Access.png)
 -->

### <a name="roles-and-management-groups"></a><span data-ttu-id="b1a2d-122">역할 및 관리 그룹</span><span class="sxs-lookup"><span data-stu-id="b1a2d-122">Roles and management groups</span></span>

<span data-ttu-id="b1a2d-123">역할은 “읽기 전용” 또는 “Contributor”처럼 사용자에게 Azure 서비스 인스턴스 액세스를 부여할 수 있는 권한 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-123">Roles are sets of permissions, like "Read-only" or "Contributor", that users can be granted to access an Azure service instance.</span></span> <span data-ttu-id="b1a2d-124">역할은 개별 서비스 인스턴스 수준에서 부여할 수 있지만 Azure Resource Manager 계층 구조를 따라 아래로 흐르기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-124">Roles can be granted at the individual service instance level, but they also flow down the Azure Resource Manager hierarchy.</span></span> <span data-ttu-id="b1a2d-125">전체 구독 같은 더 높은 범위에서 할당된 역할은 서비스 인스턴스 같은 자식 범위에 의해 상속됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-125">Roles assigned at a higher scope, like an entire subscription, are inherited by child scopes, like service instances.</span></span> 

<span data-ttu-id="b1a2d-126">관리 그룹은 최근에 RBAC 모델에 도입된 추가 계층 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-126">Management groups are an additional hierarchical level recently introduced into the RBAC model.</span></span> <span data-ttu-id="b1a2d-127">관리 그룹은 구독을 그룹화하고 훨씬 높은 수준에서 정책을 적용하는 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-127">Management groups add the ability to group subscriptions together and apply policy at an even higher level.</span></span>

<span data-ttu-id="b1a2d-128">또한 임의로 정의된 구독 계층을 통해 역할을 흘려보내는 기능을 통해 관리자는 인증된 사용자에게 전체 환경에 대한 임시 액세스 권한을 부여할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-128">The ability to flow roles through an arbitrarily defined subscription hierarchy also allows administrators to grant temporary access to an entire environment for authenticated users.</span></span> <span data-ttu-id="b1a2d-129">예를 들어 감사자에게는 모든 구독에 대한 임시 읽기 전용 액세스 권한이 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-129">For example, an auditor may require temporary read-only access to all subscriptions.</span></span>

![관리 그룹에서 역할 기반 액세스의 계층적 표현을 보여주는 일러스트레이션](../media/management_groups.png)

### <a name="privileged-identity-management"></a><span data-ttu-id="b1a2d-131">Privileged Identity Management</span><span class="sxs-lookup"><span data-stu-id="b1a2d-131">Privileged Identity Management</span></span>

<span data-ttu-id="b1a2d-132">RBAC를 사용하여 Azure 리소스 액세스를 관리하는 것 외에도, 인프라 보호에 대한 포괄적인 접근 방식에서는 조직의 변화와 발전에 따라 역할 멤버를 지속적으로 감사하는 방안을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-132">In addition to managing Azure resource access with RBAC, a comprehensive approach to infrastructure protection should consider including the ongoing auditing of role members as their organization changes and evolves.</span></span> <span data-ttu-id="b1a2d-133">Azure AD PIM(Privileged Identity Management)은 역할 할당, 셀프 서비스 및 Just-In-Time 역할 활성화를 감독하고 Azure AD 및 Azure 리소스 액세스를 검토할 수 있는 추가 유료 제품입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-133">Azure AD Privileged Identity Management (PIM) is an additional paid-for offering that provides oversight of role assignments, self-service, and just-in-time role activation and Azure AD & Azure resource access reviews.</span></span>

![Privileged Identity Management 대시보드 스크린샷](../media/PIM_Dashboard.png)

## <a name="providing-identities-to-services"></a><span data-ttu-id="b1a2d-135">서비스에 ID 입력</span><span class="sxs-lookup"><span data-stu-id="b1a2d-135">Providing identities to services</span></span>

<span data-ttu-id="b1a2d-136">서비스에 ID가 있는 것이 좋을 때가 종종 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-136">It's often valuable for services to have identities.</span></span> <span data-ttu-id="b1a2d-137">때때로 모범 사례에 반해, 자격 증명 정보가 구성 파일에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-137">Often times, and against best practices, credential information is embedded in configuration files.</span></span> <span data-ttu-id="b1a2d-138">이러한 구성 파일과 관련된 보안이 전혀 없기 때문에 시스템 또는 리포지토리에 대한 액세스 권한을 가진 사람이라면 누구든지 자격 증명에 액세스할 수 있게 되어 위험에 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-138">With no security around these configuration files, anyone with access to the systems or repositories can access these credentials and risk exposure.</span></span>

<span data-ttu-id="b1a2d-139">Azure AD는 Azure 서비스의 서비스 사용자 및 관리 ID라는 두 가지 방법을 통해 이 문제를 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-139">Azure AD addresses this problem through two methods: service principals and managed identities for Azure services.</span></span>

### <a name="service-principals"></a><span data-ttu-id="b1a2d-140">서비스 사용자</span><span class="sxs-lookup"><span data-stu-id="b1a2d-140">Service principals</span></span>

<span data-ttu-id="b1a2d-141">서비스 주체를 이해하려면 먼저 ID 관리에 사용되는 **ID**라는 단어와 **주체**라는 단어를 이해하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-141">To understand service principals, it's useful to first understand the words **identity** and **principal** as they are used in Identity management world.</span></span>

<span data-ttu-id="b1a2d-142">**ID**는 인증 가능한 것을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-142">An **identity** is just a thing that can be authenticated.</span></span> <span data-ttu-id="b1a2d-143">당연히 여기에는 사용자 이름 및 암호를 사용하는 사용자가 포함되지만, 비밀 키 또는 인증서를 사용하여 인증되는 응용 프로그램 또는 다른 서버도 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-143">Obviously this includes users with username and password, but it can also include applications or other servers, which might authenticate with secret keys or certificates.</span></span> <span data-ttu-id="b1a2d-144">추가 정의로, **계정**은 ID와 연결되는 데이터를 말합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-144">As a bonus definition, an **account** is data associated with an identity.</span></span>

<span data-ttu-id="b1a2d-145">**보안 주체**는 특정 역할 또는 클레임을 사용하여 작동하는 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-145">A **principal** is an identity acting with certain roles or claims.</span></span> <span data-ttu-id="b1a2d-146">"관리자 권한으로 실행"을 사용하여 bash 프롬프트 또는 Windows에서 'sudo'를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-146">Consider the use 'sudo' on a bash prompt or on Windows using "run as Administrator".</span></span> <span data-ttu-id="b1a2d-147">두 경우 모두에 이전과 같은 ID로 계속 로그인되지만, 실행하는 역할은 바뀌었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-147">In both of those cases, you are still logged in as the same identity as before, but you've changed the role under which you are executing.</span></span>

<span data-ttu-id="b1a2d-148">이러한 이유로 문자 그대로 **서비스 주체**라는 이름이 붙었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-148">So a **Service Principal** is literally named.</span></span> <span data-ttu-id="b1a2d-149">서비스 주체는 서비스 또는 응용 프로그램에서 사용하는 ID를 말합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-149">It is an identity that is used by a service or application.</span></span> <span data-ttu-id="b1a2d-150">다른 ID와 마찬가지로 할당된 역할일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-150">Like other identities, it can be assigned roles.</span></span> 

<span data-ttu-id="b1a2d-151">예를 들어 Lamna Healthcare는 서비스 주체로 인증되는 역할을 실행하도록 배포 스크립트를 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-151">For example, Lamna Healthcare can assign its deployment scripts to run authenticated as a service principal.</span></span> <span data-ttu-id="b1a2d-152">해당 ID가 파괴적 작업을 수행할 권한이 있는 유일한 ID인 경우 Lamna가 실수로 리소스를 삭제하는 일을 반복하지 않는 데 많은 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-152">If that is the only identity that has permission to perform destructive actions, Lamna will have gone a long way toward making sure they don't have a repeat of the accidental resource deletion.</span></span>

### <a name="managed-identities-for-azure-resources"></a><span data-ttu-id="b1a2d-153">Azure 리소스에 대한 관리 ID</span><span class="sxs-lookup"><span data-stu-id="b1a2d-153">Managed identities for Azure resources</span></span>

<span data-ttu-id="b1a2d-154">서비스 사용자 만들기는 지루한 과정일 수 있으며 수많은 접점이 있어서 유지 관리가 어려울 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-154">The creation of service principals can be a tedious process, and there are a lot of touch points that can make maintaining them difficult.</span></span> <span data-ttu-id="b1a2d-155">Azure 리소스의 관리 ID는 훨씬 간단하며 대부분의 작업을 자동으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-155">Manage identities for Azure resources are much easier and will do most of the work for you.</span></span>

<span data-ttu-id="b1a2d-156">관리 ID는 지원하는 모든 Azure 서비스에 대해 즉시 만들 수 있습니다(계속해서 목록 추가 중).</span><span class="sxs-lookup"><span data-stu-id="b1a2d-156">A managed identity can be instantly created for any Azure service that supports it (the list is constantly growing).</span></span> <span data-ttu-id="b1a2d-157">서비스에 대한 관리 ID를 만들면 Azure AD 테넌트에 계정이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-157">When you create a managed identity for a service, you are creating an account on the Azure AD tenant.</span></span> <span data-ttu-id="b1a2d-158">Azure 인프라는 서비스를 인증하고 계정을 관리하는 작업을 자동으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-158">Azure infrastructure will automatically take care of authenticating the service and managing the account.</span></span> <span data-ttu-id="b1a2d-159">그러면 인증된 서비스가 다른 Azure 리소스에 액세스하도록 안전하게 허용하는 것을 포함하여 해당 계정을 다른 AD 계정처럼 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-159">You can then use that account like any other AD account including securely letting the authenticated service access other Azure resources.</span></span>

<span data-ttu-id="b1a2d-160">Lamna Healthcare는 ID 관리를 한 단계 발전시켰으며 인프라 관리 및 배포를 수행하는 기능이 필요한 모든 지원되는 서비스에 관리 ID를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-160">Lamna Healthcare takes their identity management a step further and uses managed identities for all supported services that need the ability to perform infrastructure management and deployments.</span></span>

## <a name="infrastructure-protection-at-lamna-healthcare"></a><span data-ttu-id="b1a2d-161">Lamna Healthcare의 인프라 보호</span><span class="sxs-lookup"><span data-stu-id="b1a2d-161">Infrastructure protection at Lamna Healthcare</span></span>

<span data-ttu-id="b1a2d-162">인프라가 실수로 삭제된 문제를 Lamna Healthcare가 어떻게 해결했는지 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-162">We've seen how Lamna Healthcare has addressed issues from their incident where infrastructure was inadvertently deleted.</span></span> <span data-ttu-id="b1a2d-163">Lamna Healthcare는 역할 기반 액세스 제어를 사용하여 인프라 보안을 보다 효율적으로 관리했으며, 관리 ID를 사용하여 자격 증명에서 코드를 없애고 서비스에 필요한 ID 관리를 간소화했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-163">They've used role-based access control to better manage the security of their infrastructure, and are using managed identities to keep their credentials out of code and ease administration of the identities needed for their services.</span></span>

## <a name="summary"></a><span data-ttu-id="b1a2d-164">요약</span><span class="sxs-lookup"><span data-stu-id="b1a2d-164">Summary</span></span>

<span data-ttu-id="b1a2d-165">인프라의 가용성 및 무결성을 보장하려면 인프라를 적절하게 보호해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-165">To ensure the availability and integrity of infrastructure, it's important to properly secure your infrastructure.</span></span> <span data-ttu-id="b1a2d-166">RBAC 및 관리 ID 같은 기능을 적절하게 사용하면 권한이 없는 액세스 또는 의도하지 않은 액세스로부터 Azure 환경을 보호하는 데 도움이 되며, 아키텍처의 ID 보안 기능이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a2d-166">Properly using features such as RBAC and managed  identities will help protect your Azure environment from unauthorized or unintended access, and will enhance the identity security capabilities in your architecture.</span></span>