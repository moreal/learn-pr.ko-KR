이 단원에서는 Azure Portal을 사용하여 가상의 남부 캘리포니아 서핑 보고서 웹앱에 적절한 저장소 계정을 만듭니다.

## <a name="design-goals"></a>디자인 목표

서핑 보고서 사이트를 통해 사용자가 로컬 해변 조건의 사진 및 비디오를 업로드할 수 있습니다. 보는 사람은 이 콘텐츠를 사용하여 가장 좋은 서핑 조건을 갖는 해변을 선택할 수 있습니다. 디자인 및 기능 목표 목록을 다음과 같습니다.

- 비디오 콘텐츠를 신속하게 로드해야 합니다.
- 사이트에서는 업로드 볼륨이 예기치 않게 급증하는 경우 처리해야 합니다.
- 오래된 콘텐츠를 서핑 조건 변화에 따라 제거하므로 사이트는 항상 현재 조건을 표시합니다.

처리를 위해 Azure Queue에 업로드된 콘텐츠를 버퍼링한 다음, 저장을 위해 Azure Blob으로 이동하는 구현으로 결정합니다. 큐와 Blob을 모두 저장할 수 있는 동시에 콘텐츠에 대한 대기 시간이 짧은 액세스를 제공하는 저장소 계정이 필요합니다.

## <a name="exercise-steps"></a>연습 단계

### <a name="launch-the-blade"></a>블레이드 시작

1. 웹 브라우저에서 [Azure Portal](https://portal.azure.com?azure-portal=true)로 이동하고 계정에 로그인합니다.

1. 왼쪽 세로 막대에서 **리소스 만들기**를 선택합니다.

1. Azure Marketplace의 **저장소** 제목을 선택합니다.

1. **저장소 계정**을 선택합니다. 포털에는 **저장소 계정 만들기** 블레이드가 표시됩니다.

### <a name="configure-the-basic-options"></a>기본 옵션 구성

1. 블레이드의 맨 위에 있는 **기본 사항** 탭을 선택합니다.

1. **구독**: 구독 중 하나를 선택합니다.

1. **리소스 그룹**: **SurfReportResourceGroup**이라는 새 리소스 그룹을 만듭니다.

1. **저장소 계정 이름**: `surfreport` + 사용자 이니셜 + 숫자와 같은 전세계에 고유한 값을 입력합니다.

 1. **위치**: **미국 서부**를 선택합니다.

    이유: 해당 응용 프로그램이 캘리포니아 남부의 사용자를 위한 것입니다. 비디오를 로드할 때 대기 시간을 최소화하려면 이러한 사용자에게 가까운 Blob을 호스트해야 합니다. 따라서 **미국 서부**를 선택하는 것이 좋습니다.

1. **배포 모델**: **Resource Manager**를 선택합니다.
    
    이유: **Resource Manager**를 통해 리소스 그룹을 사용하여 응용 프로그램에 대한 웹앱, 저장소 계정 등을 관리할 수 있기 때문에 적절합니다.

1. **성능**: **표준**을 선택합니다.

    이유: 페이지 Blob으로 저장소 계정을 제한하기 때문에 **프리미엄** 옵션을 사용할 수 없습니다. 비디오 및 큐에 대한 Blob을 모두 버퍼링하기 위해 차단해야 하는 경우 **표준** 옵션에서만 사용 가능합니다.

1. **계정 종류**: **StorageV2(범용 v2)** 를 선택합니다.

    이유: **StorageV2(범용 v2)** 가 여기에 적합합니다. Blob 및 큐를 조합해야 하므로 **Blob Storage** 옵션이 작동하지 않습니다. 이 응용 프로그램의 경우 **Storage(범용 v1)** 계정을 선택하는 혜택이 있을 수 없습니다. 그러면 액세스할 수 있는 기능을 제한하고 예상된 워크로드의 비용을 줄일 가능성이 작기 때문입니다.

1. **복제**: **LRS(로컬 중복 저장소)** 를 선택합니다.

    이유: 이미지와 비디오는 빠르게 만료되고 사이트에서 제거됩니다. 즉, 글로벌 백업을 위해 추가 비용을 지불하는 것은 의미가 없습니다. 재해로 인해 데이터 손실이 발생한 경우 사용자의 최신 콘텐츠를 사용하여 사이트를 다시 시작할 수 있습니다.

1. **액세스 계층(기본값)**: **핫**을 선택합니다.
   
    이유: 비디오를 신속하게 로드하려면 Blob에 고성능 옵션을 사용합니다.
   
    다음 스크린샷에서는 **기본 사항** 탭에 대해 완성된 설정을 보여줍니다.
    
    ![**기본 사항** 탭을 선택한 저장소 계정 만들기 블레이드의 스크린샷입니다.](../media-drafts/5-create-storage-account-basics.png)

### <a name="configure-the-advanced-options"></a>고급 옵션 구성

1. 블레이드의 맨 위에 있는 **고급** 탭을 선택합니다.

1. **보안 전송 필요**: **사용**을 선택합니다.

    이유: 네트워크를 통한 Https는 일반적으로 모범 사례로 간주됩니다.

1. **가상 네트워크**: **없음**으로 유지합니다. 

    이유: 콘텐츠가 공용이므로 공용 클라이언트에서 액세스할 수 있도록 해야 합니다.

    다음 스크린샷에서는 **고급** 탭에 대해 완성된 설정을 보여줍니다.
    
    ![**고급** 탭을 선택한 저장소 계정 만들기 블레이드 스크린샷](../media-drafts/5-create-storage-account-advanced.png)

### <a name="create"></a>만들기

1. 블레이드 아래쪽에서 **검토 + 만들기** 단추를 클릭합니다.

1. 다음 화면의 블레이드 아래쪽에서 **만들기** 단추를 클릭합니다.

1. 리소스가 생성될 때까지 기다립니다.

### <a name="verify"></a>확인

1. 왼쪽 세로 막대에서 **저장소 계정** 링크를 선택합니다.

1. 생성에 성공했는지 확인하려면 목록에서 새 저장소 계정을 찾습니다.

### <a name="clean-up"></a>정리

1. 왼쪽 세로 막대에서 **리소스 그룹** 링크를 선택합니다.

1. 목록에서 **SurfReportResourceGroup**을 찾습니다.

1. **SurfReportResourceGroup** 항목을 마우스 오른쪽 단추로 클릭하고, 팝업 메뉴에서 **리소스 그룹 삭제**를 선택합니다.

1. 확인 필드에 리소스 그룹 이름을 입력합니다.

1. **삭제** 단추를 클릭합니다.

## <a name="summary"></a>요약

비즈니스 요구 사항에 기반한 설정을 사용하여 저장소 계정을 만들었습니다. 예를 들어 고객이 주로 남부 캘리포니아에 있기 때문에 미국 서부 데이터 센터를 선택했습니다. 일반적인 흐름은 다음과 같습니다. 먼저 데이터 및 목표를 분석한 다음, 맞는 저장소 계정 옵션을 구성합니다.