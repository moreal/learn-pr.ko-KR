백업은 영구적인 데이터 손실로부터 보호하는 가장 강력한 최종 방어선입니다. 효과적인 백업 전략에는 단순한 데이터 사본 작성 이상이 요구되며 응용 프로그램의 데이터 아키텍처와 인프라를 반영할 필요가 있습니다. 앱은 중요한 정도가 각기 다른 여러 데이터를 관리하고, 클라우드와 온-프레미스 모두에 걸친 파일 시스템, 데이터베이스 및 기타 저장소 서비스 간에 분산되었을 수 있습니다. 이 작업에 적합한 서비스와 제품을 사용하면 백업 프로세스를 간소화하고 백업을 복원해야 할 때 복구 시간을 단축할 수 있습니다.

## <a name="establish-backup-and-restoration-requirements"></a>백업 및 복원 요구 사항 설정

재해 복구 전략을 진행하면서 백업 요구 사항은 비용 효과 분석을 기준으로 합니다. 앱 데이터 분석은 앱이 관리하는 데이터의 다양한 범주의 상대적 중요도와, 데이터 보존 법률 같은 외부 요구 사항에 따라 진행되어야 합니다.

앱에 대한 백업 요구 사항을 수립하려면 응용 프로그램 데이터를 사용하여 분석을 수행하여 다음 요구 사항에 따라 그룹화합니다.

* 손실을 감당할 수 있는 이 유형의 데이터 크기(기간 단위)
* 이런 유형의 데이터 복원에 필요한 최대 시간
* 백업 보존 요구 사항, 백업이 사용 가능한 상태로 있어야 하는 기간 및 주기

이러한 개념은 RPO(복구 시점 목표) 및 RTO(복구 시간 목표) 개념과 밀접히 연결됩니다. 용인 가능한 손실 길이는 일반적으로 필요한 백업 간격 및 RPO로 직접 연결됩니다. 최대 복원 소요 시간은 응용 프로그램의 데이터 구성 요소에 대한 RTO에 해당합니다. 두 요구 사항은 달성을 위한 비용을 고려하여 개발되어야 합니다. 모든 조직은 *어떤* 데이터도 잃을 수 없다고 말하겠지만 그 요구 사항의 달성 비용을 고려하면 그렇지 않은 경우가 많이 있습니다.

백업은 DR(재해 복구)에서 중대한 역할을 하지만 백업, 복원 및 관련 시나리오는 DR의 범위를 넘어섭니다. RTO와 RPO과 큰 관심사가 아닌 경우 등, 비 재해 복구 상황에서 백업을 복원해야 할 수 있습니다. 예를 들어, 백업 간격보다 오래된 약간의 데이터가 손상 또는 삭제되었으나 응용 프로그램에서 가동 중지 시간이 발생하지 않은 경우 응용 프로그램에서 SLA를 위반할 위험이 없고 복원에 성공하면 데이터 손실이 발생하지 않을 수 있습니다. 재해 복구 계획에서 비 재해 상황에서의 복원 수행에 대한 지침을 포함하거나 포함하지 않을 수 있습니다.

> [!TIP]
> *보관*, *복제* 및 *백업*을 혼동해서는 안 됩니다. 보관은 장기 보존 및 읽기 액세스를 위한 데이터 저장소이며 복제는 고가용성 및 특정 재해 복구 시나리오를 지원하기 위해 복제본 간의 거의 실시간에 근접한 데이터 복사를 말합니다. 데이터 보존 법률 등, 일부 요구 사항은 이 세 가지 모두의 전략에 영향을 미칠 수 있으나 보관, 복제 및 백업 모두 별도의 분석과 구현이 필요합니다.

## <a name="azure-backup-and-restore-capabilities"></a>Azure 백업 및 복원 기능

Azure는 온-프레미스 데이터뿐 아니라 Azure의 데이터를 포함하여 다양한 시나리오에서 몇 가지 백업 관련 서비스와 기능을 제공합니다. 대부분의 Azure 서비스는 어떤 종류의 백업 기능을 제공합니다. 여기에서는 가장 인기 있는 백업 관련 Azure 제품 몇 가지를 살펴봅니다.

### <a name="azure-backup"></a>Azure Backup

Azure Backup은 저장 및 복구를 위해 Azure Recovery Services 자격 증명 모음에 데이터를 백업하는 백업 제품군입니다. Recovery Service 자격 증명 모음은 가상 머신, 서버 및 개별 워크스테이션과 워크로드에 대한 데이터와 구성 백업 보관을 전담하는 Azure의 저장소 리소스입니다.

> [!NOTE]
> Azure Backup과 Azure Site Recovery 모두 저장소에 Azure Recovery Service 자격 증명 모음을 사용합니다. Azure Backup은 범용 백업 솔루션이며 Azure Site Recovery는 복제 및 장애 조치(failover)를 조정하고 낮은 RPO 및 RTO 재해 복구 작업을 지원할 수 있습니다.

Azure Backup은 VM이나 물리적 서버에서 실행되는 클라우드와 온-프레미스 워크플로에 대한 범용 백업 솔루션 역할을 합니다. 보관 테이프나 기타 로컬 물리적 장치 대신 Azure에 데이터를 저장하는 전통적 백업 솔루션을 그대로 대체하도록 설계되었습니다.

다음 4가지 제품 및 서비스가 Azure Backup을 사용하여 백업을 만듭니다.

* **Azure Backup Agent**는 설치된 Windows VM 또는 서버에서 파일, 폴더 및 시스템 상태를 백업하는 소규모 Windows 응용 프로그램입니다. 여러 개인 사용자용 클라우드 기반 백업 솔루션과 유사하게 작동하나 Azure Recovery 자격 증명 모음 구성이 필요합니다. 다운로드하여 Windows 서버나 VM에 설치하면 최대 하루 3회 백업을 만들도록 구성할 수 있습니다.
* **System Center Data Protection Manager**는 강력하고 기능이 풍부한 엔터프라이즈급 백업 및 복구 시스템입니다. DPM은 파일 시스템과 가상 머신(Windows 및 Linux)을 백업하고, 물리적 서버의 완전한 백업을 만들며, SQL Server 및 Exchange 등과 같은 여러 Microsoft 서버 제품의 응용 프로그램 인지 백업을 수행할 수 있는 Windows Server 응용 프로그램입니다. DPM은 System Center 제품군이며 System Center와 함께 판매되고 라이선스가 부여되지만 Azure Recovery자격 증명 모음에서 백업을 저장할 수 있기 때문에 Azure Backup 제품군으로 간주됩니다.
* **Azure Backup Server**는 System Center DPM과 유사하나, Azure 구독의 일부로 라이선스가 부여되며 System Center 라이선스가 필요하지 않습니다. Azure Backup Server는 로컬 테이프 백업과 타 System Center 제품 통합을 제외하고는 DPM처럼 작동합니다.
* **Azure IaaS VM Backup**은 Azure Virtual Machines의 턴키 방식 백업 및 복원 기능입니다. VM 백업은 Windows 및 Linux 가상 머신의 1일 1회 백업을 지원합니다. 개별 파일, 전체 디스크, 전체 VM의 복구를 지원하며 응용 프로그램 인식 백업도 수행할 수 있습니다. 스냅숏 작성 전에 개별 응용 프로그램이 백업 작업을 인지하고 파일 시스템 리소스를 일관된 상태로 유지하게 할 수 있습니다.

![Azure Backup](../media-draft/azure-backup.png)

Azure Backup은 값을 추가할 수 있고 사실상 모든 규모와 형태의 IaaS 및 온-프레미스 응용 프로그램에 대한 백업 및 복원 전략에 기여할 수 있습니다.

### <a name="azure-blob-storage"></a>Azure Blob 저장소

Azure Storage는 자동화된 백업 기능이 없지만 다양한 원본에서 모든 종류의 데이터를 백업하는 데 Blob가 널리 사용되고 있습니다. 백업 기능을 제공하는 많은 서비스가 Blob를 사용하여 데이터를 저장하며, Blob는 모든 종류의 백업 시나리오에서 스크립트 및 도구의 공통 대상입니다.

범용 v2 저장소 계정은 성능과 비용이 다양한 3가지 Blob 저장소 계층을 지원합니다. **쿨** 저장소는 **핫** 저장소와는 반대로 대부분의 백업에서 최적의 비용 대비 성능을 제공합니다. 핫 저장소는 액세스 비용은 낮으나 저장소 비용이 더 높습니다. 보조 백업이나 복구 시간 기대 수준이 낮은 데이터 백업에는 비용은 낮지만 액세스에 최대 15시간의 준비 시간이 필요한 **보관** 계층 저장소가 적합할 수 있습니다.

변경할 수 없는 Blob 저장소는 사용자 지정 간격 동안은 삭제 및 수정이 불가능하게 구성할 수 있습니다. 변경할 수 없는 Blob 저장소는 주로 금융 데이터 같은 특정 데이터의 까다로운 요구 사항을 이행하기 위해 설계되었으나, 우발적 삭제나 수정으로부터 백업을 보호하는 훌륭한 옵션입니다.

### <a name="azure-sql-database"></a>Azure SQL Database

Azure SQL Database에는 추가 비용 없이 종합적인 자동 백업 기능이 포함됩니다. 전체 백업은 매주 만들어지고 서로 다른 백업이 12시간마다 수행되며 로그 백업은 5분마다 만들어집니다. 서비스가 만든 백업을 사용하면 삭제된 경우에도 데이터베이스를 특정 지점으로 복원할 수 있습니다. Azure Portal, PowerShell 또는 REST API를 사용하여 복원을 수행할 수 있습니다. 기본적으로 활성화되는 TDE(투명한 데이터 암호화)로 암호화된 데이터베이스의 백업은 역시 암호화됩니다.

SQL Database 백업은 엔터프라이즈급으로, 프로덕션 환경용이며 기본적으로 활성화됩니다. 앱에 대해 다양한 데이터베이스 옵션을 평가하는 경우 비용 효과 분석에 포함되어야 합니다. 이 서비스의 중요한 장점이기 때문입니다.  Azure SQL Database를 사용하는 모든 앱은 재해 복구 계획과 백업/복원 절차에 포함하여 이를 활용해야 합니다.

### <a name="azure-app-service"></a>Azure App Service

Azure App Service의 표준 및 프리미엄 계층에서 호스트하는 웹 응용 프로그램은 턴키 방식의 예약 및 수동 백업을 지원합니다. 백업에는 앱에서 사용하는 데이터베이스의 콘텐츠 외에도 구성 및 파일 콘텐츠가 포함됩니다. 파일을 제외하기 위한 단순 필터도 지원됩니다. 복원 작업은 다양한 App Service 인스턴스를 대상으로 할 수 있으므로 App Service 백업이 한 앱의 콘텐츠를 다른 앱으로 백업하는 간단한 방법이 됩니다.

App Service 백업은 앱과 데이터베이스 콘텐츠를 포함하여 총 10GB로 제한됩니다. 개발 중인 새 앱과 소규모 앱에 적합한 솔루션입니다. 더 안정적인 응용 프로그램은 일반적으로 App Service 백업을 사용하지 않으며 그 대신 강력한 배포 및 롤백 절차, 응용 프로그램 디스크 저장소를 사용하지 않는 저장소 전략, 데이터베이스 및 영구 저장소에 대한 전용 백업 전략을 활용합니다.

## <a name="verify-backups-and-test-restore-procedures"></a>백업 확인 및 복원 절차 테스트

백업을 확인하고 복원 절차를 테스트하기 위한 전략이 없다면 어떤 백업 시스템도 완전하지 않습니다. 전용 백업 서비스 또는 제품을 사용하더라도 복구 절차를 제대로 이해하고 시스템을 예상되는 상태로 돌릴 수 있게 문서화하여 연습해야 합니다.

백업 확인 전략은 인프라의 특성에 따라 달라집니다. 새 응용 프로그램 배포 만들기, 백업으로 복원하기, 두 인스턴스 상태 비교 등과 같은 방법을 고려할 수도 있습니다. 많은 경우 여기서 실제 재해 복구 절차를 밀접하게 모방합니다. 단순히 백업을 만든 직후 실제 데이터로 백업 데이터의 하위 집합을 비교하는 것이면 충분합니다. 백업 확인의 일반적인 구성 요소는 구 백업 복원을 시도하여 구 백업이 계속 사용 가능하며 작동하도록 하고 백업 시스템이 호환되지 않게 렌더링되는 방식으로 변경되지 않게 하는 것입니다.

어떤 전략도 재해 복구를 시도하면서 백업이 손상되었거나 호환되지 않는 것을 알게 되는 것보다는 낫습니다.

백업 및 복원 전략은 아키텍처가 데이터 손실이나 손상으로부터 복구할 수 있도록 하는 데 중요한 부분입니다. 아키텍처를 검토하여 백업 및 복원 요구 사항을 정의합니다. Azure는 모든 아키텍처에 백업 및 복원 기능을 제공하기 위한 여러 서비스와 기능을 제공합니다.
