<span data-ttu-id="177a8-101">작성하는 다른 응용 프로그램 코드와 마찬가지로, 봇 코드에 대한 변경 사항도 프로덕션에 배포하기 전에 로컬에서 테스트하고 디버깅해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-101">As with any application code that you write, changes to bot code need to be tested and debugged locally before being deployed to production.</span></span> <span data-ttu-id="177a8-102">봇을 디버그하는 데 도움이 되도록 Microsoft는 [Bot Framework Emulator](https://emulator.botframework.com/)를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-102">To help debug bots, Microsoft offers the [Bot Framework Emulator](https://emulator.botframework.com/).</span></span> <span data-ttu-id="177a8-103">이 단원에서는 Visual Studio Code와 에뮬레이터를 사용하여 봇을 디버그하는 방법을 배웁니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-103">In this unit, you will learn how to use Visual Studio Code and the emulator to debug your bots.</span></span>

1. <span data-ttu-id="177a8-104">Microsoft Bot Framework Emulator가 설치되어 있지 않은 경우 지금 시간을 내 설치하세요.</span><span class="sxs-lookup"><span data-stu-id="177a8-104">If you haven't installed the Microsoft Bot Framework Emulator, take a moment to do so now.</span></span> <span data-ttu-id="177a8-105">https://emulator.botframework.com/에서 다운로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-105">You can download it from https://emulator.botframework.com/.</span></span> <span data-ttu-id="177a8-106">Windows, macOS 및 Linux용 버전이 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-106">Versions are available for Windows, macOS, and Linux.</span></span>

1. <span data-ttu-id="177a8-107">Visual Studio Code의 통합 터미널에서 다음 명령을 실행하여 [Restify](http://restify.com/)를 설치합니다. 이것은 RESTful 웹 서비스를 빌드하고 사용하는 데 많이 사용되는 Node.js 패키지입니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-107">Execute the following command in Visual Studio Code's integrated terminal to install [Restify](http://restify.com/), a popular Node.js package for building and consuming RESTful web services:</span></span>

    ```
    npm install restify
    ```

1. <span data-ttu-id="177a8-108">다음 명령에 대해 이 단계를 반복하여 [Node.js용 Microsoft Bot Framework Bot Builder SDK](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart)를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-108">Repeat this step for the following commands to install the [Microsoft Bot Framework Bot Builder SDK for Node.js](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart):</span></span>

    ```
    npm install botbuilder
    npm install botbuilder-azure
    npm install botbuilder-cognitiveservices
    ```

1. <span data-ttu-id="177a8-109">Visual Studio Code 작업 막대에서 **탐색기** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-109">Click the **Explorer** button in Visual Studio Code's activity bar.</span></span> <span data-ttu-id="177a8-110">그런 다음, **app.js**를 선택하여 코드 편집기에서 엽니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-110">Then, select **app.js** to open it in the code editor.</span></span> <span data-ttu-id="177a8-111">이 파일에는 봇을 구동하는 코드가 포함됩니다. 이것은 Azure Bot Service에 의해 생성되고 Azure Portal에서 다운로드된 코드입니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-111">This file contains the code that drives the bot — code that was generated by the Azure Bot Service and downloaded from the Azure portal.</span></span>

    ![app.js 열기](../media-draft/5-vs-select-index-js.png)

1. <span data-ttu-id="177a8-113">**app.js**의 콘텐츠를 다음 코드로 바꾸고 파일을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-113">Replace the contents of **app.js** with the following code, and then save the file.</span></span>

    ```JavaScript
    "use strict";
    var builder = require("botbuilder");
    var botbuilder_azure = require("botbuilder-azure");
    
    var useEmulator = true; 
    var userName = ""; 
    var yearsCoding = ""; 
    var selectedLanguage = "";
    
    var connector = useEmulator ? new builder.ChatConnector() : new botbuilder_azure.BotServiceConnector({
        appId: process.env.MicrosoftAppId,
        appPassword: process.env.MicrosoftAppPassword      
    });
    
    var bot = new builder.UniversalBot(connector);
    
    bot.dialog('/', [
    
    function (session) {
        builder.Prompts.text(session, "Hello, and welcome to QnA Factbot! What's your name?");
    },
    
    function (session, results) {
        userName = results.response;
        builder.Prompts.number(session, "Hi " + userName + ", how many years have you been writing code?"); 
    },
    
    function (session, results) {
        yearsCoding = results.response;
        builder.Prompts.choice(session, "What language do you love the most?", ["C#", "Python", "Node.js", "Visual FoxPro"]);
    },
    
    function (session, results) {
        selectedLanguage = results.response.entity;   
    
        session.send("Okay, " + userName + ", I think I've got it:" +
                    " You've been writing code for " + yearsCoding + " years," +
                    " and prefer to use " + selectedLanguage + ".");
    }]);
     
    var restify = require('restify');
    var server = restify.createServer();

    server.listen(3978, function() {
        console.log('test bot endpoint at http://localhost:3978/api/messages');
    });

    server.post('/api/messages', connector.listen());    
    ```

1. <span data-ttu-id="177a8-114">왼쪽 여백을 클릭하여 20, 25 및 30행에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-114">Set breakpoints on lines 20, 25, and 30 by clicking in the margin on the left.</span></span>
 
    ![app.js에 중단점 추가](../media-draft/5-vs-add-breakpoints.png)

1. <span data-ttu-id="177a8-116">작업 막대에서 **디버그** 단추를 클릭한 후 초록색 화살표를 클릭하여 디버깅 세션을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-116">Click the **Debug** button in the activity bar, and then click the green arrow to start a debugging session.</span></span> <span data-ttu-id="177a8-117">디버그 콘솔에 “http://localhost:3978/api/messages의 봇 엔드포인트 테스트”가 표시되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-117">Confirm that "test bot endpoint at http://localhost:3978/api/messages" appears in the debug console.</span></span>
 
    ![디버거 시작](../media-draft/5-vs-launch-debugger.png)

1. <span data-ttu-id="177a8-119">이제 봇 코드가 로컬에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-119">Your bot code is now running locally.</span></span> <span data-ttu-id="177a8-120">Bot Framework Emulator를 시작하고 **새 봇 구성 만들기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-120">Launch the Bot Framework Emulator and click **Create a new bot configuration**.</span></span> <span data-ttu-id="177a8-121">이전 단계의 디버그 콘솔에 표시된 봇 이름과 봇 URL을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-121">Enter the bot name and the bot URL displayed in the debug console in the previous step.</span></span> <span data-ttu-id="177a8-122">그런 다음, **저장 및 연결**을 클릭하고 원하는 위치에 구성 파일을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-122">Then, click **Save and connect** and save the configuration file in the location of your choice.</span></span>

    > <span data-ttu-id="177a8-123">나중에 “My Bots”(내 봇)에서 봇 이름을 클릭하면 봇에 다시 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-123">In the future, you can reconnect to the bot simply by clicking the bot name under "My Bots".</span></span>

    ![봇에 연결](../media-draft/5-new-bot-configuration.png)

1. <span data-ttu-id="177a8-125">에뮬레이터 아래쪽의 상자에 “hi”를 입력하고 **Enter** 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-125">Type "hi" into the box at the bottom of the emulator and press **Enter**.</span></span> <span data-ttu-id="177a8-126">Visual Studio Code가 **app.js**의 20행에서 중단되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-126">Confirm that Visual Studio Code breaks on line 20 of **app.js**.</span></span> <span data-ttu-id="177a8-127">그런 다음, Visual Studio Code의 디버깅 도구 모음에서 **계속** 단추를 클릭하고 에뮬레이터로 돌아가서 봇의 응답을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-127">Then, click the **Continue** button in Visual Studio Code's debugging toolbar and return to the emulator to see the bot's response.</span></span>
 
    ![디버거에서 계속하기](../media-draft/5-continue-debugging.png)

1. <span data-ttu-id="177a8-129">봇이 일련의 질문을 합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-129">The bot will ask you a series of questions.</span></span> <span data-ttu-id="177a8-130">질문에 답하고 중단점에 도달할 때마다 Visual Studio Code에서 **계속**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-130">Answer them and click **Continue** in Visual Studio Code each time a breakpoint is hit.</span></span> <span data-ttu-id="177a8-131">완료되면 디버깅 도구 모음에서 **중지** 단추를 클릭하여 디버깅 세션을 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-131">When you're done, click the **Stop** button in the debugging toolbar to end the debugging session.</span></span>

<span data-ttu-id="177a8-132">이제 봇은 완벽하게 작동하고, Microsoft Bot Framework Emulator에서 봇을 로컬로 실행하여 디버깅하는 방법을 압니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-132">At this point, you have a fully functioning bot and know how to debug it by running it locally in the Microsoft Bot Framework Emulator.</span></span> <span data-ttu-id="177a8-133">다음 단계에서는 게시한 기술 자료에 봇을 연결하여 더욱 지능적인 봇을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="177a8-133">The next step is to make the bot more intelligent by connecting it to the knowledge base you published.</span></span>