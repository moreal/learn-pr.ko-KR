서비스 회사의 성공은 종종 회사와 고객이 체결한 SLA(서비스 수준 계약)와 직접 관련이 있습니다. 고객은 제공되는 서비스를 항상 사용할 수 있고 데이터를 안전하게 유지할 수 있기를 기대합니다. 이것은 Microsoft에서 매우 진지하게 생각하는 것입니다. Azure는 가용성, 데이터 보안 및 모니터링을 관리하는 데 사용할 수 있는 도구를 제공하므로 고객은 언제든지 서비스를 사용할 수 있습니다.

Azure VM 관리는 VM에서 실행되는 운영 체제 또는 소프트웨어 관리에만 국한되지 않습니다. Azure에서 서비스 가용성을 보장하고 자동화를 지원하기 위해 제공하는 서비스를 파악하는 데 도움이 됩니다. 이러한 서비스는 조직의 비즈니스 연속성 및 재해 복구 전략을 계획하는 데 도움이 됩니다.

여기서는 VM 가용성을 향상시키고, VM 관리 작업을 간소화하고, VM 데이터를 백업하고 안전하게 유지하는 데 도움이 되는 Azure 서비스에 대해 설명합니다. 가장 먼저 가용성을 정의하겠습니다.

## <a name="what-is-availability"></a>가용성이란?

가용성은 서비스를 사용할 수 있는 시간의 백분율입니다.

웹 사이트가 있고 고객이 항상 정보에 액세스할 수 있기를 원한다고 가정해 보겠습니다. 웹 사이트 액세스와 관련하여 100% 가용성을 기대할 것입니다.

### <a name="why-do-i-need-to-think-about-availability-when-using-azure"></a>Azure를 사용하는 경우 가용성을 고려해야 하나요?

Azure VM은 Microsoft의 데이터 센터 내에서 호스트되는 물리적 서버에서 실행됩니다. 대부분의 물리적 장치와 마찬가지로 오류가 발생할 수 있습니다. 물리적 서버가 실패하면 해당 서버에 호스트되는 가상 머신도 실패합니다. 이 경우 Azure는 VM을 정상 호스트 서버로 자동으로 이동시킵니다. 그러나 이 자동 복구 마이그레이션에는 몇 분이 걸릴 수 있으며, 그 동안 해당 VM에서 호스팅되는 응용 프로그램을 사용할 수 없습니다.

또한 VM은 Azure 자체에서 시작된 정기적인 업데이트로 인해 영향을 받을 수도 있습니다. 이러한 유지 관리 이벤트는 소프트웨어 업데이트에서 하드웨어 업그레이드에 이르기까지 다양하며, 플랫폼 안정성 및 성능을 향상시키는 데 필요합니다. 이러한 이벤트는 일반적으로 게스트 VM에 영향을 주지 않고 수행되지만, 업데이트 또는 업그레이드를 완료하기 위해 가상 머신이 다시 부팅되는 경우도 있습니다.

> [!NOTE]
> Microsoft는 VM OS 또는 소프트웨어를 자동으로 업데이트하지 않습니다. 이러한 작업은 전적으로 사용자의 제어와 책임 하에 수행됩니다. 그러나 기본 소프트웨어 호스트 및 하드웨어는 항상 안정성과 고성능을 보장하기 위해 정기적으로 패치됩니다.

서비스가 중단되지 않고 단일 실패 지점을 방지하려면 각 VM의 인스턴스를 둘 이상 배포하는 것이 좋습니다. 이 기능을 _가용성 집합_이라고 합니다.

### <a name="what-is-an-availability-set"></a>가용성 집합이란?

**가용성 집합**은 관련된 VM 그룹을 배포하여 데이터 센터에서 호스트 운영 체제를 업그레이드하는 동안 이러한 VM이 모두 단일 실패 지점의 영향을 받지 않고 동시에 업그레이드되지 않도록 하는 데 사용되는 논리적 기능입니다. 가용성 집합에 배치된 VM은 동일한 기능 집합을 수행하고 동일한 소프트웨어를 설치해야 합니다.

> [!TIP]
> Microsoft는 가용성 집합에 배포된 다중 인스턴스 VM에 대해 99.95% 외부 연결 SLA(서비스 수준 계약)를 제공합니다. 즉 SLA를 적용하려면 가용성 집합 내에 VM의 인스턴스가 둘 이상 배포되어야 합니다. 

재해 복구 섹션에서 Azure Portal을 통해 가용성 집합을 만들 수 있습니다. 또한 Resource Manager 템플릿이나 스크립팅 또는 API 도구를 사용하여 가용성 집합을 작성할 수 있습니다. VM을 가용성 집합에 배치하면 Azure는 VM이 **장애 도메인** 및 **업데이트 도메인**에 분산되도록 보장합니다.

#### <a name="what-is-a-fault-domain"></a>장애 도메인이란?

장애 도메인은 공통 전원과 네트워크 스위치를 공유하는 Azure의 하드웨어 논리 그룹입니다. 온-프레미스 데이터 센터 내의 랙으로 생각하시면 됩니다. 가용성 집합의 처음 두 VM은 서로 다른 두 개의 랙에 프로비전되므로 랙에서 네트워크 또는 전원 오류가 발생하면 하나의 VM만 영향을 받습니다. 또한 장애 도메인은 VM에 연결된 관리 디스크에 대해서도 정의됩니다.

![장애 도메인](../media/5-fault-domains.png)

#### <a name="what-is-an-update-domain"></a>업데이트 도메인이란?

업데이트 도메인은 유지 관리를 수행하거나 동시에 다시 부팅할 수 있는 하드웨어의 논리 그룹입니다. Azure는 Azure 플랫폼에서 호스트 운영 체제 변경을 도입할 때 미치는 영향을 최소화하기 위해 가용성 집합을 업데이트 도메인에 자동으로 배치합니다. 그런 다음, Azure에서 각 업데이트 도메인을 한 번에 하나씩 처리합니다.

가용성 집합은 고객이 VM에서 실행되는 서비스를 항상 사용할 수 있도록 하는 강력한 기능입니다. 그러나 누구나 사용할 수 있는 것은 아닙니다. VM 자체에서 실행되는 데이터 또는 소프트웨어에 문제가 발생하면 어떻게 해야 할까요? 이 경우 다른 재해 복구 및 백업 기술을 살펴볼 필요가 있습니다.

## <a name="failover-across-locations"></a>위치 간 장애 조치(failover)

사이트 간에 인프라를 복제하여 지역별 장애 조치(failover)를 처리할 수도 있습니다. **Azure Site Recovery**는 워크로드를 주 사이트에서 보조 사이트로 복제합니다. 주 사이트에서 중단이 발생하면 보조 위치로 장애 조치(failover)할 수 있습니다. 이 장애 조치를 통해 사용자는 중단 없이 응용 프로그램에 계속 액세스할 수 있습니다. 그런 다음, 응용 프로그램이 다시 실행되면 기본 위치로 장애 복구될 수 있습니다. Azure Site Recovery는 가상 머신 또는 물리적 머신의 복제에 관한 것으로, 가동 중단 중에도 워크로드를 사용할 수 있도록 유지합니다.

Site Recovery에는 매력적인 많은 기술적 기능이 있지만, 적어도 두 가지 중요한 비즈니스 이점이 있습니다.

1. Site Recovery를 사용하면 Azure를 복구 대상으로 사용할 수 있으므로 보조 물리적 데이터 센터의 유지 관리에 따른 비용과 복잡성을 없앨 수 있습니다.

2. Site Recovery를 사용하면 프로덕션 환경에 영향을 주지 않고 복구 훈련을 위한 장애 조치(failover)를 매우 간단하게 테스트할 수 있습니다. 이렇게 하면 계획되었거나 계획되지 않은 장애 조치를 쉽게 테스트할 수 있습니다. 요컨대 장애 조치를 시도한 적이 없으면 적절한 재해 복구 계획이 없는 것입니다.

Site Recovery를 사용하여 만든 복구 계획은 시나리오에 필요한 만큼 간단하거나 복잡할 수 있습니다. 여기에는 사용자 지정 PowerShell 스크립트, Azure Automation Runbook 또는 수동 개입 단계가 포함될 수 있습니다. 복구 계획을 활용하여 워크로드를 Azure로 복제하여 마이그레이션, 서지 기간 동안의 임시 버스트 또는 새 응용 프로그램 개발 및 테스트에 대한 새로운 기회를 손쉽게 수행할 수 있습니다.

Azure Site Recovery는 온-프레미스 인프라에서 Azure 리소스 또는 Hyper-V, VMware 및 실제 서버와 함께 작동하며, 기본 위치가 실패하는 경우 워크로드 및 응용 프로그램의 복제, 장애 조치(failover) 및 복구를 오케스트레이션함으로써 조직의 BCDR(비즈니스 연속성 및 재해 복구) 전략의 핵심 요소가 될 수 있습니다.
