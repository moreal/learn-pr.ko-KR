<span data-ttu-id="2f444-101">Azure IoT Hub에서 Raspberry Pi 처럼 IoT 장치 데이터를 수집 하는 방법을 이해 했으므로 진행할 수 있습니다 이제 뿐만 아니라 해당 데이터를 보낼 다른 IoT 장치를 프로 비전 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-101">Now that you have an understanding of how Azure IoT Hub collects data from IoT devices such as the Raspberry Pi you can now move forward to provision other IoT devices to send their data as well.</span></span> <span data-ttu-id="2f444-102">작은 프로젝트 (1-5 개 장치)에서 IoT 장치 설정을 완료 1:1 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-102">Completing setup of IoT devices in a small project (1-5 devices) can be done 1 to 1.</span></span> <span data-ttu-id="2f444-103">대규모 배포의 프로 비전을 위한 더 나은 메서드를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-103">Larger deployments would require a better method for provisioning.</span></span>

<span data-ttu-id="2f444-104">Azure IoT Hub Device Provisioning Service를 Azure IoT Hub에 무인 장치 프로 비전을 구성 하는 고객 있으며 던 긴 하나 타임 프로세스를 한 번에 클라우드의 확장성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-104">Azure IoT Hub Device Provisioning Service enables customers to configure zero-touch device provisioning to Azure IoT Hub, and it brings the scalability of the cloud to what was once a lengthy one-at-a-time process.</span></span> <span data-ttu-id="2f444-105">프로세스는 안전 하 고 확장 가능한 방식으로 장치 수백만 프로 비전 하는 데 필요한 인프라를 제공 합니다. 따라서에서 공급망의 과제를 사용 하 여 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-105">The process was designed with the challenges of the supply chain in mind, providing the infrastructure needed to provision millions of devices in a secure and scalable manner.</span></span>

<span data-ttu-id="2f444-106">이제 Device Provisioning Service를 사용 하 여 자동 장치 프로 비전는 IoT Hub에서 지 원하는 HTTP, AMQP, MQTT, AMQP 비롯 하 여 MQTT 및 websocket을 통해 websocket을 통한 모든 프로토콜을 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-106">Automatic device provisioning with the Device Provisioning Service now supports all protocols that IoT Hub supports including HTTP, AMQP, MQTT, AMQP over websockets, and MQTT over websockets.</span></span> <span data-ttu-id="2f444-107">이 릴리스에 또한 장치 및 클라이언트 쪽 확장된 SDK 언어 지원에 해당 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-107">This release also corresponds to expanded SDK language support for both the device and client side.</span></span>

## <a name="link-the-device-provisioning-service-to-an-iot-hub"></a><span data-ttu-id="2f444-108">IoT Hub에 Device Provisioning Service 연결</span><span class="sxs-lookup"><span data-stu-id="2f444-108">Link the Device Provisioning Service to an IoT hub</span></span>

<span data-ttu-id="2f444-109">다음 단계는 IoT Hub Device Provisioning Service가 장치를 해당 허브에 연결할 수 있도록 Device Provisioning Service와 IoT Hub를 연결하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-109">The next step is to link the Device Provisioning Service and IoT hub so that the IoT Hub Device Provisioning Service can register devices to that hub.</span></span> <span data-ttu-id="2f444-110">서비스는 장치를 Device Provisioning Service에 연결된 IoT Hub에만 프로비전할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-110">The service can only provision devices to IoT hubs that have been linked to the Device Provisioning Service.</span></span> <span data-ttu-id="2f444-111">다음 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-111">Follow these steps.</span></span>

1.  <span data-ttu-id="2f444-112">에 **모든 리소스** Azure 포털에서 페이지에서 이전에 만든 Device Provisioning Service 인스턴스를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-112">In the **All resources** page on the Azure portal, click the Device Provisioning Service instance you created previously.</span></span>

2.  <span data-ttu-id="2f444-113">Device Provisioning Service 페이지에서 **연결된 IoT Hub**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-113">In the Device Provisioning Service page, click **Linked IoT hubs**.</span></span>

3.  <span data-ttu-id="2f444-114">**추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-114">Click **Add**.</span></span>

4.  <span data-ttu-id="2f444-115">**IoT Hub에 대한 연결 추가** 페이지에서 다음 정보를 입력하고 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-115">In the **Add link to IoT hub** page, provide the following information, and click **Save**:</span></span>

    - <span data-ttu-id="2f444-116">**구독:** IoT Hub를 포함하는 구독을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-116">**Subscription:** Make sure the subscription that contains the IoT hub is selected.</span></span> <span data-ttu-id="2f444-117">다른 구독에 상주하는 IoT Hub에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-117">You can link to IoT hub that resides in a different subscription.</span></span>

    - <span data-ttu-id="2f444-118">**IoT Hub:** 이 Device Provisioning Service 인스턴스와 연결할 IoT Hub 이름을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-118">**IoT hub:** Choose the name of the IoT hub that you want to link with this Device Provisioning Service instance.</span></span>

    - <span data-ttu-id="2f444-119">**액세스 정책:** IoT Hub에 연결하는 데 사용할 자격 증명으로 **iothubowner**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-119">**Access Policy:** Select **iothubowner** as the credentials to use for establishing the link to the IoT hub.</span></span>

![포털에서 DPS에 연결할 허브 이름 연결](../media-draft/ee6e78754a1d39d86de71fb6872723f3.png)

## <a name="set-the-allocation-policy-on-the-device-provisioning-service"></a><span data-ttu-id="2f444-121">Device Provisioning Service에서 할당 정책 설정</span><span class="sxs-lookup"><span data-stu-id="2f444-121">Set the allocation policy on the Device Provisioning Service</span></span>

<span data-ttu-id="2f444-122">할당 정책은 IoT Hub에 장치를 할당하는 방법을 결정하는 IoT Hub Device Provisioning Service 설정입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-122">The allocation policy is a IoT Hub Device Provisioning Service setting that determines how devices are assigned to an IoT hub.</span></span> <span data-ttu-id="2f444-123">세 가지의 지원되는 할당 정책이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-123">There are three supported allocation policies:</span></span>

1. <span data-ttu-id="2f444-124">**최소 대기 시간**: 장치가 대기 시간이 가장 낮은 허브를 기준으로 IoT Hub에 프로비전됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-124">**Lowest latency**: Devices are provisioned to an IoT hub based on the hub with the lowest latency to the device.</span></span>

2. <span data-ttu-id="2f444-125">**균등 가중치 배포**(기본값): 연결된 IoT Hub들은 동일하게 해당 허브에 프로비전된 장치를 갖게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-125">**Evenly weighted distribution** (default): Linked IoT hubs are equally likely to have devices provisioned to them.</span></span> <span data-ttu-id="2f444-126">이 설정은 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-126">This setting is the default.</span></span> <span data-ttu-id="2f444-127">장치를 단 하나의 IoT Hub에 프로비전하려는 경우 이 설정을 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-127">If you are provisioning devices to only one IoT hub, you can keep this setting.</span></span>

3. <span data-ttu-id="2f444-128">**등록 목록을 통한 고정 구성**: 등록 목록에서 원하는 IoT Hub의 사양을 Device Provisioning Service 수준 할당 정책보다 우선합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-128">**Static configuration via the enrollment list**: Specification of the desired IoT hub in the enrollment list takes priority over the Device Provisioning Service-level allocation policy.</span></span>

<span data-ttu-id="2f444-129">할당 정책을 설정하려면 Device Provisioning Service 페이지에서 **할당 정책 관리**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-129">To set the allocation policy, in the Device Provisioning Service page click **Manage allocation policy**.</span></span> <span data-ttu-id="2f444-130">할당 정책이 **균등 가중치 배포**(기본값)로 설정되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-130">Make sure the allocation policy is set to **Evenly weighted distribution** (the default).</span></span> <span data-ttu-id="2f444-131">변경하려면 변경 후 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-131">If you make any changes, click **Save** when you are done.</span></span>

![할당 정책 관리](../media-draft/0c5fa5193156f17b4f5d64aab65a414d.png)

## <a name="enroll-the-device"></a><span data-ttu-id="2f444-133">장치 등록</span><span class="sxs-lookup"><span data-stu-id="2f444-133">Enroll the device</span></span>

<span data-ttu-id="2f444-134">이 단계에서는 Device Provisioning Service에 장치의 고유 보안 아티팩트를 추가하는 것이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-134">This step involves adding the device's unique security artifacts to the Device Provisioning Service.</span></span> <span data-ttu-id="2f444-135">이러한 보안 아티팩트는 다음과 같은 장치의 [증명 메커니즘](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism)을 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-135">These security artifacts are based on the device's [Attestation mechanism](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism) as follows:</span></span>

<span data-ttu-id="2f444-136">TPM 기반 장치의 경우 다음과 같은 항목이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-136">For TPM-based devices you need:</span></span>

- <span data-ttu-id="2f444-137">TPM 칩 제조업체에서 얻은 각 TPM 칩 또는 시뮬레이션에 고유한 *인증 키*.</span><span class="sxs-lookup"><span data-stu-id="2f444-137">The *Endorsement Key* that is unique to each TPM chip or simulation, which is obtained from the TPM chip manufacturer.</span></span> <span data-ttu-id="2f444-138">자세한 정보는 [TPM 인증 키 이해](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology)를 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="2f444-138">Read the [Understand TPM Endorsement Key](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology) for more information.</span></span>

- <span data-ttu-id="2f444-139">네임스페이스/범위에서 장치를 고유하게 식별하는 데 사용되는 *등록 ID*입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-139">The *Registration ID* that is used to uniquely identify a device in the namespace/scope.</span></span> <span data-ttu-id="2f444-140">이 ID는 장치 ID와 같을 수도 있고 다를 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-140">This ID may or may not be the same as the device ID.</span></span> <span data-ttu-id="2f444-141">ID는 모든 장치에 필수입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-141">The ID is mandatory for every device.</span></span> <span data-ttu-id="2f444-142">TPM 기반 장치의 경우 등록 ID는 TPM 인증 키의 SHA-256 해시와 같이 TPM 자체에서 파생될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-142">For TPM-based devices, the registration ID may be derived from the TPM itself, for example, an SHA-256 hash of the TPM Endorsement Key.</span></span>

![포털에서 TPM에 대한 등록 정보](../media-draft/11db90b7128e1cf222a4da45de7cbac8.png)

<span data-ttu-id="2f444-144">X.509 기반 장치의 경우 다음과 같은 항목이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-144">For X.509 based devices you need:</span></span>

- <span data-ttu-id="2f444-145">[X.509에 발급된 인증서](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates) 칩 또는 시뮬레이션입니다. 형식은 *.pem* 또는 *.cer* 파일 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-145">The [certificate issued to the X.509](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates) chip or simulation, in the form of either a *.pem* or a *.cer* file.</span></span> <span data-ttu-id="2f444-146">개별 등록에 대 한 장치 단위를 사용 해야 *서명자 인증서* X.509 시스템에 대 한 등록 그룹을 사용 해야 합니다 *루트 인증서*합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-146">For individual enrollment, you need to use the per-device *signer         certificate* for your X.509 system, while for enrollment groups, you need to use the *root certificate*.</span></span>

   ![포털에서 X.509 증명에 대 한 개별 등록 추가](../media-draft/8d56752f453f27e55dd15b7c894ae406.png)

<span data-ttu-id="2f444-148">Device Provisioning Service에 장치를 등록하는 방법은 두 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-148">There are two ways to enroll the device to the Device Provisioning Service:</span></span>

- <span data-ttu-id="2f444-149">**등록 그룹** 특정 증명 메커니즘을 공유하는 장치의 그룹을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-149">**Enrollment Groups** This represents a group of devices that share a specific attestation mechanism.</span></span> <span data-ttu-id="2f444-150">원하는 초기 구성을 공유하는 장치 수가 많은 경우 또는 장치가 모두 동일한 테넌트로 이동하는 경우 등록 그룹을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-150">We recommend using an enrollment group for a large number of devices, which share a desired initial configuration, or for devices all going to the same tenant.</span></span> <span data-ttu-id="2f444-151">등록 그룹의 Id 증명에 대한 자세한 내용은 [보안](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="2f444-151">For more information on Identity attestation for enrollment groups, see [Security](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates).</span></span>

   ![포털에서 X.509 증명에 대 한 그룹 등록 추가](../media-draft/4a9d9ea822887c70f1ff1e4b64b138f1.png)

- <span data-ttu-id="2f444-153">**개별 등록** Device Provisioning Service에 등록할 수도 있는 단일 장치에 대한 항목을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-153">**Individual Enrollments** This represents an entry for a single device that may register with the Device Provisioning Service.</span></span> <span data-ttu-id="2f444-154">개별 등록은 증명 메커니즘으로 x509 인증서 또는 SAS 토큰(실제 또는 가상 TPM) 중 하나를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-154">Individual enrollments may use either x509 certificates or SAS tokens (in a real or virtual TPM) as attestation mechanisms.</span></span> <span data-ttu-id="2f444-155">고유한 초기 구성이 필요한 장치 및 증명 메커니즘으로 TPM 또는 가상 TPM을 통해 SAS 토큰만을 사용할 수 있는 장치의 경우 개별 등록을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-155">We recommend using individual enrollments for devices that require unique initial configurations, and devices that can only use SAS tokens via TPM or virtual TPM as the attestation mechanism.</span></span> <span data-ttu-id="2f444-156">개별 등록에는 원하는 IoT Hub 장치 ID가 지정될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-156">Individual enrollments may have the desired IoT hub device ID specified.</span></span>

<span data-ttu-id="2f444-157">이제 장치의 증명 메커니즘에 따라 필요한 보안 아티팩트를 사용하여 장치를 Device Provisioning Service 인스턴스에 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-157">Now you enroll the device with your Device Provisioning Service instance, using the required security artifacts based on the device's attestation mechanism:</span></span>

1. <span data-ttu-id="2f444-158">Azure Portal에 로그인하고, 왼쪽 메뉴에서 **모든 리소스** 단추를 클릭하고, Device Provisioning Service를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-158">Sign in to the Azure portal, click on the **All resources** button on the left-hand menu and open your Device Provisioning service.</span></span>

2. <span data-ttu-id="2f444-159">Device Provisioning Service 요약 블레이드에서 **등록 관리**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-159">On the Device Provisioning Service summary blade, select **Manage enrollments**.</span></span> <span data-ttu-id="2f444-160">**개별 등록** 탭 또는 **등록 그룹** 탭 중 하나를 장치 설정에 따라 탭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-160">Select either **Individual Enrollments** tab or the **Enrollment Groups** tab as per your device setup.</span></span> <span data-ttu-id="2f444-161">위쪽에 있는 **추가** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-161">Click the **Add** button at the top.</span></span> <span data-ttu-id="2f444-162">선택 **TPM** 하거나 **X.509** id 증명으로 *메커니즘*, 앞에서 설명한 대로 적절 한 보안 아티팩트를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-162">Select **TPM** or **X.509** as the identity attestation *Mechanism*, and enter the appropriate security artifacts as discussed     previously.</span></span> <span data-ttu-id="2f444-163">새 **IoT Hub 장치 ID**를 입력할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-163">You may enter a new **IoT Hub device ID**.</span></span> <span data-ttu-id="2f444-164">완료되면 **저장** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-164">Once complete, click the **Save** button.</span></span>

3. <span data-ttu-id="2f444-165">장치를 성공적으로 등록하면 포털에 다음과 같은 화면이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-165">When the device is successfully enrolled, you should see it displayed in the portal as follows:</span></span>

![포털에서 성공적인 TPM 등록](../media-draft/cb277b2e5bc21cd02669775d536e89c0.png)

<span data-ttu-id="2f444-167">등록 후 프로비전 서비스는 향후 특정한 시점에 이러한 장치가 부팅 및 연결될 때까지 대기합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-167">After enrollment, the provisioning service then waits for the device to boot and connect with it at any later point in time.</span></span> <span data-ttu-id="2f444-168">장치를 처음으로 부팅하는 경우 클라이언트 SDK 라이브러리는 칩과 상호 작용하여 장치에서 보안 아티팩트를 추출하고, Device Provisioning Service에 등록을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-168">When your device boots for the first time, the client SDK library interacts with your chip to extract the security artifacts from the device, and verifies registration with your Device Provisioning service.</span></span>

## <a name="start-the-iot-device"></a><span data-ttu-id="2f444-169">IoT 장치 시작</span><span class="sxs-lookup"><span data-stu-id="2f444-169">Start the IoT device</span></span>

<span data-ttu-id="2f444-170">IoT 장치는 실제 장치일 수도 있고 시뮬레이션된 장치일 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-170">Your IoT device can be a real device, or a simulated device.</span></span> <span data-ttu-id="2f444-171">IoT 장치가 장치 프로비전 서비스 인스턴스에 등록되었으니, 이제 장치를 부팅하고, 증명 메커니즘을 사용하여 프로비전 서비스를 호출하고 인식할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-171">Since the IoT device has now been enrolled with a Device Provisioning Service instance, the device can now boot up, and call the provisioning service to be recognized using the attestation mechanism.</span></span> <span data-ttu-id="2f444-172">프로비전 서비스에서 장치를 인식하면 장치가 IoT Hub에 할당됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-172">Once the provisioning service has recognized the device, it will be assigned to an IoT hub.</span></span>

<span data-ttu-id="2f444-173">TPM 및 X.509 증명을 사용 하 여 시뮬레이션 된 장치 예제는 C, Java, C 포함\#, Node.js 및 Python입니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-173">Simulated device examples, using both TPM and X.509 attestation, are included for C, Java, C\#, Node.js, and Python.</span></span> <span data-ttu-id="2f444-174">예를 들어 TPM 및 [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c)를 사용하여 시뮬레이션된 장치는 [장치의 첫 번째 부팅 시퀀스 시뮬레이션](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device) 섹션에 설명된 프로세스를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-174">For example, a simulated device using TPM and the [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c) would follow the process covered in the [Simulate first boot sequence for a device](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device) section.</span></span> <span data-ttu-id="2f444-175">X.509 인증서 증명을 사용하는 동일한 장치는 이 [부팅 시퀀스](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device) 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="2f444-175">The same device using X.509 certificate attestation would refer to this [boot sequence](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device) section.</span></span>

<span data-ttu-id="2f444-176">실제 장치의 예제는 [MXChip Iot DevKit에 대한 방법 가이드](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="2f444-176">Refer to the [How-to guide for the MXChip Iot DevKit](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit) as an example for a real device.</span></span>

<span data-ttu-id="2f444-177">장치를 시작하고 장치의 클라이언트 응용 프로그램이 Device Provisioning Service에 등록할 수 있도록 허용하세요.</span><span class="sxs-lookup"><span data-stu-id="2f444-177">Start the device to allow your device's client application to start the registration with your Device Provisioning service.</span></span>

## <a name="verify-the-device-is-registered"></a><span data-ttu-id="2f444-178">장치가 등록되어 있는지 확인</span><span class="sxs-lookup"><span data-stu-id="2f444-178">Verify the device is registered</span></span>

<span data-ttu-id="2f444-179">장치가 부팅되면 다음 작업을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-179">Once your device boots, the following actions should take place:</span></span>

1. <span data-ttu-id="2f444-180">장치가 Device Provisioning Service에 등록 요청을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-180">The device sends a registration request to your Device Provisioning service.</span></span>

2. <span data-ttu-id="2f444-181">TPM 장치의 경우 Device Provisioning Service에서 장치가 응답하는 등록 챌린지를 다시 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-181">For TPM devices, the Device Provisioning Service sends back a registration challenge to which your device responds.</span></span>

3. <span data-ttu-id="2f444-182">등록에 성공하면 Device Provisioning Service는 IoT Hub URI, 장치 ID 및 암호화된 키를 장치로 다시 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-182">On successful registration, the Device Provisioning Service sends the IoT hub URI, device ID, and the encrypted key back to the device.</span></span>

4. <span data-ttu-id="2f444-183">그러면 장치의 IoT Hub 클라이언트 응용 프로그램이 사용자 허브에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-183">The IoT Hub client application on the device then connects to your hub.</span></span>

5. <span data-ttu-id="2f444-184">허브에 성공적으로 연결되면 IoT Hub의 **IoT 장치** 탐색기에 장치가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="2f444-184">On successful connection to the hub, you should see the device appear in the IoT hub's **IoT Devices** explorer.</span></span>

![포털에서 허브에 연결 성공](../media-draft/12ea6da6eef9bf96be6bd80aa1721173.png)

<!--Reference links

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-set-up-cloud>

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-provision-device-to-hub>-->