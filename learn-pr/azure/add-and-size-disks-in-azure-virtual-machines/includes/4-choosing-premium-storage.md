일부 응용 프로그램은 다른 응용 프로그램보다 데이터 저장소 요구 사항이 많습니다. 예를 들어 Microsoft Exchange 서버와 SharePoint 서버는 최적의 성능을 발휘하려면 고성능 디스크가 필요합니다.

법률 회사의 판례 기록 데이터베이스를 Azure로 마이그레이션하는 시나리오로 돌아가겠습니다. 회사에서는 변호사와 다른 직원들이 판례 정보에 최대한 신속하게 액세스할 수 있기를 원합니다. 회사는 점점 성장 중이며, 데이터베이스가 수요 증가를 처리할 수 있어야 합니다.

Azure에서 VM(가상 머신)의 성능을 최대화할 수 있는 한 가지 방법은 VHD(가상 하드 드라이브)에 프리미엄 저장소를 사용하는 것입니다. 프리미엄 저장소는 표준 저장소보다 입출력(IO) 속도가 빠릅니다. 디스크 IO 속도가 빠르면 디스크 사용량이 많은 응용 프로그램의 성능이 향상됩니다.

저장소 성능 계층을 비교하고 프리미엄 저장소 계정에 자세히 알아봅시다.

## <a name="how-premium-storage-differs-from-standard-storage"></a>프리미엄 저장소와 표준 저장소의 차이점

Azure에서 프리미엄 저장소는 SSD(반도체 드라이브)에 구현됩니다. SSD는 HDD(하드 디스크 드라이브)보다 IO 성능이 우수하며, 구동부가 없기 때문에 신뢰성이 높습니다. 읽기 또는 쓰기 헤드는 요청된 데이터를 찾기 위해 디스크에서 올바른 위치로 이동할 필요가 없습니다. 

표준 저장소는 HDD에 구현됩니다. 표준 저장소는 낮은 요율로 청구됩니다. 비용을 낮추려면 표준 저장소를 선택하고, 빠른 IO 성능이 필요하면 프리미엄 저장소를 선택하면 됩니다.

단일 VM에서 디스크마다 표준 저장소와 프리미엄 저장소를 혼합해서 사용할 수도 있습니다.

> [!NOTE]
> 관리 디스크를 사용하는 경우 세 번째 옵션이 있으니, 그것은 바로 표준 SSD입니다. 표준 SSD는 성능과 가격 면에서 표준 HDD와 프리미엄 SSD의 중간이며, 비관리 디스크에는 사용할 수 없습니다. 표준 SSD에 대한 자세한 내용은 이 모듈의 후반부에서 알아보겠습니다.

## <a name="premium-storage-accounts"></a>프리미엄 저장소 계정

VHD는 Azure 범용 저장소 계정에 페이지 Blob으로 저장됩니다. VHD에 프리미엄 저장소를 사용하려면 VHD를 **프리미엄 저장소 계정**에 저장해야 합니다. 저장소 계정을 만들 때 성능 계층을 선택하면 나중에 이 설정을 변경할 수 없습니다.

> [!IMPORTANT]
> Azure 지역에 따라 프리미엄 저장소를 사용할 수 없는 곳도 있습니다. 해당 지역의 가용성은 [지역별 사용 가능한 제품](https://azure.microsoft.com/en-us/global-infrastructure/services/)을 참조하세요.

### <a name="data-replication-and-premium-storage-accounts"></a>데이터 복제 및 프리미엄 저장소 계정

Microsoft Azure Storage 계정 데이터는 내구성 및 고가용성을 위해 항상 복제됩니다. Azure Storage 복제는 계획된 이벤트 그리고 일시적 하드웨어 오류, 네트워크 또는 정전, 대규모 자연 재해 등의 계획되지 않은 이벤트로부터 데이터를 보호하기 위해 데이터를 복사합니다. 동일한 데이터 센터, 동일한 지역 내의 영역 데이터 센터 또는 전체 지역에 데이터를 복제하도록 선택할 수 있습니다. 복제에는 네 가지 유형이 있습니다.

- **LRS(로컬 중복 저장소)** - Azure는 동일한 Azure 데이터 센터 내에 데이터를 복제합니다. 노드 오류가 발생해도 데이터를 사용할 수 있습니다. 그러나 전체 데이터 센터에 오류가 발생하면 데이터를 사용할 수 없게 될 수도 있습니다.
- **GRS(지역 중복 저장소)** - Azure는 주 지역에서 수백 마일 떨어져 있는 보조 지역에 데이터를 복제합니다. 저장소 계정에서 GRS를 활성화하면 주 지역을 복구할 수 없는 전체 지역 정전 또는 재해가 발생하더라도 데이터는 지속됩니다.
- **RA-GRS(읽기 액세스 지역 중복 저장소)** - Azure는 두 번째 위치의 데이터에 대한 읽기 전용 액세스와 두 지역의 지리적 복제를 제공합니다. 데이터 센터에서 오류가 발생하면 데이터를 읽을 수 있지만 수정할 수는 없습니다.
- **ZRS(영역 중복 저장소)** - Azure는 단일 지역에 있는 3개의 저장소 클러스터에서 데이터를 동기적으로 복제합니다. 각 저장소 클러스터는 다른 저장소 클러스터와 물리적으로 분리되어 있으며 자체 AZ(가용성 영역)에 상주합니다. 이 유형의 복제를 사용하면 영역을 사용할 수 없게 되더라도 계속 데이터에 액세스하고 관리할 수 있습니다.

표준 저장소 계정은 모든 복제 유형을 지원하지만, 프리미엄 저장소 계정은 LRS(로컬 중복 저장소)만 지원합니다. VM 자체는 단일 지역에서 실행되므로 이 제한은 일반적으로 VHD 저장소에서 문제가 되지 않습니다.

## <a name="migrating-from-standard-storage-to-premium-storage"></a>표준 저장소에서 프리미엄 저장소로 마이그레이션

무엇보다도 올바른 유형의 저장소 계정에서 VHD를 만드는 것이 가장 좋습니다. 그러나 종종 요구 사항이 바뀌거나, 수요가 증가하거나, 잘못된 형식을 선택한 것을 알게 됩니다. 이러한 경우 프리미엄 저장소로 변경하는 방안을 고려해야 합니다.

마이그레이션을 시작하기 전에, 사용자가 VM을 사용할 수 없는 가동 중지 시간이 발생한다는 점을 고려해야 합니다.

> [!NOTE]
> 표준 저장소에서 프리미엄 저장소로 마이그레이션하는 방법에 대한 자세한 내용은 [Azure Premium Storage로 마이그레이션(관리되지 않는 디스크)](https://docs.microsoft.com/azure/storage/common/storage-migration-to-premium-storage)을 참조하세요.

Azure에서 VM을 만들 때 비용과 성능의 적절한 균형점을 찾아야 합니다. 프리미엄 저장소는 표준 저장소보다 IO 속도가 빠르기 때문에 데이터베이스처럼 디스크 사용량이 많은 응용 프로그램에 적합합니다.
