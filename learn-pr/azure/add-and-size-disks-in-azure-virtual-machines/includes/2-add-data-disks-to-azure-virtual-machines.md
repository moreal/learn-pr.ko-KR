<span data-ttu-id="ea558-101">다른 컴퓨터와 마찬가지로, Azure에서 가상 머신은 운영 체제, 응용 프로그램 및 데이터를 저장하는 장소로 디스크를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-101">Just like any other computer, virtual machines in Azure use disks as a place to store an operating system, applications, and data.</span></span> <span data-ttu-id="ea558-102">이러한 디스크를 VHD(가상 하드 디스크)라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-102">These disks are called virtual hard disks (VHDs).</span></span>

<span data-ttu-id="ea558-103">법률 회사에서 사용하는 판례 기록 데이터베이스를 호스트하는 VM(가상 머신)을 Azure에서 만들었다고 가정해봅시다.</span><span class="sxs-lookup"><span data-stu-id="ea558-103">Suppose you have created a virtual machine (VM) in Azure, which will host the database of case histories that your law firm relies on.</span></span> <span data-ttu-id="ea558-104">SQL Server의 성능과 복원력을 높이려면 잘 설계된 디스크 구성이 필수입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-104">A well-designed disk configuration is fundamental to good performance and resilience for SQL Server.</span></span>

<span data-ttu-id="ea558-105">이 모듈에서는 디스크에 적절한 구성 값을 선택하는 방법 및 해당 디스크를 VM에 연결하는 방법을 알아보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-105">In this unit, you'll learn how to choose the right configuration values for your disks and how to attach those disks to a VM.</span></span>

## <a name="how-disks-are-used-by-vms"></a><span data-ttu-id="ea558-106">VM에서 디스크를 사용하는 방법</span><span class="sxs-lookup"><span data-stu-id="ea558-106">How disks are used by VMs</span></span>

<span data-ttu-id="ea558-107">VM은 다음과 같은 세 가지 용도로 디스크를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-107">VMs use disks for three different purposes:</span></span>

- <span data-ttu-id="ea558-108">**운영 체제 저장소**.</span><span class="sxs-lookup"><span data-stu-id="ea558-108">**Operating system storage**.</span></span> <span data-ttu-id="ea558-109">모든 VM은 운영 체제를 저장하는 디스크를 하나 갖고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-109">Every VM includes one disk that stores the operating system.</span></span> <span data-ttu-id="ea558-110">이 드라이브는 SATA 드라이브로 등록되고 Windows에서 C: 드라이브로 레이블이 지정되며 Unix와 비슷한 운영 체제에서는 "/"에 탑재됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-110">This drive is registered as a SATA drive and labeled as the C: drive in Windows and mounted at "/" in Unix-like operating systems.</span></span> <span data-ttu-id="ea558-111">최대 용량은 2048GB이고, 콘텐츠는 VM을 만들 때 사용한 VM 이미지에서 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-111">It has a maximum capacity of 2048 gigabytes (GB), and its content is taken from the VM image you used to create the VM.</span></span>
- <span data-ttu-id="ea558-112">**임시 저장소**.</span><span class="sxs-lookup"><span data-stu-id="ea558-112">**Temporary storage**.</span></span> <span data-ttu-id="ea558-113">모든 VM은 페이지 및 스왑 파일에 사용되는 임시 VHD도 포함하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-113">Every VM also includes a temporary VHD that is used for page and swap files.</span></span> <span data-ttu-id="ea558-114">유지 관리 이벤트 또는 다시 배포하는 동안 이 드라이브의 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-114">Data on this drive may be lost during a maintenance event or redeployment.</span></span> <span data-ttu-id="ea558-115">드라이브는 기본적으로 Windows VM에서 D:로 레이블이 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-115">The drive is labeled as D: on a Windows VM by default.</span></span> <span data-ttu-id="ea558-116">손실되면 안 되는 중요한 데이터를 저장하는 용도로 이 드라이브를 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="ea558-116">Do not use this drive to store important data that you do not want to lose.</span></span>
- <span data-ttu-id="ea558-117">**데이터 저장소**.</span><span class="sxs-lookup"><span data-stu-id="ea558-117">**Data storage**.</span></span> <span data-ttu-id="ea558-118">VM에 연결되는 그 외의 모든 디스크는 데이터 디스크입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-118">A data disk is any other disk attached to a VM.</span></span> <span data-ttu-id="ea558-119">데이터 디스크는 파일, 데이터베이스 및 재부팅 간에 유지해야 하는 모든 데이터를 저장하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-119">You use data disks to store files, databases, and any other data that you need to persist across reboots.</span></span> <span data-ttu-id="ea558-120">일부 VM 이미지는 기본적으로 데이터 디스크를 포함하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-120">Some VM images include data disks by default.</span></span> <span data-ttu-id="ea558-121">또한 VM의 크기에 따라 지정된 최대 개수까지 사용자 고유의 데이터 디스크를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-121">You can also add your own data disks up to the maximum number specified by the size of the VM.</span></span> <span data-ttu-id="ea558-122">각 데이터 디스크는 SCSI 드라이브로 등록되고 최대 용량은 4095GB입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-122">Each data disk is registered as a SCSI drive and has a max capacity of 4095 GB.</span></span> <span data-ttu-id="ea558-123">드라이브 문자를 선택하거나 데이터 드라이브의 탑재 지점을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-123">You can choose drive letters or mount points for your data drives.</span></span>

## <a name="storing-vhd-files"></a><span data-ttu-id="ea558-124">VHD 파일 저장</span><span class="sxs-lookup"><span data-stu-id="ea558-124">Storing VHD files</span></span>

<span data-ttu-id="ea558-125">Azure에서 VHD는 Azure 저장소 계정에 **페이지 Blob**으로 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-125">In Azure, VHDs are stored in an Azure storage account as **page blobs**.</span></span>

<span data-ttu-id="ea558-126">이 표에서는 개체에서 사용할 수 있는 다양한 종류의 저장소 계정을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-126">This table shows the various kinds of storage accounts and which objects can be used with each.</span></span>

|<span data-ttu-id="ea558-127">**저장소 계정의 유형**</span><span class="sxs-lookup"><span data-stu-id="ea558-127">**Type of storage account**</span></span>|<span data-ttu-id="ea558-128">**범용 표준**</span><span class="sxs-lookup"><span data-stu-id="ea558-128">**General-purpose standard**</span></span>|<span data-ttu-id="ea558-129">**범용 프리미엄**</span><span class="sxs-lookup"><span data-stu-id="ea558-129">**General-purpose premium**</span></span>|<span data-ttu-id="ea558-130">**Blob Storage, 핫 및 쿨 액세스 계층**</span><span class="sxs-lookup"><span data-stu-id="ea558-130">**Blob storage, hot and cool access tiers**</span></span>|
|-----|-----|-----|-----|
|<span data-ttu-id="ea558-131">**지원되는 서비스**</span><span class="sxs-lookup"><span data-stu-id="ea558-131">**Services supported**</span></span>| <span data-ttu-id="ea558-132">Azure Blob 저장소, Azure Files, Azure Queue 저장소</span><span class="sxs-lookup"><span data-stu-id="ea558-132">Azure Blob storage, Azure Files, Azure Queue storage</span></span> | <span data-ttu-id="ea558-133">Blob 저장소</span><span class="sxs-lookup"><span data-stu-id="ea558-133">Blob storage</span></span> | <span data-ttu-id="ea558-134">Blob 저장소</span><span class="sxs-lookup"><span data-stu-id="ea558-134">Blob storage</span></span>|
|<span data-ttu-id="ea558-135">**지원되는 Blob 유형**</span><span class="sxs-lookup"><span data-stu-id="ea558-135">**Types of blobs supported**</span></span>|<span data-ttu-id="ea558-136">블록 Blob, 페이지 Blob 및 추가 Blob</span><span class="sxs-lookup"><span data-stu-id="ea558-136">Block blobs, page blobs, and append blobs</span></span> | <span data-ttu-id="ea558-137">페이지 Blob</span><span class="sxs-lookup"><span data-stu-id="ea558-137">Page blobs</span></span> | <span data-ttu-id="ea558-138">블록 Blob 및 추가 Blob</span><span class="sxs-lookup"><span data-stu-id="ea558-138">Block blobs and append blobs</span></span>|

<span data-ttu-id="ea558-139">VHD는 페이지 Blob으로 저장되고 표준 저장소만 페이지 Blob을 지원하므로 VHD를 저장하려면 표준 저장소 계정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-139">Because VHDs are stored as page blobs, and only standard storage supports page blobs, you need a standard storage account to store VHDs.</span></span>

## <a name="attach-data-disks-to-vms"></a><span data-ttu-id="ea558-140">VM에 데이터 디스크 연결</span><span class="sxs-lookup"><span data-stu-id="ea558-140">Attach data disks to VMs</span></span>

<span data-ttu-id="ea558-141">언제든지 VM에 디스크를 연결하여 가상 머신에 데이터 디스크를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-141">You can add data disks to a virtual machine at any time by attaching them to the VM.</span></span> <span data-ttu-id="ea558-142">디스크를 연결하면 VHD 파일이 VM에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-142">Attaching a disk associates the VHD file with the VM.</span></span> 

<span data-ttu-id="ea558-143">연결된 VHD는 저장소에서 삭제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-143">The VHD can't be deleted from storage while it's attached.</span></span>

### <a name="attach-an-existing-data-disk-to-an-azure-vm"></a><span data-ttu-id="ea558-144">Azure VM에 기존 데이터 디스크 연결</span><span class="sxs-lookup"><span data-stu-id="ea558-144">Attach an existing data disk to an Azure VM</span></span>

<span data-ttu-id="ea558-145">Azure VM에서 사용하려는 데이터를 저장하는 VHD를 이미 만든 분도 계실 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-145">You may already have a VHD that stores the data you want to use in your Azure VM.</span></span> <span data-ttu-id="ea558-146">법률 회사 시나리오를 예로 들자면, 이미 물리적 디스크를 로컬로 VHD로 변환한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-146">In our law firm scenario, for example,  perhaps you've already converted your physical disks to VHDs locally.</span></span> <span data-ttu-id="ea558-147">이 경우 PowerShell `Add-AzureRmVhd` cmdlet을 사용하여 VHD를 저장소 계정에 업로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-147">In this case, you can use the PowerShell `Add-AzureRmVhd` cmdlet to upload it to the storage account.</span></span> <span data-ttu-id="ea558-148">이 cmdlet은 VHD 파일을 전송하는 데 최적화되었으며 다른 방법보다 더 빨리 업로드를 완료할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-148">This cmdlet is optimized for transferring VHD files and may complete the upload faster than other methods.</span></span> <span data-ttu-id="ea558-149">최상의 성능을 위해 여러 스레드를 사용하여 전송이 완료됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-149">The transfer is completed by using multiple threads for best performance.</span></span> <span data-ttu-id="ea558-150">VHD가 업로드되면 기존 VM에 데이터 디스크로 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-150">Once the VHD has been uploaded, attach it to an existing VM as a data disk.</span></span> <span data-ttu-id="ea558-151">이 방법은 모든 종류의 데이터를 Azure VM에 배포하는 훌륭한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-151">This approach an excellent way to deploy data of all types to Azure VMs.</span></span> <span data-ttu-id="ea558-152">데이터가 VM에 자동으로 표시되므로 새 디스크를 분할하거나 포맷할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-152">The data is automatically present in the VM, and there's no need to partition or format the new disk.</span></span>

### <a name="attach-a-new-data-disk-to-an-azure-vm"></a><span data-ttu-id="ea558-153">Azure VM에 새 데이터 디스크 연결</span><span class="sxs-lookup"><span data-stu-id="ea558-153">Attach a new data disk to an Azure VM</span></span>

<span data-ttu-id="ea558-154">Azure Portal을 사용하여 비어 있는 새 데이터 디스크를 VM에 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-154">You can use the Azure portal to add a new, empty data disk to a VM.</span></span> 

<span data-ttu-id="ea558-155">그러면 사용자가 지정하는 저장소 계정에 **.vhd** 파일이 페이지 Blob으로 생성되고, 해당 .vhd 파일은 VM에 데이터 디스크로 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-155">It will create a **.vhd** file as a page blob in the storage account that you specify, and it attaches that .vhd file as a data disk to the VM.</span></span> 

<span data-ttu-id="ea558-156">새 VHD를 사용하여 데이터를 저장하려면 먼저 새 디스크를 초기화, 분할 및 포맷해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-156">Before you can use the new VHD to store data, you have to initialize, partition, and format the new disk.</span></span> <span data-ttu-id="ea558-157">이 단계는 그 다음 연습에서 실습하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-157">We'll practice these steps in the next exercise.</span></span>

<span data-ttu-id="ea558-158">물리적 온-프레미스 서버에서는 데이터를 실제 하드 디스크에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-158">In physical on-premises servers, you store data on physical hard disks.</span></span> <span data-ttu-id="ea558-159">VHD(가상 하드 디스크)의 Azure VM(가상 머신)에 데이터를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-159">You store data in an Azure virtual machine (VM) on virtual hard disks (VHDs).</span></span> <span data-ttu-id="ea558-160">이러한 VHD는 Azure 저장소 계정에 페이지 Blob으로 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-160">These VHDs are stored as page blobs in Azure storage accounts.</span></span> <span data-ttu-id="ea558-161">예를 들어 법률 회사의 판례 기록 데이터베이스를 Azure로 마이그레이션할 때 데이터베이스 파일을 저장할 VHD를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ea558-161">For example, when you migrate your law firm's database of case histories to Azure, you must create VHDs where the database files will be saved.</span></span>
