최신 뉴스 알림을 보도하는 주요 언론사에서 일한다고 상상해 보세요. 당사는 웹 포털 및 모바일 앱을 통해 업데이트를 지속적으로 보내는 전 세계 기자 네트워크를 사용하고 있습니다. 중간 계층 웹 서비스 계층은 해당 알림 업데이트를 받은 후 여러 채널을 통해 온라인으로 게시합니다.

그러나 글로벌 중요 이벤트가 발생하면 시스템에서 알림이 누락되는 것으로 확인되었습니다. 경쟁 언론사에서 “특종에 밀리고” 있기 때문에 이것은 _중대한_ 문제입니다. 여러분은 문제를 식별하고 해결하는 책임 개발자로 선정되었습니다.

중간 계층은 일반적인 부하를 처리하기 위한 많은 용량을 제공합니다. 그러나 서버 로그를 확인한 결과, 여러 명의 기자가 더 큰 뉴스 기사를 동시에 업로드하려고 할 때 시스템이 과부하 되는 것이 확인되었습니다. 포털이 응답하지 않는다고 불평하는 작성자도 있었고, 기사가 손실되었다고 말하는 작성자고 있었습니다. 보고된 문제와 중간 계층 서버의 수요 급증 사이에서 직접적인 상관 관계가 확인되었습니다.

분명히, 이러한 예기치 않은 수요 최대치를 처리하는 방법이 필요합니다. 웹 사이트 및 중간 계층 웹 서비스의 인스턴스를 더 추가하면 정상 상태에서는 중복되게 되므로 이러한 추가를 원하지 않을 것입니다. 인스턴스를 동적으로 회전할 수 있지만 시간이 걸리며, 새 서버가 온라인 상태가 될 때까지 기다리는 데 문제가 있었습니다.

Azure Queue Storage를 사용하여 이 문제를 해결할 수 있습니다. 저장소 큐는 프런트 엔드 구성 요소(“생산자”)와 중간 계층(“소비자”) 사이에서 브로커 역할을 할 수 있는 고성능 메시지 버퍼입니다. 

프런트 엔드 구성 요소는 각각의 새 알림에 대한 메시지를 큐에 추가합니다. 그러면 중간 계층이 처리를 위해 큐에서 한 번에 하나씩 이러한 메시지를 검색합니다. 수요가 높은 경우 큐 길이가 늘어날 수 있지만 기사는 손실되지 않으며 응용 프로그램은 응답 가능한 상태를 유지됩니다. 수요가 정상 수준으로 떨어지면 웹 서비스는 큐 백로그까지 모두 처리합니다.

Azure Queue Storage를 사용하여 분산 응용 프로그램에서 높은 수요를 처리하고 복원력을 개선하는 방법을 알아보겠습니다.

## <a name="learning-objectives"></a>학습 목표

- 큐를 지원하는 Azure Storage 계정을 만듭니다.
- C# 및 .NET용 Azure Storage 클라이언트 라이브러리를 사용하여 큐를 만듭니다.
- C# 및 .NET용 Azure Storage 클라이언트 라이브러리를 사용하여 큐에서 메시지를 추가, 검색 및 제거합니다.