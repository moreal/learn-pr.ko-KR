일일 수요를 처리하려면 서버에 충분한 리소스가 있어야 합니다. VM을 만들 때 일반적인 워크로드에 충분한 크기를 선택하고 수요가 변할 때 크기를 조정하는 것이 일반적인 전략입니다.

장난감 회사 시나리오에서는 이 전략을 사용하여 중기 성장을 위한 리소스를 관리할 수 있습니다. 비즈니스의 성장에 따라 추가 요구를 처리할 수 있도록 VM 크기를 늘릴 수 있습니다.

## <a name="what-is-virtual-machine-size"></a>가상 머신 크기란?

가상 머신의 _크기_는 CPU, 메모리, 디스크 및 예상 네트워크 대역폭의 측정값입니다. 가상 머신은 미리 결정된 크기로 제공됩니다. 예를 들어 **Standard_F32s_v2** 크기는 가상 CPU 32개, 메모리 64GiB, 로컬 SSD 256GiB, 예상 네트워크 대역폭 14,000Mbps를 제공합니다.

Azure에서 새 가상 머신을 만들 때 크기를 선택해야 합니다. 크기가 클수록 더 많은 비용이 듭니다. 성능을 필요 이상으로 구성하지 않고 워크로드를 처리할 수 있는 크기를 선택하는 것이 목표입니다.

## <a name="what-is-virtual-machine-type"></a>가상 머신 유형이란?

가상 머신의 _유형_은 VM이 최적화된 워크로드입니다. 예를 들어 어떤 VM은 웹 서버 호스팅처럼 CPU 집약적인 작업을 대상으로 합니다. 또 어떤 VM은 데이터베이스 실행처럼 저장소 중심 작업을 대상으로 합니다.

최신 컴퓨터의 핵심 하드웨어 구성 요소인 **계산**, **메모리**, **저장소**, **GPU**에 해당하는 _유형_이 있습니다. 균형 잡힌 리소스 조합을 원하는 고객을 위한 **범용** 유형도 있습니다. 다음 표에는 VM 유형과 해당 유형에 포함된 VM 크기, 그리고 대상 워크로드에 대한 간략한 설명이 나열되어 있습니다.

|형식|크기|설명|
|---|---|---|
|범용|B, Ds_v3, D_v3, 일부 DS_v2, 일부 D_v2, A_v2|범용 머신은 균형 잡힌 CPU:메모리 비율을 제공합니다. 범용 머신은 테스트 또는 개발 서버, 소형~중형 데이터베이스 또는 트래픽이 적거나 보통 수준인 웹 서버에 적합합니다.|
|계산 최적화|Fs_v2, Fs, F|계산에 최적화된 가상 머신은 응용 프로그램 서버, 네트워크 어플라이언스, 보통 수준의 트래픽 웹 서버처럼 추가 처리 성능이 필요한 작업을 처리하기 위해 범용 머신보다 CPU:메모리 비율이 높습니다.|
|메모리 최적화|Es_v3, E_v3, M, GS, G, 일부 DS_v2, 일부 D_v2|메모리에 최적화된 가상 머신은 높은 메모리:CPU 비율을 제공합니다. 이러한 머신은 관계형 데이터베이스 서버, 많은 캐싱이 필요하거나 수행하는 서버 또는 메모리 내 분석을 수행하는 서버에 적합합니다.|
|저장소 최적화|Ls|이러한 가상 머신은 빅 데이터, SQL 및 NoSQL 데이터베이스에 적합하도록 높은 디스크 처리량과 빠른 IO 속도를 제공하도록 구성됩니다.|
|GPU|NV, NC, NC_v2, NC_v3, ND|GPU 가상 머신은 헤비 듀티 그래픽 렌더링이나 비디오 편집 같은 작업을 위해 특별히 설계되었으며, 또한 딥 러닝을 통해 교육 및 추론(ND 시리즈)을 모델링합니다. 이러한 머신에 단일 또는 여러 GPU를 선택할 수 있습니다.|
|고성능 계산|H|이러한 가상 머신에는 가장 빠르고 가장 강력한 CPU가 제공됩니다. RDMA(처리량이 높은 네트워크 인터페이스)를 추가할 수도 있습니다.|

## <a name="clusters"></a>클러스터

Azure 지역의 물리적 서버 하드웨어는 클러스터에 그룹화됩니다. 각 클러스터는 물리적 하드웨어에 따라 여러 가상 머신 크기를 지원할 수 있습니다.

가상 머신을 만들고 특정 크기를 선택하면 해당 크기에 적합한 하드웨어 클러스터에 가상 머신이 프로비전됩니다. 만든 후 가상 머신 크기를 조정할 수 있지만, 초기 크기에서 선택한 하드웨어 클러스터에 의해 크기 조정 옵션이 제한될 수 있습니다.

## <a name="what-is-vertical-scaling"></a>수직 방향 크기 조정이란?

_수직 방향 크기 조정_은 가상 머신의 _크기_를 변경하는 프로세스입니다. 늘어난 수요를 처리할 수 있도록 보다 강력한 크기를 선택하여 규모를 _강화_하거나 리소스 할당 _규모를 축소_하여 비용을 절약할 수 있습니다. 다음 일러스트레이션은 가상 머신의 크기를 변경하는 예를 보여줍니다.

![성능 용량을 변경하기 위한 가상 머신의 강화 및 축소를 보여주는 일러스트레이션.](../media/2-ScaleUpDown.png)

Azure Portal, Azure PowerShell 또는 Azure CLI(명령줄 인터페이스)를 사용하여 VM 크기를 조정할 수 있습니다.

### <a name="resize-in-the-portal"></a>포털에서 크기 조정

Azure Portal에서 가상 머신을 클릭하고, **크기** 항목을 클릭하고, **크기 선택** 블레이드에서 항목을 선택하여 가상 머신 크기를 조정할 수 있습니다. 

가상 머신이 특정 시간에 실행되는 경우 선택할 수 있는 크기는 해당 지역에 제공되는 크기에 따라 달라집니다. 가상 머신이 현재 실행되고 있는 것과 동일한 하드웨어 클러스터와 호환되는 크기 조정 옵션만 표시되며, 이것을 *크기 제품군*이라고도 합니다. 가상 머신이 실행되는 동안 새 크기를 선택하면 새 크기를 적용하기 위해 VM이 자동으로 다시 시작됩니다.

가상 머신이 실행 중인 동안 포털에서 원하는 크기를 찾을 수 없으면 가상 머신을 중지하고 더 많은 옵션을 살펴볼 수 있습니다. 머신이 **중지됨(할당 취소됨)** 상태이면 동일한 지역의 다른 하드웨어에서 크기를 선택할 수 있습니다.

### <a name="resize-with-powershell"></a>PowerShell을 사용하여 크기 조정

PowerShell을 사용하여 대화형으로 또는 스크립트를 사용하여 수직 방향으로 크기를 조정할 수 있습니다. 스크립트는 여러 VM 크기를 동시에 조정해야 하는 경우처럼 복잡한 시나리오에 적합합니다. 사용자의 업무가 중단되는 일이 없도록 업무 외 시간에 크기를 조정해야 하는 경우에도 간편하게 사용할 수 있습니다.

다음 cmdlet은 현재 하드웨어와 동일한 크기 제품군의 VM 크기를 나열합니다.

```PowerShell
Get-AzureRmVMSize -ResourceGroupName "myResourceGroup" -VMName "MyVM"
```

원하는 크기가 표시되면 다음 cmdlet을 사용하여 가상 머신 크기를 변경합니다.

```PowerShell
$vm = Get-AzureRmVM -ResourceGroupName "myResourceGroup" -VMName "MyVM"
$vm.HardwareProfile.VmSize = "<newVMsize>"
Update-AzureRmVM -VM $vm -ResourceGroupName "myResourceGroup"
```

머신이 실행 중인 동안 원하는 크기가 표시되지 않으면 다음 명령을 사용하여 가상 머신의 할당을 취소하고, 머신 크기를 조정하고, 머신을 다시 시작합니다.

```PowerShell
Stop-AzureRmVM -ResourceGroupName "myResourceGroup" -Name "MyVM" -Force
$vm = Get-AzureRmVM -ResourceGroupName "myResourceGroup" -VMName "MyVM"
$vm.HardwareProfile.VmSize = "<newVMSize>"
Update-AzureRmVM -VM $vm -ResourceGroupName "myResourceGroup"
Start-AzureRmVM -ResourceGroupName "myResourceGroup" -Name "MyVM"
```

필요에 따라 Azure의 가상 머신 크기를 조정하여 성능을 높이거나 비용을 줄일 수 있습니다. 포털 또는 스크립트를 사용한 수동 크기 조정은 점진적인 비즈니스 성장을 처리하거나 수요 변화를 미리 알고 있는 경우에 유용합니다. 장난감 회사 시나리오의 경우 공휴일 전에는 급증하는 수요를 처리하도록 크기를 늘리고, 그 후에는 크기를 줄일 수 있습니다.