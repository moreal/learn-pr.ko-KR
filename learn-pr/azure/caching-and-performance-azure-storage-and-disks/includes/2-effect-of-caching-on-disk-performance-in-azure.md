<span data-ttu-id="7692a-101">로컬 컴퓨터와 마찬가지로 가상 머신의 성능도 데이터를 빠르게 읽고 쓸 수 있는 속도와 직접 관련되는 경우가 종종 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-101">Much like your local computers, virtual machine performance can often be tied directly to how quickly it can read and write data.</span></span> <span data-ttu-id="7692a-102">성능을 향상하는 방법을 이해하려면 먼저 성능 측정 방법 및 성능에 영향을 미치는 설정과 선택 사항에 대해 이해해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-102">In order to understand how to improve that performance, we first have to understand how performance is measured and the settings and choices that affect it.</span></span>

<span data-ttu-id="7692a-103">특히 VM에 사용되는 기본 디스크 및 저장소에 대해 알아보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-103">We are looking specifically at the underlying disks and storage used for VMs.</span></span> <span data-ttu-id="7692a-104">성능을 확인할 때는 응용 프로그램 계층도 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-104">When you are looking at performance, keep in mind that you will also have to consider the application layer.</span></span> <span data-ttu-id="7692a-105">예를 들어 VM에서 데이터베이스를 실행 중인 경우, 데이터베이스 고유의 성능 설정이 실행 중인 VM 및 저장소에 최적화되어 있는지 확인하려 할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-105">For example, if you are running a database in a VM, you will want to look at the performance settings specific to the database to ensure it is optimized for the VM and storage you are running it on.</span></span>

<span data-ttu-id="7692a-106">몇 가지 용어를 정의하는 것으로 시작하여 Azure에서 이를 보장하는지 확인해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-106">Let's start by defining a few terms and the guarantees Azure makes about them.</span></span>

## <a name="io-operations-per-second"></a><span data-ttu-id="7692a-107">초당 I/O 작업</span><span class="sxs-lookup"><span data-stu-id="7692a-107">I/O operations per second</span></span>

<span data-ttu-id="7692a-108">선택한 저장소 유형(Standard 또는 Premium)은 디스크의 속도를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-108">The storage type you select (standard or premium) will decide how fast your disks are.</span></span> <span data-ttu-id="7692a-109">이 성능은 초당 I/O 작업 또는 IOPS(“eye-ops”로 발음) 단위로 측정합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-109">We measure this performance in I/O operations per second, or IOPS (pronounced "eye-ops").</span></span>

<span data-ttu-id="7692a-110">IOPS는 디스크에서 1초에 처리할 수 있는 요청의 수입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-110">IOPS is number of requests that can be processed by the disk in one second.</span></span> <span data-ttu-id="7692a-111">단일 요청은 하나의 읽기 또는 쓰기 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-111">A single request is a read or write operation.</span></span> <span data-ttu-id="7692a-112">이 측정은 저장소에 직접 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-112">This measurement is applied directly to storage.</span></span> <span data-ttu-id="7692a-113">예를 들어 **5000 IOPS**를 수행할 수 있는 디스크가 있는 경우에는 이론적으로 초당 5,000회의 읽기 및 쓰기 작업을 처리할 수 있음을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-113">For example, if you have a disk that is capable of doing a **5000 IOPS**, it means that it is theoretically capable of processing 5,000 read and or write operations per second.</span></span>

<span data-ttu-id="7692a-114">IOPS는 응용 프로그램 성능에 직접적인 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-114">IOPS directly affects your application performance.</span></span> <span data-ttu-id="7692a-115">소매 웹 사이트와 같은 일부 응용 프로그램에서 사이트의 응답성을 유지하기 위해 신속하게 처리되어야 하는 임의의 작은 IO 요청을 모두 처리하려면 IOPS가 높아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-115">Some applications, such as retail websites, need high IOPS to handle all the small and random IO requests that must be processed quickly to keep the site responsive.</span></span>

### <a name="iops-in-azure"></a><span data-ttu-id="7692a-116">Azure의 IOPS</span><span class="sxs-lookup"><span data-stu-id="7692a-116">IOPS in Azure</span></span>

<span data-ttu-id="7692a-117">높은 확장성의 VM에 Premium Storage 디스크를 연결하는 경우 Azure는 디스크 사양에 따라 보장된 IOPS 수에 대해 프로비전합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-117">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="7692a-118">예를 들어 **P50** 디스크는 **7500 IOPS**를 프로비전합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-118">For example, a **P50** disk provisions **7500 IOPS**.</span></span> <span data-ttu-id="7692a-119">각 높은 확장성의 VM 크기에는 유지할 수 있는 특정 IOPS 제한이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-119">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="7692a-120">예를 들어 **표준 GS5** VM에는 **80,000 IOPS** 제한이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-120">For example, a **Standard GS5** VM has an **80,000 IOPS** limit.</span></span>

<span data-ttu-id="7692a-121">IOPS는 저장소 디스크의 측정값이지만 그것은 _이론 상의_ 제한입니다. 따라서 다른 두 가지 요인이 실제 응용 프로그램 성능에 영향을 줄 수 있는데, 그것은 **처리량** 및 **대기 시간**입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-121">IOPS is a measurement of the storage disks, however it's a _theoretical_ limit - two other factors can affect the actual application performance: **throughput** and **latency**.</span></span>

### <a name="what-is-throughput"></a><span data-ttu-id="7692a-122">처리량이란?</span><span class="sxs-lookup"><span data-stu-id="7692a-122">What is throughput?</span></span>
<span data-ttu-id="7692a-123">처리량(“대역폭”이라고도 함)은 응용 프로그램이 지정된 간격(일반적으로 1초)으로 저장소 디스크에 보내는 데이터의 양입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-123">Throughput (also called "bandwidth") is the amount of data that your application is sending to the storage disks in a specified interval (typically per second).</span></span> <span data-ttu-id="7692a-124">응용 프로그램이 큰 데이터 블록을 포함한 I/O를 수행하는 경우에는 높은 처리량이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-124">If your application is performing I/O with large blocks of data, it requires high throughput.</span></span>

<span data-ttu-id="7692a-125">Azure는 해당 디스크의 사양에 따라 Premium Storage 디스크의 처리량을 프로비전합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-125">Azure provisions throughput in premium storage disks based on that disks' specification.</span></span> <span data-ttu-id="7692a-126">예를 들어 **P50** 디스크는 **초당 250MB** 디스크 처리량을 프로비전합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-126">For example, a **P50** disk provisions **250 MB per second** disk throughput.</span></span> <span data-ttu-id="7692a-127">높은 확장성의 VM 크기마다 유지할 수 있는 특정 _처리량 제한_이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-127">Each high scale VM size also has as specific _throughput limit_ that it can sustain.</span></span> <span data-ttu-id="7692a-128">예를 들어 **표준 GS5** VM의 최대 처리량은 **초당 2,000MB**입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-128">For example, **Standard GS5** VM has a maximum throughput of **2,000 MB per second**.</span></span>

#### <a name="iops-vs-throughput"></a><span data-ttu-id="7692a-129">IOPS 및 처리량</span><span class="sxs-lookup"><span data-stu-id="7692a-129">IOPS vs. throughput</span></span>

<span data-ttu-id="7692a-130">처리량 및 IOPS에는 직접적인 관계가 있습니다. 한쪽을 변경하면 다른 쪽에 직접 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-130">Throughput and IOPS have a direct relationship, changing one will have a direct impact on the other.</span></span> <span data-ttu-id="7692a-131">처리량의 이론적 제한을 알아보려면 `IOPS x I/O size = throughput` 수식을 사용하세요.</span><span class="sxs-lookup"><span data-stu-id="7692a-131">To get a theoretical limit of throughput you can use the formula: `IOPS x I/O size = throughput`.</span></span> <span data-ttu-id="7692a-132">응용 프로그램을 계획할 때 이러한 값을 모두 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-132">It's important to consider both of these values when planning your application.</span></span>

### <a name="what-is-latency"></a><span data-ttu-id="7692a-133">대기 시간이란?</span><span class="sxs-lookup"><span data-stu-id="7692a-133">What is latency?</span></span>

<span data-ttu-id="7692a-134">데이터를 읽고 쓰는 데에는 시간이 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-134">Reading and writing data takes time.</span></span> <span data-ttu-id="7692a-135">여기에서 _대기 시간_이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-135">This is where _latency_ comes in.</span></span> <span data-ttu-id="7692a-136">대기 시간은 앱이 디스크에 요청을 보내고 응답을 받는 데 걸리는 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-136">Latency is the time it takes your app to send a request to the disk and get a response.</span></span> <span data-ttu-id="7692a-137">본질적으로 대기 시간은 단일 읽기 또는 쓰기 I/O 요청을 _처리_하는 데 걸리는 시간을 알려줍니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-137">Essentially, latency tells us how long it takes to _process_ a single read or write I/O request.</span></span>

<span data-ttu-id="7692a-138">대기 시간은 IOPS에 제한을 가합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-138">Latency puts a limit on IOPS.</span></span> <span data-ttu-id="7692a-139">예를 들어 디스크가 5000 IOPS를 처리할 수 있지만 각 작업을 처리하는 데 10ms가 걸리는 경우 앱은 처리 시간으로 인해 초당 100개의 작업까지 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-139">For example, if our disk can handle 5000 IOPS but each operation takes 10 ms to process, then our app will be capped to 100 operation per second due to the processing time.</span></span> <span data-ttu-id="7692a-140">이것은 간단한 예이며 대부분의 대기 시간은 훨씬 더 짧습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-140">This is a simple example, most of the time latency will be much lower.</span></span> <span data-ttu-id="7692a-141">결국 대기 시간 및 처리량은 앱이 저장소에서 데이터를 처리할 수 있는 속도를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-141">Ultimately, latency and throughput will determine how fast your app can process data from storage.</span></span> 

<span data-ttu-id="7692a-142">Premium Storage는 대기 시간이 일관적으로 낮으며, 필요할 때는 _캐싱_을 통해 대기 시간을 더욱 개선할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-142">Premium Storage provides consistent low latencies and you can achieve even better latency when necessary through _caching_.</span></span> 

## <a name="testing-your-disk-performance"></a><span data-ttu-id="7692a-143">디스크 성능 테스트</span><span class="sxs-lookup"><span data-stu-id="7692a-143">Testing your disk performance</span></span>

<span data-ttu-id="7692a-144">올바른 VM 크기 및 저장소 유형을 선택하여 VM 디스크의 IOPS, 처리량 및 대기 시간을 조절하고 균형을 조정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-144">You can adjust and balance the IOPS, throughput and latency of your VM disks by selecting the right VM size and storage type.</span></span> <span data-ttu-id="7692a-145">일반적으로 더 크거나 비싼 VM이 최대 IOPS 및 처리량을 더욱 확실하게 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-145">Typically the larger or more expensive VM sizes will have higher guarantees for max IOPS and throughput.</span></span> <span data-ttu-id="7692a-146">해당 수식에 Standard Storage 대 Premium Storage 및 HDD 대 SSD 선택 사항을 추가하고 여러 가지 매개 변수를 대입해 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-146">Add into that equation Standard vs. Premium storage and HDD vs. SSD choices and you have several parameters to play with.</span></span>

<span data-ttu-id="7692a-147">올바른 조합을 선택하려면 응용 프로그램 요구 사항을 이해할 필요가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-147">To select the right combination involves understanding what your application requirements are.</span></span> <span data-ttu-id="7692a-148">데이터베이스 서버 또는 온라인 트랜잭션 처리 시스템과 같이 높은 I/O 응용 프로그램에는 더 높은 IOPS가 필요하지만, 계산 기반 응용 프로그램은 훨씬 낮은 요구 사항으로도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-148">High-I/O applications such as database servers or online transactional processing systems will require higher IOPS, whereas more computational based applications might get by with much lower requirements.</span></span> <span data-ttu-id="7692a-149">그뿐만 아니라 응용 프로그램이 수행하는 작업의 _유형_은 처리량에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-149">In addition, the _types_ of operations the applications do will affect your throughput.</span></span> <span data-ttu-id="7692a-150">높은 임의 액세스 I/O는 긴 순차적 읽기보다 속도가 느린 경향이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-150">High random access I/O tends to be slower than long sequential reads.</span></span>

<span data-ttu-id="7692a-151">구성을 선택하면 [Iometer](http://iometer.org/)와 같은 도구를 사용하여 Linux 및 Windows VM에서 디스크 성능을 테스트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-151">Once you select your configuration, you can use tools such as [Iometer](http://iometer.org/) to test your disk performance on Linux and Windows VMs.</span></span> <span data-ttu-id="7692a-152">이렇게 하면 어떤 종류의 성능이 예상되는지에 대해 더욱 현실적인 감각을 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-152">This will give you a more real-world sense of what kind of performance to expect.</span></span> <span data-ttu-id="7692a-153">또한 앱의 저장소 사용을 개선하는 방법을 찾는 데 도움이 될 수 있습니다. 예를 들어 단일 스레드 입출력을 수행하는 응용 프로그램은 대기 시간으로 인해 I/O 성능이 저하될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-153">It can also help you to identify ways to improve your app's usage of storage - for example, an application that does single threaded I/O is likely to suffer reduced I/O performance because of latency.</span></span>

<span data-ttu-id="7692a-154">디스크 성능을 개선하기 위해 할 수 있는 몇 가지 작업을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7692a-154">Let's look at some other things we can do to improve our disk performance.</span></span>

