<span data-ttu-id="faf6b-101">고객에게 온라인 의류 사이트의 제품에 가장 빠르게 액세스할 수 있는 방법을 제공하는 것은 고객에게는 물론 비즈니스 성공에도 매우 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-101">Providing your customers the fastest access to the products on your online clothing site is paramount to your customers, and your businesses success.</span></span> <span data-ttu-id="faf6b-102">데이터가 사용자에게 도달하기 위해 이동해야 하는 거리를 좁히면 더 많은 콘텐츠를 더 빠르게 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-102">By decreasing the distance data has to travel to your users, you can deliver more content faster.</span></span> <span data-ttu-id="faf6b-103">데이터가 Azure Cosmos DB에 저장된 경우 마우스로 한 번 가리키고 클릭하기만 하면 사이트의 데이터가 전 세계 여러 지역으로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-103">If your data is stored in Azure Cosmos DB, replicating your site's data to multiple regions around the world is a point and click operation.</span></span>

<!-- Activate the sandbox -->
[!include[](../../../includes/azure-sandbox-activate.md)]

<span data-ttu-id="faf6b-104">이 단원에서는 글로벌 배포와 기본 다중 마스터 데이터베이스 서비스의 이점을 살펴본 후 계정을 3개의 추가 지역으로 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-104">In this unit you'll learn the benefits of global distribution and a natively multi-mastered database service, and then replicate your account into three additional regions.</span></span>

## <a name="global-distribution-basics"></a><span data-ttu-id="faf6b-105">글로벌 배포 기본 사항</span><span class="sxs-lookup"><span data-stu-id="faf6b-105">Global distribution basics</span></span>

<span data-ttu-id="faf6b-106">글로벌 배포를 사용하면 한 지역의 데이터를 여러 Azure 지역에 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-106">Global distribution enables you to replicate data from one region into multiple Azure regions.</span></span> <span data-ttu-id="faf6b-107">데이터베이스를 복제할 지역을 언제든지 추가하거나 제거할 수 있으며, Azure Cosmos DB는 사용자가 지역을 추가한 후 데이터가 30분 이내에 작동하도록 보장합니다(데이터가 100TB 미만인 경우).</span><span class="sxs-lookup"><span data-stu-id="faf6b-107">You can add or remove regions in which your database is replicated at any time, and Azure Cosmos DB ensures that when you add an additional region, your data is available for operations within 30 minutes, assuming your data is 100 TBs or less.</span></span>

<span data-ttu-id="faf6b-108">둘 이상의 지역에 데이터를 복제하기 위한 두 가지 일반적인 시나리오는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-108">There are two common scenarios for replicating data in two or more regions:</span></span>

1. <span data-ttu-id="faf6b-109">전세계 어느 위치에 있든 관계 없이 최종 사용자에게 대기 시간이 짧은 데이터 액세스 제공</span><span class="sxs-lookup"><span data-stu-id="faf6b-109">Delivering low-latency data access to end users no matter where they are located around the globe</span></span>
2. <span data-ttu-id="faf6b-110">BCDR(무중단 업무 방식 및 재해 복구)를 위한 지역 복원 기능 추가</span><span class="sxs-lookup"><span data-stu-id="faf6b-110">Adding regional resiliency for business continuity and disaster recovery (BCDR)</span></span>

<span data-ttu-id="faf6b-111">고객에게 대기 시간이 짧은 액세스를 제공하려면 사용자의 위치와 가장 가까운 지역에 데이터를 복제하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-111">To deliver low-latency access to customers, it is recommended that you replicate the data to regions closest to where your users are.</span></span> <span data-ttu-id="faf6b-112">온라인 의류 회사의 경우에는 로스앤젤레스, 뉴욕, 도쿄에 고객을 보유하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-112">For your online clothing company, you have customers in Los Angeles, New York, and Tokyo.</span></span> <span data-ttu-id="faf6b-113">[Azure 지역](https://azure.microsoft.com/global-infrastructure/regions/) 페이지를 살펴보고 이러한 고객 집합과 가장 가까운 지역을 확인하세요. 이러한 위치에 사용자를 복제할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-113">Take a look at the [Azure regions](https://azure.microsoft.com/global-infrastructure/regions/) page, and determine the closest regions to those sets of customers, as those are the locations you'll replicate users to.</span></span>

<span data-ttu-id="faf6b-114">BCDR 솔루션을 제공하려면 [비즈니스 연속성 및 재해 복구(BCDR): Azure 쌍을 이루는 지역](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/) 문서에서 설명된 하위 지역 쌍에 기초하여 지역을 추가하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-114">To provide a BCDR solution, it is recommended to add regions based on the region pairs described in the [Business continuity and disaster recovery (BCDR): Azure Paired Regions](https://azure.microsoft.com/documentation/articles/best-practices-availability-paired-regions/) article.</span></span>

<span data-ttu-id="faf6b-115">데이터베이스가 복제되면 처리량 및 저장소도 동일하게 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-115">When a database is replicated, the throughput and storage are replicated equally as well.</span></span> <span data-ttu-id="faf6b-116">따라서 원본 데이터베이스의 저장소가 10GB이고 처리량이 1,000RU/s이며, 이를 3개 지역에 추가로 복제했다면 각 지역의 데이터는 10GB이고, 처리량은 1,000RU/s가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-116">So if your original database had 10GB of storage, and throughput of 1,000 RU/s, and if you replicated that to three additional regions, each region would have 10GB of data and 1,000 RU/s of throughput.</span></span> <span data-ttu-id="faf6b-117">저장소와 처리량이 각 지역에 복제되기 때문에 지역에 복제하는 비용이 원래 지역과 동일하므로 3개 지역에 추가로 복제할 경우 복제되지 않은 원래 데이터베이스보다 약 4배의 비용이 듭니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-117">Because the storage and throughput is replicated in each region, the cost of replicating to a region is the same as the original region, so replicating to 3 additional regions, would cost approximately four times the original non-replicated database.</span></span>

## <a name="creating-an-azure-cosmos-db-account-in-the-portal"></a><span data-ttu-id="faf6b-118">포털에서 Azure Cosmos DB 계정 만들기</span><span class="sxs-lookup"><span data-stu-id="faf6b-118">Creating an Azure Cosmos DB account in the portal</span></span>

1. <span data-ttu-id="faf6b-119">샌드박스를 활성화하는 데 사용한 것과 동일한 계정을 사용하여 [Azure Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-119">Sign in to the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) using the same account you used to activate the sandbox.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="faf6b-120">Azure Portal과 샌드박스에 동일한 계정으로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-120">Login to the Azure portal and the sandbox with the same account.</span></span>
    >
    > <span data-ttu-id="faf6b-121">위의 링크로 Azure Portal에 로그인하여 컨시어지 구독에 액세스를 제공하는 샌드박스에 연결되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-121">Login to the Azure portal using the link above to ensure you are connected to the sandbox, which provides access to a Concierge Subscription.</span></span>

1. <span data-ttu-id="faf6b-122">**리소스 만들기** > **데이터베이스** > **Azure Cosmos DB**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-122">Click **Create a resource** > **Databases** > **Azure Cosmos DB**.</span></span>

   ![Azure Portal 데이터베이스 창](../media/2-global-distribution/2-create-nosql-db-databases-json-tutorial.png)

1. <span data-ttu-id="faf6b-124">**Azure Cosmos DB 계정 만들기** 페이지에서 위치를 포함한 새 Azure Cosmos DB 계정에 대한 설정을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-124">On the **Create Azure Cosmos DB Account** page, enter the settings for the new Azure Cosmos DB account, including the location.</span></span>

    <span data-ttu-id="faf6b-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span><span class="sxs-lookup"><span data-stu-id="faf6b-125"><!-- Resource selection --> [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]</span></span>

    <span data-ttu-id="faf6b-126">설정</span><span class="sxs-lookup"><span data-stu-id="faf6b-126">Setting</span></span>|<span data-ttu-id="faf6b-127">값</span><span class="sxs-lookup"><span data-stu-id="faf6b-127">Value</span></span>|<span data-ttu-id="faf6b-128">설명</span><span class="sxs-lookup"><span data-stu-id="faf6b-128">Description</span></span>
    ---|---|---
    <span data-ttu-id="faf6b-129">ID</span><span class="sxs-lookup"><span data-stu-id="faf6b-129">ID</span></span>|<span data-ttu-id="faf6b-130">*고유한 이름 입력*</span><span class="sxs-lookup"><span data-stu-id="faf6b-130">*Enter a unique name*</span></span>|<span data-ttu-id="faf6b-131">이 Azure Cosmos DB 계정을 식별하는 고유한 이름을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-131">Enter a unique name to identify this Azure Cosmos DB account.</span></span> <span data-ttu-id="faf6b-132">URI를 만들기 위해 제공하는 ID에 *documents.azure.com*이 추가되므로 식별할 수 있는 고유한 ID를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-132">Because *documents.azure.com* is appended to the ID that you provide to create your URI, use a unique but identifiable ID.</span></span><br><br><span data-ttu-id="faf6b-133">ID는 소문자, 숫자 및 하이픈(-) 문자만 포함할 수 있으며, 3-50자를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-133">The ID can contain only lowercase letters, numbers, and the hyphen (-) character, and it must contain 3 to 50 characters.</span></span>
    <span data-ttu-id="faf6b-134">API</span><span class="sxs-lookup"><span data-stu-id="faf6b-134">API</span></span>|<span data-ttu-id="faf6b-135">SQL</span><span class="sxs-lookup"><span data-stu-id="faf6b-135">SQL</span></span>|<span data-ttu-id="faf6b-136">API는 만들 계정의 형식을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-136">The API determines the type of account to create.</span></span> <span data-ttu-id="faf6b-137">Azure Cosmos DB는 응용 프로그램의 요구 사항을 충족하기 위해 SQL(문서 데이터베이스), Gremlin(그래프 데이터베이스), MongoDB(문서 데이터베이스), Azure Table 및 Cassandra라는 다섯 가지 API를 제공합니다. 현재 각 API에는 별도의 계정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-137">Azure Cosmos DB provides five APIs to suit the needs of your application: SQL (document database), Gremlin (graph database), MongoDB (document database), Azure Table, and Cassandra, each of which currently requires a separate account.</span></span> <br><br><span data-ttu-id="faf6b-138">이 모듈에서는 SQL 구문을 사용하여 쿼리할 수 있고 SQL API를 통해 액세스할 수 있는 문서 데이터베이스를 만들므로 **SQL**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-138">Select **SQL** because in this module you are creating a document database that is queryable using SQL syntax and accessible with the SQL API.</span></span>|
    <span data-ttu-id="faf6b-139">구독</span><span class="sxs-lookup"><span data-stu-id="faf6b-139">Subscription</span></span>|<span data-ttu-id="faf6b-140">*컨시어지 구독*</span><span class="sxs-lookup"><span data-stu-id="faf6b-140">*Concierge Subscription*</span></span>|<span data-ttu-id="faf6b-141">컨시어지 구독을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-141">Select your Concierge Subscription.</span></span> <span data-ttu-id="faf6b-142">컨시어지 구독이 나열되어 표시되지 않으면 여러 테넌트를 구독에서 사용하도록 설정하고 테넌트를 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-142">If you do not see the Concierge Subscription listed, you have multiple tenants enabled on your subscription, and you need to change tenants.</span></span> <span data-ttu-id="faf6b-143">이렇게 하려면 [샌드박스용 Azure Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)과 같은 다음 포털 링크를 사용하여 다시 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-143">To do so, login again using the following portal link: [Azure portal for sandbox](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true).</span></span>
    <span data-ttu-id="faf6b-144">리소스 그룹</span><span class="sxs-lookup"><span data-stu-id="faf6b-144">Resource Group</span></span>|<span data-ttu-id="faf6b-145">기존 항목 사용</span><span class="sxs-lookup"><span data-stu-id="faf6b-145">Use existing</span></span><br><br><span data-ttu-id="faf6b-146"><rgn>[샌드박스 리소스 그룹 이름]</rgn></span><span class="sxs-lookup"><span data-stu-id="faf6b-146"><rgn>[sandbox resource group name]</rgn></span></span>|<span data-ttu-id="faf6b-147">**기존 항목 사용**을 선택한 다음, <rgn>[샌드박스 리소스 그룹 이름]</rgn>을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-147">Select **Use existing**, and then enter <rgn>[sandbox resource group name]</rgn>.</span></span>
    <span data-ttu-id="faf6b-148">위치</span><span class="sxs-lookup"><span data-stu-id="faf6b-148">Location</span></span>|<span data-ttu-id="faf6b-149">*가장 가까운 지역 선택*</span><span class="sxs-lookup"><span data-stu-id="faf6b-149">*Select the region closest to you*</span></span>|<span data-ttu-id="faf6b-150">위의 지역 목록에서 가장 가까운 지역을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-150">Select the region closest to you from the list of regions above.</span></span>
    <span data-ttu-id="faf6b-151">지역 중복</span><span class="sxs-lookup"><span data-stu-id="faf6b-151">Geo-Redundancy</span></span>| <span data-ttu-id="faf6b-152">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="faf6b-152">Disable</span></span> | <span data-ttu-id="faf6b-153">이 설정은 두 번째(쌍을 이루는) 지역에서 복제된 버전의 데이터베이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-153">This setting creates a replicated version of your database in a second (paired) region.</span></span> <span data-ttu-id="faf6b-154">나중에 데이터베이스를 복제할 것이므로 지금은 사용하지 않도록 설정해 둡니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-154">Leave this set to disabled for now, as you will replicate the database later.</span></span>
    <span data-ttu-id="faf6b-155">다중 마스터</span><span class="sxs-lookup"><span data-stu-id="faf6b-155">Multi Master</span></span> | <span data-ttu-id="faf6b-156">사용</span><span class="sxs-lookup"><span data-stu-id="faf6b-156">Enable</span></span> | <span data-ttu-id="faf6b-157">이 설정을 사용하면 동시에 여러 지역에 작성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-157">This setting enables you to write to multiple regions at the same time.</span></span> <span data-ttu-id="faf6b-158">이 설정은 계정 만드는 동안에만 구성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-158">This setting can only be configured during account creation.</span></span>
    <span data-ttu-id="faf6b-159">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="faf6b-159">Virtual Network</span></span>|<span data-ttu-id="faf6b-160">비워 둠</span><span class="sxs-lookup"><span data-stu-id="faf6b-160">Leave blank</span></span>|<span data-ttu-id="faf6b-161">지금은 가상 네트워크를 비워 둡니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-161">Leave virtual networks blank for now.</span></span> <span data-ttu-id="faf6b-162">나중에 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-162">This can be configured later.</span></span>

1. <span data-ttu-id="faf6b-163">**검토 + 만들기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-163">Click **Review + Create**.</span></span>

    ![Azure Cosmos DB에 대한 새 계정 페이지](../media/2-global-distribution/2-azure-cosmos-db-create-new-account.png)

1. <span data-ttu-id="faf6b-165">설정의 유효성을 검사한 후에 **만들기**를 클릭하여 계정을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-165">After the settings are validated, click **Create** to create the account.</span></span>

1. <span data-ttu-id="faf6b-166">계정 생성에는 몇 분 정도가 소요됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-166">The account creation takes a few minutes.</span></span> <span data-ttu-id="faf6b-167">포털이 배포에 성공했다는 알림을 표시할 때까지 기다린 후 알림을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-167">Wait for the portal to display the notification that the deployment succeeded and click the notification.</span></span>

    ![알림 경고](../media/2-global-distribution/2-azure-cosmos-db-notification.png)

1. <span data-ttu-id="faf6b-169">[알림] 창에서 **리소스로 이동**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-169">In the notification window, click **Go to resource**.</span></span>

    ![리소스로 이동](../media/2-global-distribution/2-azure-cosmos-db-go-to-resource.png)

    <span data-ttu-id="faf6b-171">포털에서 **축하합니다! Azure Cosmos DB 계정이 만들어졌습니다.** 페이지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-171">The portal displays the **Congratulations! Your Azure Cosmos DB account was created** page.</span></span>

    ![Azure Portal 알림 창](../media/2-global-distribution/2-azure-cosmos-db-account-created.png)

## <a name="replicate-data-in-multiple-regions"></a><span data-ttu-id="faf6b-173">여러 지역에 데이터 복제</span><span class="sxs-lookup"><span data-stu-id="faf6b-173">Replicate data in multiple regions</span></span>

<span data-ttu-id="faf6b-174">로스앤젤레스, 뉴욕, 도쿄에 있는 글로벌 사용자에게 가장 가까운 데이터베이스를 지금 복제해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-174">Let's now replicate your database closest to your global users in Los Angeles, New York, and Tokyo.</span></span>

1. <span data-ttu-id="faf6b-175">계정 페이지의 메뉴에서 **전역적으로 데이터 복제**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-175">In the account page, click **Replicate data globally** from the menu.</span></span>
1. <span data-ttu-id="faf6b-176">**전역적으로 데이터 복제** 페이지에서 미국 서부 2, 미국 동부 및 일본 동부 지역을 선택한 다음, **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-176">In the **Replicate data globally** page, select the West US 2, East US, and Japan East regions, and then click **Save**.</span></span>

    <span data-ttu-id="faf6b-177">Azure Portal에서 지도가 보이지 않으면 화면 왼쪽의 메뉴를 최소화하여 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-177">If you don't see the map in the Azure portal, minimize the menus of the left side of the screen to display it.</span></span>

    <span data-ttu-id="faf6b-178">새 지역에 데이터가 기록되는 동안 이 페이지에 **업데이트 중** 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-178">The page will display an **Updating** message while the data is written to the new regions.</span></span> <span data-ttu-id="faf6b-179">새로운 지역의 데이터는 30분 이내에 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-179">Data in the new regions will be available within 30 minutes.</span></span>

    ![지도에서 지역을 클릭하여 추가](../media/2-global-distribution/2-global-replication.gif)

## <a name="summary"></a><span data-ttu-id="faf6b-181">요약</span><span class="sxs-lookup"><span data-stu-id="faf6b-181">Summary</span></span>

<span data-ttu-id="faf6b-182">이 단원에서는 전 세계에서 사용자가 가장 집중되어 있는 지역에 데이터를 복제하여 해당 사용자가 사이트의 데이터에 액세스할 때 발생하는 대기 시간을 축소했습니다.</span><span class="sxs-lookup"><span data-stu-id="faf6b-182">In this unit, you replicated your database to the regions of the world in which your users are most concentrated, providing them lower-latency access to the data on your site.</span></span>
